import{d as x,c as d,x as N,j as h,a as p,o as l,e as a,u as e,g as B,w as n,b as u,f as L,h as _,i as R,q as v,F as b,v as D}from"./app-CeqT5j6d.js";import{_ as T}from"./Card.vue_vue_type_script_setup_true_lang-CnMqEk2V.js";import{L as j}from"./index-Bs8f764w.js";import{_ as A}from"./FormError.vue_vue_type_script_setup_true_lang-CjtA24vv.js";import{_ as E}from"./index-B4eLT_yO.js";import{_ as F}from"./Label.vue_vue_type_script_setup_true_lang-Cmhej21L.js";import{_ as y}from"./FormInput.vue_vue_type_script_setup_true_lang-BvsU8Rvg.js";import{_ as I}from"./FormSwitch.vue_vue_type_script_setup_true_lang-DfxFMgvm.js";import{_ as O}from"./FormTextarea.vue_vue_type_script_setup_true_lang-BFvc5tUR.js";import{S as P,a as q,_ as M}from"./index-CkMIf9Jd.js";import{u as z,_ as G}from"./AppLayout.vue_vue_type_script_setup_true_lang-CmYk630a.js";import{u as H,P as J}from"./useUuid-Cc8upzaf.js";import{_ as K}from"./AppMainLayout.vue_vue_type_script_setup_true_lang-C1gYns_d.js";import{s as Q}from"./slug-xwoAxeGq.js";import"./useForwardExpose-tI2Irncb.js";import"./Input.vue_vue_type_script_setup_true_lang-jQHQGABn.js";import"./Switch.vue_vue_type_script_setup_true_lang-B8Qy0qyp.js";import"./RovingFocusGroup-Di5W4w40.js";import"./useFormControl-2_AIVmaZ.js";import"./VisuallyHiddenInput-BTWUmTK7.js";import"./FormCombobox.vue_vue_type_script_setup_true_lang-kFsoOtq-.js";import"./check-Wsy1iXu8.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-BGnjMs66.js";import"./chevron-down-BRS8lO_m.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CD7F95B0.js";const W={class:"space-y-3"},X={class:"space-y-3"},Y={class:"flex items-center justify-center"},Se=x({layout:K,__name:"Create",props:{plants:{},options:{}},setup(k){const c=k,{tenant:s}=z(),{uuid:f}=H(),V=d(()=>[{title:"Dashboard",href:route("dashboard",{tenant:(s==null?void 0:s.id)||""})},{title:"Routes",href:route("routes.index",{tenant:(s==null?void 0:s.id)||""})},{title:"Create",href:route("routes.create",{tenant:(s==null?void 0:s.id)||""})}]),C=d(()=>{var r;return!!((r=c.options.switch.statuses.find(o=>o.is_default))!=null&&r.value)}),$=d(()=>{var r;return((r=c.options.switch.statuses.find(o=>o.value===t.status))==null?void 0:r.name)??P[q.INACTIVE]}),t=N({name:"",code:"",description:"",status:C.value,operations:[{key:f(),plant_id:"",department_id:"",operation_id:""}]}),g=()=>t.post(route("routes.store",{tenant:(s==null?void 0:s.id)||""}),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{t.reset()}}),S=()=>{t.operations=[...t.operations,{key:f(),plant_id:"",department_id:"",operation_id:""}]},U=r=>{t.operations=t.operations.filter(o=>o.key!==r)};return h(()=>t.name,r=>{t.code=Q(r)}),(r,o)=>(l(),p(b,null,[a(e(B),{title:"Create Route"}),a(G,{breadcrumbs:V.value},{default:n(()=>[a(e(j),null,{default:n(()=>[u("form",{onSubmit:L(g,["prevent"])},[a(e(T),{title:"Create Route"},{default:n(()=>[a(e(y),{label:"Name",error:e(t).errors.name,"model-value":e(t).name,"onUpdate:modelValue":o[0]||(o[0]=i=>e(t).name=i)},null,8,["error","model-value"]),a(e(y),{label:"Code",error:e(t).errors.code,"model-value":e(t).code,"onUpdate:modelValue":o[1]||(o[1]=i=>e(t).code=i)},null,8,["error","model-value"]),a(e(O),{label:"Description",error:e(t).errors.description,"model-value":e(t).description,"onUpdate:modelValue":o[2]||(o[2]=i=>e(t).description=i)},null,8,["error","model-value"]),u("div",W,[u("div",null,[a(e(F),{class:"mb-1"},{default:n(()=>o[4]||(o[4]=[v("Operations:")])),_:1,__:[4]})]),u("div",X,[(l(!0),p(b,null,D(e(t).operations,(i,m)=>(l(),p("div",{key:i.key,class:"space-y-1"},[(l(),_(e(M),{key:i.key,plants:r.plants,"total-selected":e(t).operations.length,"curr-index":m,"model-value":e(t).operations[m],"onUpdate:modelValue":w=>e(t).operations[m]=w,onRemove:U},null,8,["plants","total-selected","curr-index","model-value","onUpdate:modelValue"]))]))),128))]),u("div",Y,[a(e(E),{type:"button",class:"cursor-pointer",variant:"outline",onClick:S},{default:n(()=>[a(e(J)),o[5]||(o[5]=v(" Add Operation"))]),_:1,__:[5]})])]),e(t).status!==void 0?(l(),_(e(I),{key:0,label:$.value,error:e(t).errors.status,"model-value":e(t).status,"onUpdate:modelValue":o[3]||(o[3]=i=>e(t).status=i)},null,8,["label","error","model-value"])):R("",!0),a(e(A),{type:"submit",disabled:e(t).processing,loading:e(t).processing},null,8,["disabled","loading"])]),_:1})],32)]),_:1})]),_:1},8,["breadcrumbs"])],64))}});export{Se as default};
