import{_ as Q,s as R,a as X,b as Y,c as Z,p as ee,P as te,T as se,d as ae}from"./slug-XwWPv5mU.js";import{d as K,D as B,E as le,m as S,q as D,o as c,w as n,e as l,u as t,n as re,a as m,F as M,v as O,h as f,t as y,l as z,c as V,i as x,j as L,x as ie,g as oe,b as u,k as o,W as ne}from"./app-DUmcipZh.js";import{a as de,b as ue,c as ce,d as pe,f as me,g as fe,h as _e,_ as ve,e as ye,u as ge}from"./options-QBvKpLEH.js";import{a as T,_ as C}from"./index-l4BOjb0A.js";import{_ as U}from"./Input.vue_vue_type_script_setup_true_lang-BMNhEROQ.js";import{_ as b}from"./Label.vue_vue_type_script_setup_true_lang-DOHPqsu5.js";import{_ as he}from"./AppLayout.vue_vue_type_script_setup_true_lang-C-Ima7Cj.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-DDZ1QcSV.js";import"./RovingFocusGroup-CwCRc8U3.js";import"./useForwardExpose-zpbGDchV.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-OrgFrjeS.js";import"./check-CwT-b6FH.js";import"./VisuallyHiddenInput-PSdKOOnA.js";import"./index-CDAjUz8d.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CsSWuJzl.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=T("MinusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=T("PlusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Ve=K({__name:"MultiSelect",props:B({options:{},placeholder:{},triggerClass:{}},{modelValue:{},modelModifiers:{}}),emits:B(["change"],["update:modelValue"]),setup($,{emit:w}){const g=le($,"modelValue"),k=w;return S(g,d=>{d&&k("change",d)}),(d,h)=>(c(),D(t(me),{modelValue:g.value,"onUpdate:modelValue":h[0]||(h[0]=v=>g.value=v),multiple:"",disabled:!d.options.length},{default:n(()=>[l(t(de),{class:re(["min-w-40",d.triggerClass])},{default:n(()=>[l(t(ue),{placeholder:d.placeholder},null,8,["placeholder"])]),_:1},8,["class"]),l(t(ce),null,{default:n(()=>[l(t(pe),null,{default:n(()=>[(c(!0),m(M,null,O(d.options,(v,E)=>(c(),D(t(fe),{key:E,value:v.value},{default:n(()=>[f(y(v.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue","disabled"]))}}),xe={key:0},N=K({__name:"ErrorMessages",props:{errorKey:{}},setup($){const w=$,g=z(),k=V(()=>Object.entries(g.props.errors).filter(([d])=>d.startsWith(w.errorKey)).map(([d,h])=>({key:d,message:h})));return(d,h)=>k.value.length?(c(),m("div",xe,[(c(!0),m(M,null,O(k.value,v=>(c(),m("p",{key:v.key,class:"text-destructive"},y(v.message),1))),128))])):x("",!0)}}),$e={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},we={class:"space-y-3"},Ce={class:"flex flex-wrap items-center justify-end gap-2"},Ue={class:"grid w-full max-w-sm items-center gap-1.5"},De={key:0,class:"text-destructive"},Me={class:"grid w-full max-w-sm items-center gap-1.5"},Ee={key:0,class:"text-destructive"},Pe={class:"grid w-full max-w-sm items-center gap-1.5"},Se={key:0,class:"text-destructive"},Ke={class:"grid w-full max-w-sm items-center gap-1.5"},Oe={key:0,class:"text-destructive"},Be={class:"grid w-full max-w-sm items-center gap-1.5"},Le={class:"flex items-center gap-2"},Ne={class:"flex-1"},ze={class:"flex-1"},Te={class:"grid w-full max-w-sm items-center gap-1.5"},je={class:"grid w-full max-w-sm items-center gap-1.5"},Ae={class:"flex items-center space-x-2"},Fe={key:0,class:"text-destructive"},lt=K({layout:Q,__name:"Index",props:{products:{},statuses:{},options:{}},setup($){const w=$,{formatDateTime:g}=ge(),k=z(),d=V(()=>{var a;return((a=k.props.tenant)==null?void 0:a.id)||""}),h=V(()=>route().params),v=L({search:h.value.search,entries:h.value.entries||"10"}),E={placeholder:"Search name..."},j=[{title:"Dashboard",href:route("dashboard",{tenant:d.value})},{title:"Products",href:route("products.index",{tenant:d.value})}],A=a=>{ne.visit(route("products.index",{...ee(a),tenant:d.value}))},F={description:!1},I=[{accessorKey:"actions",header:()=>o("div",null,"Actions"),cell:({row:a})=>{const e=a.original;return o("div",{class:"flex items-center gap-2"},[o(C,{class:"h-auto size-6 cursor-pointer rounded-full",onClick:()=>P("update",e)},()=>o(te,{class:"size-3"})),o(C,{class:"h-auto size-6 cursor-pointer rounded-full",variant:"destructive",onClick:()=>P("destroy",e)},()=>o(se,{class:"size-3"}))])}},{accessorKey:"name",header:()=>o("div",null,"Name"),cell:({row:a})=>o("div",null,a.getValue("name"))},{accessorKey:"code",header:()=>o("div",null,"Code"),cell:({row:a})=>o("div",null,a.getValue("code"))},{accessorKey:"description",header:()=>o("div",null,"Description"),cell:({row:a})=>o("div",null,a.getValue("description"))},{accessorKey:"shelf_life_days",header:()=>o("div",null,"Shelf Life Days"),cell:({row:a})=>o("div",null,a.getValue("shelf_life_days"))},{accessorKey:"is_active",header:()=>o("div",null,"Active"),cell:({row:a})=>{const{is_active:e,is_active_display:i}=a.original;return o(ae,{variant:e?"default":"destructive"},()=>i)}},{accessorKey:"created_at",header:()=>o("div",null,"Created At"),cell:({row:a})=>{const e=g(a.original.created_at);return e?o("div",null,e):o("div",null)}},{accessorKey:"updated_at",header:()=>o("div",null,"Updated At"),cell:({row:a})=>{const e=g(a.original.updated_at);return e?o("div",null,e):o("div",null)}}],r=L({type:null,title:"",isOpen:!1,data:null}),s=ie(r.type||"",{name:"",code:"",description:"",shelf_life_days:"",prices:[{currency:"",value:""}],is_active:!0,materials:[]}),H=V(()=>{var a;return(a=w.statuses.find(e=>s.is_active?e.value:!e.value))==null?void 0:a.name}),W=V(()=>r.type==="store"?"Create":r.type==="update"?"Update":"Delete"),q=V(()=>r.type==="destroy"?"destructive":"default"),P=(a,e)=>{var i,_;switch(a){case"store":r.title="Create Product";break;case"update":e&&(r.data=e,s.name=e.name,s.code=e.code,s.description=e.description||"",s.shelf_life_days=e.shelf_life_days||"",s.prices=e.prices.map(p=>({id:p.id,currency:p.currency,value:+p.price})),s.is_active=e.is_active,s.materials=e.materials.filter(p=>p.is_active).map(p=>p.id)),r.title=`Edit ${((i=r.data)==null?void 0:i.name)||"Product"}`;break;case"destroy":e&&(r.data=e),r.title=`Delete ${((_=r.data)==null?void 0:_.name)||"Product"}`}r.type=a,r.isOpen=!0},G=()=>{var a,e;if(r.type){const i=r.type==="store"?route("products.store",{tenant:d.value}):r.type==="update"?route("products.update",{tenant:d.value,product:((a=r.data)==null?void 0:a.id)||""}):route("products.destroy",{tenant:d.value,product:((e=r.data)==null?void 0:e.id)||""}),_=r.type==="store"?"post":r.type==="update"?"put":"delete";s.transform(p=>r.type!=="destroy"?p:{}).submit(_,i,{onSuccess:()=>{s.reset(),r.isOpen=!1}})}},J=a=>{a?s.prices=s.prices.filter((e,i)=>a!==i):s.prices=[...s.prices,{currency:"",value:""}]};return S(()=>r.isOpen,a=>{a||(r.data=null,s.clearErrors(),s.reset())}),S([()=>s.name,()=>r.type],([a,e])=>{e==="store"&&(s.code=R(a))}),(a,e)=>(c(),m(M,null,[l(t(oe),{title:"Products"}),l(he,{breadcrumbs:j},{default:n(()=>[u("div",$e,[u("div",we,[u("div",Ce,[l(t(X),{open:r.isOpen,"onUpdate:open":e[7]||(e[7]=i=>r.isOpen=i),dialog:r,onSubmit:G},{button:n(()=>[l(t(C),{class:"cursor-pointer",onClick:e[0]||(e[0]=i=>P("store"))},{default:n(()=>e[8]||(e[8]=[f("Create")])),_:1,__:[8]})]),"submit-button":n(()=>[l(t(C),{type:"submit",class:"cursor-pointer",variant:q.value,disabled:t(s).processing},{default:n(()=>[f(y(W.value),1)]),_:1},8,["variant","disabled"])]),default:n(()=>[u("div",Ue,[l(t(b),null,{default:n(()=>e[9]||(e[9]=[f("Name")])),_:1,__:[9]}),l(t(U),{type:"text",placeholder:"Enter Name","model-value":t(s).name,"onUpdate:modelValue":e[1]||(e[1]=i=>t(s).name=i)},null,8,["model-value"]),t(s).errors.name?(c(),m("p",De,y(t(s).errors.name),1)):x("",!0)]),u("div",Me,[l(t(b),null,{default:n(()=>e[10]||(e[10]=[f("Code")])),_:1,__:[10]}),l(t(U),{type:"text",placeholder:"Enter Code","model-value":t(s).code,"onUpdate:modelValue":e[2]||(e[2]=i=>t(s).code=i)},null,8,["model-value"]),t(s).errors.code?(c(),m("p",Ee,y(t(s).errors.code),1)):x("",!0)]),u("div",Pe,[l(t(b),null,{default:n(()=>e[11]||(e[11]=[f("Description")])),_:1,__:[11]}),l(t(Y),{placeholder:"Enter Description","model-value":t(s).description,"onUpdate:modelValue":e[3]||(e[3]=i=>t(s).description=i)},null,8,["model-value"]),t(s).errors.description?(c(),m("p",Se,y(t(s).errors.description),1)):x("",!0)]),u("div",Ke,[l(t(b),null,{default:n(()=>e[12]||(e[12]=[f("Shelf Life Day(s)")])),_:1,__:[12]}),l(t(U),{type:"number",placeholder:"Enter Shelf Life Day(s)","model-value":t(s).shelf_life_days,"onUpdate:modelValue":e[4]||(e[4]=i=>t(s).shelf_life_days=i),"model-valueModifiers":{number:!0},min:"1"},null,8,["model-value"]),t(s).errors.shelf_life_days?(c(),m("p",Oe,y(t(s).errors.shelf_life_days),1)):x("",!0)]),u("div",Be,[l(t(b),null,{default:n(()=>e[13]||(e[13]=[f("Unit price")])),_:1,__:[13]}),(c(!0),m(M,null,O(t(s).prices,(i,_)=>(c(),m("div",{key:_},[u("div",Le,[u("div",Ne,[l(t(_e),{options:a.options.currencies,placeholder:"Select Currency","model-value":i.currency,"onUpdate:modelValue":p=>i.currency=p,"trigger-class":"w-full"},null,8,["options","model-value","onUpdate:modelValue"])]),u("div",ze,[l(t(U),{type:"number",step:".01",min:"0",placeholder:"Enter Unit Price","model-value":i.value,"onUpdate:modelValue":p=>i.value=p,"model-valueModifiers":{number:!0},class:"w-full"},null,8,["model-value","onUpdate:modelValue"])]),u("div",null,[l(t(C),{type:"button",size:"icon",class:"cursor-pointer",variant:_?"destructive":"default",onClick:p=>J(_)},{default:n(()=>[_?(c(),D(t(be),{key:1})):(c(),D(t(ke),{key:0}))]),_:2},1032,["variant","onClick"])])]),l(t(N),{"error-key":`prices.${_}`},null,8,["error-key"])]))),128))]),u("div",Te,[l(t(b),null,{default:n(()=>e[14]||(e[14]=[f("Materials")])),_:1,__:[14]}),l(t(Ve),{options:a.options.materials,placeholder:"Select Materials","model-value":t(s).materials,"onUpdate:modelValue":e[5]||(e[5]=i=>t(s).materials=i),"trigger-class":"w-full"},null,8,["options","model-value"]),l(t(N),{"error-key":"materials"})]),u("div",je,[l(t(b),{class:"mb-1"},{default:n(()=>e[15]||(e[15]=[f("Status")])),_:1,__:[15]}),u("div",Ae,[l(t(Z),{class:"cursor-pointer","model-value":t(s).is_active,"onUpdate:modelValue":e[6]||(e[6]=i=>t(s).is_active=i)},null,8,["model-value"]),l(t(b),null,{default:n(()=>[f(y(H.value),1)]),_:1})]),t(s).errors.is_active?(c(),m("p",Fe,y(t(s).errors.is_active),1)):x("",!0)])]),_:1},8,["open","dialog"])]),u("div",null,[l(t(ve),{columns:I,"paginate-data":a.products,"column-visibility":F,filter:v,"entry-options":t(ye),"search-config":E,onFilterChange:A},null,8,["paginate-data","filter","entry-options"])])])])]),_:1})],64))}});export{lt as default};
