import{a as M,_ as g}from"./index-CJCEQRlH.js";import{d as z,l as O,c as k,a as p,i as h,o as u,F as D,v as T,t as v,j as K,x as J,m as P,e as o,u as t,g as Q,w as d,b as n,h as m,q as E,k as i,W as R,S as X}from"./app-Ca6B20Vz.js";import{_ as Y,P as Z}from"./Dialog.vue_vue_type_script_setup_true_lang-DIvpwqmc.js";import{a as L,_ as ee,e as te,u as se}from"./options-D-fzGrun.js";import{p as le,T as ae,_ as re}from"./pickBy-d3_6Ny80.js";import{_ as V}from"./Input.vue_vue_type_script_setup_true_lang-DEDyQ7b3.js";import{_ as y}from"./Label.vue_vue_type_script_setup_true_lang-CGwBPp-x.js";import{s as ie,_ as oe,a as ne}from"./slug-DF2Gj0ID.js";import{_ as de}from"./AppLayout.vue_vue_type_script_setup_true_lang-CUcfEIAE.js";import{_ as ue}from"./AppMainLayout.vue_vue_type_script_setup_true_lang-DyzzONnw.js";import"./DialogTrigger.vue_vue_type_script_setup_true_lang-S-gHoVxI.js";import"./RovingFocusGroup-CMGXFI4i.js";import"./useForwardExpose-F3Z0XM54.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-BBT9hPXf.js";import"./check-DulPtJwb.js";import"./useFormControl-BZYuW8wt.js";import"./VisuallyHiddenInput-yYGSp1Aq.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CmFoY379.js";import"./index-DZckqy0Q.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=M("AnvilIcon",[["path",{d:"M7 10H6a4 4 0 0 1-4-4 1 1 0 0 1 1-1h4",key:"1hjpb6"}],["path",{d:"M7 5a1 1 0 0 1 1-1h13a1 1 0 0 1 1 1 7 7 0 0 1-7 7H8a1 1 0 0 1-1-1z",key:"1qn45f"}],["path",{d:"M9 12v5",key:"3anwtq"}],["path",{d:"M15 12v5",key:"5xh3zn"}],["path",{d:"M5 20a3 3 0 0 1 3-3h8a3 3 0 0 1 3 3 1 1 0 0 1-1 1H6a1 1 0 0 1-1-1",key:"1fi4x8"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=M("MinusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=M("PlusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),me={key:0},_e=z({__name:"ErrorMessages",props:{errorKey:{}},setup($){const S=$,b=O(),w=k(()=>Object.entries(b.props.errors).filter(([c])=>c.startsWith(S.errorKey)).map(([c,x])=>({key:c,message:x})));return(c,x)=>w.value.length?(u(),p("div",me,[(u(!0),p(D,null,T(w.value,C=>(u(),p("p",{key:C.key,class:"text-destructive"},v(C.message),1))),128))])):h("",!0)}}),ve={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},ye={class:"space-y-3"},he={class:"flex flex-wrap items-center justify-end gap-2"},ge={class:"grid w-full max-w-sm items-center gap-1.5"},ke={key:0,class:"text-destructive"},xe={class:"grid w-full max-w-sm items-center gap-1.5"},be={key:0,class:"text-destructive"},we={class:"grid w-full max-w-sm items-center gap-1.5"},Ce={key:0,class:"text-destructive"},Ve={class:"grid w-full max-w-sm items-center gap-1.5"},$e={class:"grid gap-1.5 md:grid-cols-2"},Se={class:"grid gap-1.5"},Ue={class:"grid gap-1.5"},De={key:0,class:"text-destructive"},Me={key:1,class:"text-destructive"},Ke={class:"grid w-full max-w-sm items-center gap-1.5"},Pe={class:"flex items-center gap-2"},Ee={class:"flex-1"},Le={class:"flex-1"},ze={class:"grid w-full max-w-sm items-center gap-1.5"},Oe={class:"flex items-center space-x-2"},Te={key:0,class:"text-destructive"},lt=z({layout:ue,__name:"Index",props:{products:{},statuses:{},options:{}},setup($){const S=$,{formatDateTime:b}=se(),w=O(),c=k(()=>{var l;return((l=w.props.tenant)==null?void 0:l.id)||""}),x=k(()=>route().params),C=K({search:x.value.search,entries:x.value.entries||"10"}),B={placeholder:"Search name..."},N=[{title:"Dashboard",href:route("dashboard",{tenant:c.value})},{title:"Products",href:route("products.index",{tenant:c.value})}],A=l=>{R.visit(route("products.index",{...le(l),tenant:c.value}))},H={description:!1},I=[{accessorKey:"actions",header:()=>i("div",null,"Actions"),cell:({row:l})=>{const e=l.original;return i("div",{class:"flex items-center gap-2"},[i(X,{asChild:!0,href:route("products.boms.index",{tenant:c.value,product:e.id})},()=>i(g,{class:"h-auto size-6 cursor-pointer rounded-full"},()=>i(ce,{class:"size-3"}))),i(g,{class:"h-auto size-6 cursor-pointer rounded-full",onClick:()=>U("update",e)},()=>i(Z,{class:"size-3"})),i(g,{class:"h-auto size-6 cursor-pointer rounded-full",variant:"destructive",onClick:()=>U("destroy",e)},()=>i(ae,{class:"size-3"}))])}},{accessorKey:"name",header:()=>i("div",null,"Name"),cell:({row:l})=>i("div",null,l.getValue("name"))},{accessorKey:"code",header:()=>i("div",null,"Code"),cell:({row:l})=>i("div",null,l.getValue("code"))},{accessorKey:"description",header:()=>i("div",null,"Description"),cell:({row:l})=>i("div",null,l.getValue("description"))},{accessorKey:"shelf_life_duration",header:()=>i("div",null,"Shelf Life Duration"),cell:({row:l})=>i("div",null,l.getValue("shelf_life_duration"))},{accessorKey:"shelf_life_type",header:()=>i("div",null,"Shelf Life Type"),cell:({row:l})=>{const e=l.original.shelf_life_type_display||"";return i("div",null,e)}},{accessorKey:"is_active",header:()=>i("div",null,"Active"),cell:({row:l})=>{const{is_active:e,is_active_display:r}=l.original;return i(re,{variant:e?"default":"destructive"},()=>r)}},{accessorKey:"created_at",header:()=>i("div",null,"Created At"),cell:({row:l})=>{const e=b(l.original.created_at);return e?i("div",null,e):i("div",null)}},{accessorKey:"updated_at",header:()=>i("div",null,"Updated At"),cell:({row:l})=>{const e=b(l.original.updated_at);return e?i("div",null,e):i("div",null)}}],a=K({type:null,title:"",isOpen:!1,data:null}),s=J(a.type||"",{name:"",code:"",description:"",shelf_life_duration:"",shelf_life_type:"",prices:[{currency:"",value:""}],is_active:!0}),j=k(()=>{var l;return(l=S.statuses.find(e=>s.is_active?e.value:!e.value))==null?void 0:l.name}),F=k(()=>a.type==="store"?"Create":a.type==="update"?"Update":"Delete"),q=k(()=>a.type==="destroy"?"destructive":"default"),U=(l,e)=>{var r,f;switch(l){case"store":a.title="Create Product";break;case"update":e&&(a.data=e,s.name=e.name,s.code=e.code,s.description=e.description||"",s.shelf_life_duration=e.shelf_life_duration?+e.shelf_life_duration:"",s.shelf_life_type=e.shelf_life_type||"",s.prices=e.prices.map(_=>({currency:_.currency,value:+_.price})),s.is_active=e.is_active),a.title=`Edit ${((r=a.data)==null?void 0:r.name)||"Product"}`;break;case"destroy":e&&(a.data=e),a.title=`Delete ${((f=a.data)==null?void 0:f.name)||"Product"}`}a.type=l,a.isOpen=!0},W=()=>{var l,e;if(a.type){const r=a.type==="store"?route("products.store",{tenant:c.value}):a.type==="update"?route("products.update",{tenant:c.value,product:((l=a.data)==null?void 0:l.id)||""}):route("products.destroy",{tenant:c.value,product:((e=a.data)==null?void 0:e.id)||""}),f=a.type==="store"?"post":a.type==="update"?"put":"delete";s.transform(_=>a.type!=="destroy"?_:{}).submit(f,r,{onSuccess:()=>{s.reset(),a.isOpen=!1}})}},G=l=>{l?s.prices=s.prices.filter((e,r)=>l!==r):s.prices=[...s.prices,{currency:"",value:""}]};return P(()=>a.isOpen,l=>{l||(a.data=null,s.clearErrors(),s.reset())}),P([()=>s.name,()=>a.type],([l,e])=>{e==="store"&&(s.code=ie(l))}),(l,e)=>(u(),p(D,null,[o(t(Q),{title:"Products"}),o(de,{breadcrumbs:N},{default:d(()=>[n("div",ve,[n("div",ye,[n("div",he,[o(t(Y),{open:a.isOpen,"onUpdate:open":e[7]||(e[7]=r=>a.isOpen=r),dialog:a,onSubmit:W},{button:d(()=>[o(t(g),{class:"cursor-pointer",onClick:e[0]||(e[0]=r=>U("store"))},{default:d(()=>e[8]||(e[8]=[m("Create")])),_:1,__:[8]})]),"submit-button":d(()=>[o(t(g),{type:"submit",class:"cursor-pointer",variant:q.value,disabled:t(s).processing},{default:d(()=>[m(v(F.value),1)]),_:1},8,["variant","disabled"])]),default:d(()=>[n("div",ge,[o(t(y),null,{default:d(()=>e[9]||(e[9]=[m("Name")])),_:1,__:[9]}),o(t(V),{type:"text",placeholder:"Enter Name","model-value":t(s).name,"onUpdate:modelValue":e[1]||(e[1]=r=>t(s).name=r)},null,8,["model-value"]),t(s).errors.name?(u(),p("p",ke,v(t(s).errors.name),1)):h("",!0)]),n("div",xe,[o(t(y),null,{default:d(()=>e[10]||(e[10]=[m("Code")])),_:1,__:[10]}),o(t(V),{type:"text",placeholder:"Enter Code","model-value":t(s).code,"onUpdate:modelValue":e[2]||(e[2]=r=>t(s).code=r)},null,8,["model-value"]),t(s).errors.code?(u(),p("p",be,v(t(s).errors.code),1)):h("",!0)]),n("div",we,[o(t(y),null,{default:d(()=>e[11]||(e[11]=[m("Description")])),_:1,__:[11]}),o(t(oe),{placeholder:"Enter Description","model-value":t(s).description,"onUpdate:modelValue":e[3]||(e[3]=r=>t(s).description=r)},null,8,["model-value"]),t(s).errors.description?(u(),p("p",Ce,v(t(s).errors.description),1)):h("",!0)]),n("div",Ve,[n("div",$e,[n("div",Se,[o(t(y),null,{default:d(()=>e[12]||(e[12]=[m("Shelf Life Duration")])),_:1,__:[12]}),o(t(V),{type:"number",placeholder:"Enter Shelf Life Duration","model-value":t(s).shelf_life_duration,"onUpdate:modelValue":e[4]||(e[4]=r=>t(s).shelf_life_duration=r),"model-valueModifiers":{number:!0},min:"0.01",step:".01",class:"w-full"},null,8,["model-value"])]),n("div",Ue,[o(t(y),null,{default:d(()=>e[13]||(e[13]=[m("Shelf Life Type")])),_:1,__:[13]}),o(t(L),{options:l.options.shelf_life_types,placeholder:"Select Shelf Life Type","model-value":t(s).shelf_life_type,"onUpdate:modelValue":e[5]||(e[5]=r=>t(s).shelf_life_type=r),"trigger-class":"w-full"},null,8,["options","model-value"])])]),t(s).errors.shelf_life_duration?(u(),p("p",De,v(t(s).errors.shelf_life_duration),1)):h("",!0),t(s).errors.shelf_life_type?(u(),p("p",Me,v(t(s).errors.shelf_life_type),1)):h("",!0)]),n("div",Ke,[o(t(y),null,{default:d(()=>e[14]||(e[14]=[m("Unit price")])),_:1,__:[14]}),(u(!0),p(D,null,T(t(s).prices,(r,f)=>(u(),p("div",{key:f},[n("div",Pe,[n("div",Ee,[o(t(L),{options:l.options.currencies,placeholder:"Select Currency","model-value":r.currency,"onUpdate:modelValue":_=>r.currency=_,"trigger-class":"w-full"},null,8,["options","model-value","onUpdate:modelValue"])]),n("div",Le,[o(t(V),{type:"number",step:".01",min:"0",placeholder:"Enter Unit Price","model-value":r.value,"onUpdate:modelValue":_=>r.value=_,"model-valueModifiers":{number:!0},class:"w-full"},null,8,["model-value","onUpdate:modelValue"])]),n("div",null,[o(t(g),{type:"button",size:"icon",class:"cursor-pointer",variant:f?"destructive":"default",onClick:_=>G(f)},{default:d(()=>[f?(u(),E(t(pe),{key:1})):(u(),E(t(fe),{key:0}))]),_:2},1032,["variant","onClick"])])]),o(t(_e),{"error-key":`prices.${f}`},null,8,["error-key"])]))),128))]),n("div",ze,[o(t(y),{class:"mb-1"},{default:d(()=>e[15]||(e[15]=[m("Status")])),_:1,__:[15]}),n("div",Oe,[o(t(ne),{class:"cursor-pointer","model-value":t(s).is_active,"onUpdate:modelValue":e[6]||(e[6]=r=>t(s).is_active=r)},null,8,["model-value"]),o(t(y),null,{default:d(()=>[m(v(j.value),1)]),_:1})]),t(s).errors.is_active?(u(),p("p",Te,v(t(s).errors.is_active),1)):h("",!0)])]),_:1},8,["open","dialog"])]),n("div",null,[o(t(ee),{columns:I,"paginate-data":l.products,"column-visibility":H,filter:C,"entry-options":t(te),"search-config":B,onFilterChange:A},null,8,["paginate-data","filter","entry-options"])])])])]),_:1})],64))}});export{lt as default};
