import{d as E,z as I,c,x as N,r as w,f,a as v,o as _,e as i,u as t,g as P,w as m,b as n,h as q,n as V,F as C,s as D}from"./app-D7AVAIhk.js";import{L}from"./index-D8VmvGY_.js";import{_ as g,a as F}from"./FormInput.vue_vue_type_script_setup_true_lang-B9U5b3Iw.js";import{_ as S}from"./Label.vue_vue_type_script_setup_true_lang-BDtNivf6.js";import{_ as j}from"./FormSwitch.vue_vue_type_script_setup_true_lang-CiRwrchL.js";import{_ as z}from"./FormTextarea.vue_vue_type_script_setup_true_lang-BtZuudch.js";import{_ as O}from"./index-ObBAPkBY.js";import{u as R,_ as G,P as H}from"./MaterialSelect.vue_vue_type_script_setup_true_lang-D_1NCZWQ.js";import{u as J,_ as K}from"./AppLayout.vue_vue_type_script_setup_true_lang-D8q9Y8Ug.js";import{_ as Q}from"./AppMainLayout.vue_vue_type_script_setup_true_lang-DYsD14NS.js";import{s as W}from"./slug-xwoAxeGq.js";import"./useForwardExpose-_ZfyhJ9w.js";import"./RovingFocusGroup-DZVzFqmi.js";import"./useFormControl-BL3wKghq.js";import"./VisuallyHiddenInput-BnotZ_Kf.js";import"./FormSelect.vue_vue_type_script_setup_true_lang-7CDC7IuW.js";import"./Select.vue_vue_type_script_setup_true_lang-C_dB8_yC.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-M0fp3WkH.js";import"./check-Cwx-Sazi.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CbIED4YH.js";const X={class:"space-y-3"},Y={class:"space-y-3"},Z={class:"space-y-3"},ee={class:"flex items-center justify-center"},ge=E({layout:Q,__name:"Create",props:{product:{},materials:{},options:{}},setup(k){const u=k,{tenant:a}=J(),{uuid:y}=R(),$=[{title:"Dashboard",href:route("dashboard",{tenant:(a==null?void 0:a.id)||""})},{title:"Products",href:route("products.index",{tenant:(a==null?void 0:a.id)||""})},{title:u.product.name,href:"#"},{title:"Boms",href:route("products.boms.index",{tenant:(a==null?void 0:a.id)||"",product:u.product.id})},{title:"Create",href:route("products.boms.create",{tenant:(a==null?void 0:a.id)||"",product:u.product.id})}],b={data:null,quantity:"",unit_type:""},l=I([{...b,key:y()}]),x=c(()=>{var s;return((s=u.options.statuses.find(e=>e.is_default))==null?void 0:s.value)??"ACTIVE"}),U=c(()=>{var s;return((s=u.options.statuses.find(e=>e.value===o.status))==null?void 0:s.name)??"Active"}),A=c(()=>u.materials.map(s=>({name:s.name,value:s}))),o=N({name:"",code:"",description:"",materials:[],status:x.value}),p=w({status:o.status==="ACTIVE"}),M=()=>{l.value=[...l.value,{...b,key:y()}]},T=s=>{l.value=l.value.filter(e=>e.key!==s)},h=()=>o.post(route("products.boms.store",{tenant:(a==null?void 0:a.id)||"",product:u.product.id}));return f(l,s=>{o.materials=s.map(e=>{var r;return{key:e.key,id:((r=e.data)==null?void 0:r.id)||"",quantity:e.quantity,unit_type:e.unit_type}})},{immediate:!0,deep:!0}),f(()=>o.name,s=>{o.code=W(s)}),f(()=>p.status,s=>{var r;const e=(r=u.options.statuses.find(d=>s?d.value==="ACTIVE":d.value==="INACTIVE"))==null?void 0:r.value;e!==void 0&&(o.status=e)}),(s,e)=>(_(),v(C,null,[i(t(P),{title:"Create Product Bom"}),i(K,{breadcrumbs:$},{default:m(()=>[i(t(L),null,{default:m(()=>[n("div",X,[n("form",{onSubmit:q(h,["prevent"]),class:"space-y-4"},[i(t(g),{label:"Name",error:t(o).errors.name,"model-value":t(o).name,"onUpdate:modelValue":e[0]||(e[0]=r=>t(o).name=r)},null,8,["error","model-value"]),i(t(g),{label:"Code",error:t(o).errors.code,"model-value":t(o).code,"onUpdate:modelValue":e[1]||(e[1]=r=>t(o).code=r)},null,8,["error","model-value"]),i(t(z),{label:"Description",error:t(o).errors.description,"model-value":t(o).description,"onUpdate:modelValue":e[2]||(e[2]=r=>t(o).description=r)},null,8,["error","model-value"]),n("div",Y,[n("div",null,[i(t(S),{class:"mb-1"},{default:m(()=>e[4]||(e[4]=[V("Materials:")])),_:1,__:[4]})]),n("div",Z,[(_(!0),v(C,null,D(l.value,(r,d)=>(_(),v("div",{key:r.key,class:"space-y-1"},[i(t(G),{"material-options":A.value,"unit-type-options":s.options.unit_types,"total-selected":l.value.length,"model-value":l.value[d],"onUpdate:modelValue":B=>l.value[d]=B,"curr-index":d,onRemove:T},null,8,["material-options","unit-type-options","total-selected","model-value","onUpdate:modelValue","curr-index"])]))),128))]),n("div",ee,[i(t(O),{type:"button",class:"cursor-pointer",variant:"outline",onClick:M},{default:m(()=>[i(t(H)),e[5]||(e[5]=V(" Add Material"))]),_:1,__:[5]})])]),i(t(j),{label:U.value,error:t(o).errors.status,"model-value":p.status,"onUpdate:modelValue":e[3]||(e[3]=r=>p.status=r)},null,8,["label","error","model-value"]),i(t(F),{type:"submit",disabled:t(o).processing,loading:t(o).processing},null,8,["disabled","loading"])],32)])]),_:1})]),_:1})],64))}});export{ge as default};
