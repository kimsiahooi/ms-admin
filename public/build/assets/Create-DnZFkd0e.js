import{d as B,r as N,c as p,x as q,k as y,a as c,o as f,e as l,u as e,g as L,w as n,b as d,f as P,q as b,F as k,v as D}from"./app-a7hUe1k2.js";import{L as T}from"./index-D_8GYqd1.js";import{_ as g,a as A}from"./FormInput.vue_vue_type_script_setup_true_lang-Be6wvqRC.js";import{_ as E}from"./Label.vue_vue_type_script_setup_true_lang-CoVgtdNw.js";import{_ as F}from"./FormSwitch.vue_vue_type_script_setup_true_lang-Ngfo_0Ar.js";import{_ as I}from"./FormTextarea.vue_vue_type_script_setup_true_lang-B0a1PBsJ.js";import{_ as j}from"./index-Ba1IaxK7.js";import{u as O,S as R,a as z,_ as G,P as H}from"./index-D0rubjTq.js";import{u as J,_ as K}from"./AppLayout.vue_vue_type_script_setup_true_lang-CWHhop4g.js";import{_ as Q}from"./AppMainLayout.vue_vue_type_script_setup_true_lang-B5OEuhhA.js";import{s as W}from"./slug-xwoAxeGq.js";import"./useForwardExpose-CMf24qRA.js";import"./Switch.vue_vue_type_script_setup_true_lang-CFxb5mXA.js";import"./RovingFocusGroup-D3VJg7SV.js";import"./useFormControl-Bld6-2ak.js";import"./VisuallyHiddenInput-xtrcVa52.js";import"./FormSelect.vue_vue_type_script_setup_true_lang-7JiwgOK1.js";import"./Select.vue_vue_type_script_setup_true_lang-DrAgaA7n.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-DzYpWIo_.js";import"./check-CVFmgC14.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DDj-hmLo.js";const X={class:"space-y-3"},Y={class:"space-y-3"},Z={class:"space-y-3"},ee={class:"flex items-center justify-center"},Ce=B({layout:Q,__name:"Create",props:{product:{},materials:{},options:{}},setup(V){const u=V,{tenant:a}=J(),{uuid:_}=O(),C=[{title:"Dashboard",href:route("dashboard",{tenant:(a==null?void 0:a.id)||""})},{title:"Products",href:route("products.index",{tenant:(a==null?void 0:a.id)||""})},{title:u.product.name,href:"#"},{title:"Boms",href:route("products.boms.index",{tenant:(a==null?void 0:a.id)||"",product:u.product.id})},{title:"Create",href:route("products.boms.create",{tenant:(a==null?void 0:a.id)||"",product:u.product.id})}],v={data:null,quantity:"",unit_type:""},i=N([{...v,key:_()}]),$=p(()=>{var s;return!!((s=u.options.switch_statuses.find(t=>t.is_default))!=null&&s.value)}),x=p(()=>{var s;return((s=u.options.switch_statuses.find(t=>t.value===o.status))==null?void 0:s.name)??R[z.INACTIVE]}),S=p(()=>u.materials.map(s=>({name:s.name,value:s}))),o=q({name:"",code:"",description:"",materials:[],status:$.value}),U=()=>{i.value=[...i.value,{...v,key:_()}]},h=s=>{i.value=i.value.filter(t=>t.key!==s)},w=()=>o.post(route("products.boms.store",{tenant:(a==null?void 0:a.id)||"",product:u.product.id}),{preserveScroll:!0,preserveState:!0});return y(i,s=>{o.materials=s.map(t=>{var r;return{key:t.key,id:((r=t.data)==null?void 0:r.id)||"",quantity:t.quantity,unit_type:t.unit_type}})},{immediate:!0,deep:!0}),y(()=>o.name,s=>{o.code=W(s)}),(s,t)=>(f(),c(k,null,[l(e(L),{title:"Create Product Bom"}),l(K,{breadcrumbs:C},{default:n(()=>[l(e(T),null,{default:n(()=>[d("div",X,[d("form",{onSubmit:P(w,["prevent"]),class:"space-y-4"},[l(e(g),{label:"Name",error:e(o).errors.name,"model-value":e(o).name,"onUpdate:modelValue":t[0]||(t[0]=r=>e(o).name=r)},null,8,["error","model-value"]),l(e(g),{label:"Code",error:e(o).errors.code,"model-value":e(o).code,"onUpdate:modelValue":t[1]||(t[1]=r=>e(o).code=r)},null,8,["error","model-value"]),l(e(I),{label:"Description",error:e(o).errors.description,"model-value":e(o).description,"onUpdate:modelValue":t[2]||(t[2]=r=>e(o).description=r)},null,8,["error","model-value"]),d("div",Y,[d("div",null,[l(e(E),{class:"mb-1"},{default:n(()=>t[4]||(t[4]=[b("Materials:")])),_:1,__:[4]})]),d("div",Z,[(f(!0),c(k,null,D(i.value,(r,m)=>(f(),c("div",{key:r.key,class:"space-y-1"},[l(e(G),{"material-options":S.value,"unit-type-options":s.options.unit_types,"total-selected":i.value.length,"model-value":i.value[m],"onUpdate:modelValue":M=>i.value[m]=M,"curr-index":m,onRemove:h},null,8,["material-options","unit-type-options","total-selected","model-value","onUpdate:modelValue","curr-index"])]))),128))]),d("div",ee,[l(e(j),{type:"button",class:"cursor-pointer",variant:"outline",onClick:U},{default:n(()=>[l(e(H)),t[5]||(t[5]=b(" Add Material"))]),_:1,__:[5]})])]),l(e(F),{label:x.value,error:e(o).errors.status,"model-value":e(o).status,"onUpdate:modelValue":t[3]||(t[3]=r=>e(o).status=r)},null,8,["label","error","model-value"]),l(e(A),{type:"submit",disabled:e(o).processing,loading:e(o).processing},null,8,["disabled","loading"])],32)])]),_:1})]),_:1})],64))}});export{Ce as default};
