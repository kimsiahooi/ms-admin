import{_ as R,s as X,a as Y,b as Z,c as ee,p as te,P as se,T as le,d as ae}from"./slug-B83Zba4P.js";import{d as P,D as O,E as re,m as K,q as S,o as c,w as n,e as a,u as t,n as ie,a as m,F as D,v as L,h as f,t as v,l as z,c as x,i as b,j as B,x as oe,g as ne,b as u,k as o,W as de}from"./app-CiJCswXF.js";import{a as ue,b as ce,c as pe,d as me,f as fe,g as _e,h as N,_ as ve,e as ye,u as he}from"./options-D5L4PMEs.js";import{a as j,_ as C}from"./index-C-JidwIF.js";import{_ as U}from"./Input.vue_vue_type_script_setup_true_lang-BZpyJobJ.js";import{_ as h}from"./Label.vue_vue_type_script_setup_true_lang-DEuNLUzY.js";import{_ as ge}from"./AppLayout.vue_vue_type_script_setup_true_lang-CAIEcxXc.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-D_B4Wbqy.js";import"./RovingFocusGroup-DFGsKEq2.js";import"./useForwardExpose-5q0_HTMa.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-OzztSTOA.js";import"./check-B4Akf0Vv.js";import"./VisuallyHiddenInput-9Rraxk17.js";import"./index-C_F2cX2L.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-Bhh6RUgg.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=j("MinusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=j("PlusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Ve=P({__name:"MultiSelect",props:O({options:{},placeholder:{},triggerClass:{}},{modelValue:{},modelModifiers:{}}),emits:O(["change"],["update:modelValue"]),setup($,{emit:w}){const g=re($,"modelValue"),V=w;return K(g,d=>{d&&V("change",d)}),(d,k)=>(c(),S(t(fe),{modelValue:g.value,"onUpdate:modelValue":k[0]||(k[0]=y=>g.value=y),multiple:"",disabled:!d.options.length},{default:n(()=>[a(t(ue),{class:ie(["min-w-40",d.triggerClass])},{default:n(()=>[a(t(ce),{placeholder:d.placeholder},null,8,["placeholder"])]),_:1},8,["class"]),a(t(pe),null,{default:n(()=>[a(t(me),null,{default:n(()=>[(c(!0),m(D,null,L(d.options,(y,M)=>(c(),S(t(_e),{key:M,value:y.value},{default:n(()=>[f(v(y.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue","disabled"]))}}),xe={key:0},T=P({__name:"ErrorMessages",props:{errorKey:{}},setup($){const w=$,g=z(),V=x(()=>Object.entries(g.props.errors).filter(([d])=>d.startsWith(w.errorKey)).map(([d,k])=>({key:d,message:k})));return(d,k)=>V.value.length?(c(),m("div",xe,[(c(!0),m(D,null,L(V.value,y=>(c(),m("p",{key:y.key,class:"text-destructive"},v(y.message),1))),128))])):b("",!0)}}),$e={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},we={class:"space-y-3"},Ce={class:"flex flex-wrap items-center justify-end gap-2"},Ue={class:"grid w-full max-w-sm items-center gap-1.5"},Se={key:0,class:"text-destructive"},De={class:"grid w-full max-w-sm items-center gap-1.5"},Me={key:0,class:"text-destructive"},Ee={class:"grid w-full max-w-sm items-center gap-1.5"},Ke={key:0,class:"text-destructive"},Pe={class:"grid w-full max-w-sm items-center gap-1.5"},Le={class:"grid gap-1.5 md:grid-cols-2"},Oe={class:"grid gap-1.5"},Be={class:"grid gap-1.5"},Ne={key:0,class:"text-destructive"},Te={key:1,class:"text-destructive"},ze={class:"grid w-full max-w-sm items-center gap-1.5"},je={class:"flex items-center gap-2"},Ae={class:"flex-1"},Fe={class:"flex-1"},Ie={class:"grid w-full max-w-sm items-center gap-1.5"},He={class:"grid w-full max-w-sm items-center gap-1.5"},We={class:"flex items-center space-x-2"},qe={key:0,class:"text-destructive"},nt=P({layout:R,__name:"Index",props:{products:{},statuses:{},options:{}},setup($){const w=$,{formatDateTime:g}=he(),V=z(),d=x(()=>{var l;return((l=V.props.tenant)==null?void 0:l.id)||""}),k=x(()=>route().params),y=B({search:k.value.search,entries:k.value.entries||"10"}),M={placeholder:"Search name..."},A=[{title:"Dashboard",href:route("dashboard",{tenant:d.value})},{title:"Products",href:route("products.index",{tenant:d.value})}],F=l=>{de.visit(route("products.index",{...te(l),tenant:d.value}))},I={description:!1},H=[{accessorKey:"actions",header:()=>o("div",null,"Actions"),cell:({row:l})=>{const e=l.original;return o("div",{class:"flex items-center gap-2"},[o(C,{class:"h-auto size-6 cursor-pointer rounded-full",onClick:()=>E("update",e)},()=>o(se,{class:"size-3"})),o(C,{class:"h-auto size-6 cursor-pointer rounded-full",variant:"destructive",onClick:()=>E("destroy",e)},()=>o(le,{class:"size-3"}))])}},{accessorKey:"name",header:()=>o("div",null,"Name"),cell:({row:l})=>o("div",null,l.getValue("name"))},{accessorKey:"code",header:()=>o("div",null,"Code"),cell:({row:l})=>o("div",null,l.getValue("code"))},{accessorKey:"description",header:()=>o("div",null,"Description"),cell:({row:l})=>o("div",null,l.getValue("description"))},{accessorKey:"shelf_life_duration",header:()=>o("div",null,"Shelf Life Duration"),cell:({row:l})=>o("div",null,l.getValue("shelf_life_duration"))},{accessorKey:"shelf_life_type",header:()=>o("div",null,"Shelf Life type"),cell:({row:l})=>{const e=l.original.shelf_life_type_display||"";return o("div",null,e)}},{accessorKey:"is_active",header:()=>o("div",null,"Active"),cell:({row:l})=>{const{is_active:e,is_active_display:r}=l.original;return o(ae,{variant:e?"default":"destructive"},()=>r)}},{accessorKey:"created_at",header:()=>o("div",null,"Created At"),cell:({row:l})=>{const e=g(l.original.created_at);return e?o("div",null,e):o("div",null)}},{accessorKey:"updated_at",header:()=>o("div",null,"Updated At"),cell:({row:l})=>{const e=g(l.original.updated_at);return e?o("div",null,e):o("div",null)}}],i=B({type:null,title:"",isOpen:!1,data:null}),s=oe(i.type||"",{name:"",code:"",description:"",shelf_life_duration:"",shelf_life_type:"",prices:[{currency:"",value:""}],is_active:!0,materials:[]}),W=x(()=>{var l;return(l=w.statuses.find(e=>s.is_active?e.value:!e.value))==null?void 0:l.name}),q=x(()=>i.type==="store"?"Create":i.type==="update"?"Update":"Delete"),G=x(()=>i.type==="destroy"?"destructive":"default"),E=(l,e)=>{var r,_;switch(l){case"store":i.title="Create Product";break;case"update":e&&(i.data=e,s.name=e.name,s.code=e.code,s.description=e.description||"",s.shelf_life_duration=e.shelf_life_duration?+e.shelf_life_duration:"",s.shelf_life_type=e.shelf_life_type||"",s.prices=e.prices.map(p=>({currency:p.currency,value:+p.price})),s.is_active=e.is_active,s.materials=e.materials.filter(p=>p.is_active).map(p=>p.id)),i.title=`Edit ${((r=i.data)==null?void 0:r.name)||"Product"}`;break;case"destroy":e&&(i.data=e),i.title=`Delete ${((_=i.data)==null?void 0:_.name)||"Product"}`}i.type=l,i.isOpen=!0},J=()=>{var l,e;if(i.type){const r=i.type==="store"?route("products.store",{tenant:d.value}):i.type==="update"?route("products.update",{tenant:d.value,product:((l=i.data)==null?void 0:l.id)||""}):route("products.destroy",{tenant:d.value,product:((e=i.data)==null?void 0:e.id)||""}),_=i.type==="store"?"post":i.type==="update"?"put":"delete";s.transform(p=>i.type!=="destroy"?p:{}).submit(_,r,{onSuccess:()=>{s.reset(),i.isOpen=!1}})}},Q=l=>{l?s.prices=s.prices.filter((e,r)=>l!==r):s.prices=[...s.prices,{currency:"",value:""}]};return K(()=>i.isOpen,l=>{l||(i.data=null,s.clearErrors(),s.reset())}),K([()=>s.name,()=>i.type],([l,e])=>{e==="store"&&(s.code=X(l))}),(l,e)=>(c(),m(D,null,[a(t(ne),{title:"Products"}),a(ge,{breadcrumbs:A},{default:n(()=>[u("div",$e,[u("div",we,[u("div",Ce,[a(t(Y),{open:i.isOpen,"onUpdate:open":e[8]||(e[8]=r=>i.isOpen=r),dialog:i,onSubmit:J},{button:n(()=>[a(t(C),{class:"cursor-pointer",onClick:e[0]||(e[0]=r=>E("store"))},{default:n(()=>e[9]||(e[9]=[f("Create")])),_:1,__:[9]})]),"submit-button":n(()=>[a(t(C),{type:"submit",class:"cursor-pointer",variant:G.value,disabled:t(s).processing},{default:n(()=>[f(v(q.value),1)]),_:1},8,["variant","disabled"])]),default:n(()=>[u("div",Ue,[a(t(h),null,{default:n(()=>e[10]||(e[10]=[f("Name")])),_:1,__:[10]}),a(t(U),{type:"text",placeholder:"Enter Name","model-value":t(s).name,"onUpdate:modelValue":e[1]||(e[1]=r=>t(s).name=r)},null,8,["model-value"]),t(s).errors.name?(c(),m("p",Se,v(t(s).errors.name),1)):b("",!0)]),u("div",De,[a(t(h),null,{default:n(()=>e[11]||(e[11]=[f("Code")])),_:1,__:[11]}),a(t(U),{type:"text",placeholder:"Enter Code","model-value":t(s).code,"onUpdate:modelValue":e[2]||(e[2]=r=>t(s).code=r)},null,8,["model-value"]),t(s).errors.code?(c(),m("p",Me,v(t(s).errors.code),1)):b("",!0)]),u("div",Ee,[a(t(h),null,{default:n(()=>e[12]||(e[12]=[f("Description")])),_:1,__:[12]}),a(t(Z),{placeholder:"Enter Description","model-value":t(s).description,"onUpdate:modelValue":e[3]||(e[3]=r=>t(s).description=r)},null,8,["model-value"]),t(s).errors.description?(c(),m("p",Ke,v(t(s).errors.description),1)):b("",!0)]),u("div",Pe,[u("div",Le,[u("div",Oe,[a(t(h),null,{default:n(()=>e[13]||(e[13]=[f("Shelf Life Duration")])),_:1,__:[13]}),a(t(U),{type:"number",placeholder:"Enter Shelf Life Duration","model-value":t(s).shelf_life_duration,"onUpdate:modelValue":e[4]||(e[4]=r=>t(s).shelf_life_duration=r),"model-valueModifiers":{number:!0},min:"0.01",step:".01",class:"w-full"},null,8,["model-value"])]),u("div",Be,[a(t(h),null,{default:n(()=>e[14]||(e[14]=[f("Shelf Life Type")])),_:1,__:[14]}),a(t(N),{options:l.options.shelf_life_types,placeholder:"Select Shelf Life Type","model-value":t(s).shelf_life_type,"onUpdate:modelValue":e[5]||(e[5]=r=>t(s).shelf_life_type=r),"trigger-class":"w-full"},null,8,["options","model-value"])])]),t(s).errors.shelf_life_duration?(c(),m("p",Ne,v(t(s).errors.shelf_life_duration),1)):b("",!0),t(s).errors.shelf_life_type?(c(),m("p",Te,v(t(s).errors.shelf_life_type),1)):b("",!0)]),u("div",ze,[a(t(h),null,{default:n(()=>e[15]||(e[15]=[f("Unit price")])),_:1,__:[15]}),(c(!0),m(D,null,L(t(s).prices,(r,_)=>(c(),m("div",{key:_},[u("div",je,[u("div",Ae,[a(t(N),{options:l.options.currencies,placeholder:"Select Currency","model-value":r.currency,"onUpdate:modelValue":p=>r.currency=p,"trigger-class":"w-full"},null,8,["options","model-value","onUpdate:modelValue"])]),u("div",Fe,[a(t(U),{type:"number",step:".01",min:"0",placeholder:"Enter Unit Price","model-value":r.value,"onUpdate:modelValue":p=>r.value=p,"model-valueModifiers":{number:!0},class:"w-full"},null,8,["model-value","onUpdate:modelValue"])]),u("div",null,[a(t(C),{type:"button",size:"icon",class:"cursor-pointer",variant:_?"destructive":"default",onClick:p=>Q(_)},{default:n(()=>[_?(c(),S(t(ke),{key:1})):(c(),S(t(be),{key:0}))]),_:2},1032,["variant","onClick"])])]),a(t(T),{"error-key":`prices.${_}`},null,8,["error-key"])]))),128))]),u("div",Ie,[a(t(h),null,{default:n(()=>e[16]||(e[16]=[f("Materials")])),_:1,__:[16]}),a(t(Ve),{options:l.options.materials,placeholder:"Select Materials","model-value":t(s).materials,"onUpdate:modelValue":e[6]||(e[6]=r=>t(s).materials=r),"trigger-class":"w-full"},null,8,["options","model-value"]),a(t(T),{"error-key":"materials"})]),u("div",He,[a(t(h),{class:"mb-1"},{default:n(()=>e[17]||(e[17]=[f("Status")])),_:1,__:[17]}),u("div",We,[a(t(ee),{class:"cursor-pointer","model-value":t(s).is_active,"onUpdate:modelValue":e[7]||(e[7]=r=>t(s).is_active=r)},null,8,["model-value"]),a(t(h),null,{default:n(()=>[f(v(W.value),1)]),_:1})]),t(s).errors.is_active?(c(),m("p",qe,v(t(s).errors.is_active),1)):b("",!0)])]),_:1},8,["open","dialog"])]),u("div",null,[a(t(ve),{columns:H,"paginate-data":l.products,"column-visibility":I,filter:y,"entry-options":t(ye),"search-config":M,onFilterChange:F},null,8,["paginate-data","filter","entry-options"])])])])]),_:1})],64))}});export{nt as default};
