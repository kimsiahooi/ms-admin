import{d as z,c as h,j as b,x as M,m as $,a as m,o as c,e as o,u as s,g as F,w as d,b as n,f as P,i as p,h as u,t as f,q as j,k as l,F as L,W,S as q}from"./app-KSbgUuIU.js";import{p as A,_ as k,P as H,a as G,T as J,b as Q}from"./pickBy-OLrpSmxv.js";import{_ as R}from"./Dialog.vue_vue_type_script_setup_true_lang-GgexZgWT.js";import{_ as X}from"./Select.vue_vue_type_script_setup_true_lang-BILVJfgr.js";import{_ as Y,e as Z}from"./options-CxoPM4-n.js";import{_ as v}from"./index-CYBbWwLu.js";import{_ as S}from"./Input.vue_vue_type_script_setup_true_lang-B4lqTRAY.js";import{_}from"./Label.vue_vue_type_script_setup_true_lang-BQ1of87h.js";import{_ as ee,L as se}from"./Switch.vue_vue_type_script_setup_true_lang-m9ul1BKW.js";import{_ as te}from"./Textarea.vue_vue_type_script_setup_true_lang-ybfpBnld.js";import{u as ae,_ as le}from"./AppLayout.vue_vue_type_script_setup_true_lang-AZ2PnkQR.js";import{_ as ie}from"./AppMainLayout.vue_vue_type_script_setup_true_lang-CmtaUbgQ.js";import{s as oe}from"./slug-xwoAxeGq.js";import"./DialogTrigger.vue_vue_type_script_setup_true_lang-1WHSHCLR.js";import"./RovingFocusGroup-CJwQLeDY.js";import"./useForwardExpose-BCGP6J9B.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-B0BTTmgX.js";import"./check-DTeDlD4X.js";import"./useFormControl-AaFHe1Yj.js";import"./VisuallyHiddenInput-CPNnyZE-.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CRRCczxj.js";import"./index-T6uICwUp.js";const re={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},ne={class:"space-y-3"},de={class:"flex flex-wrap items-center justify-end gap-2"},ue={class:"grid w-full max-w-sm items-center gap-1.5"},ce={key:0,class:"text-destructive"},me={class:"grid w-full max-w-sm items-center gap-1.5"},pe={key:0,class:"text-destructive"},fe={class:"grid w-full max-w-sm items-center gap-1.5"},_e={key:0,class:"text-destructive"},ve={class:"grid w-full max-w-sm items-center gap-1.5"},ge={key:0,class:"text-destructive"},ye={class:"grid w-full max-w-sm items-center gap-1.5"},xe={class:"flex items-center space-x-2"},he={key:0,class:"text-destructive"},be={class:"flex gap-2"},qe=z({layout:ie,__name:"Index",props:{materials:{},options:{}},setup(U){const g=U,{tenant:i}=ae(),w=h(()=>route().params),D=b({search:w.value.search,entries:w.value.entries||"10"}),y=b({create:{dialogIsOpen:!1}}),K={placeholder:"Search name..."},N=[{title:"Dashboard",href:route("dashboard",{tenant:(i==null?void 0:i.id)||""})},{title:"Materials",href:route("materials.index",{tenant:(i==null?void 0:i.id)||""})}],T=t=>{W.visit(route("materials.index",{...A(t),tenant:(i==null?void 0:i.id)||""}))},I={id:!1,description:!1},B=[{accessorKey:"actions",header:()=>l("div",null,"Actions"),cell:({row:t})=>{const e=t.original;return l("div",{class:"flex items-center gap-2"},[l(k,{text:"Edit"},()=>l(q,{href:route("materials.edit",{tenant:(i==null?void 0:i.id)||"",material:e.id}),asChild:!0},()=>l(v,{class:"h-auto size-6 cursor-pointer rounded-full"},()=>l(H,{class:"size-3"})))),l(G,{title:`Delete ${e.name}`,route:route("materials.destroy",{tenant:(i==null?void 0:i.id)||"",material:e.id}),asChild:!1},()=>l(k,{text:"Delete"},()=>l(v,{class:"h-auto size-6 cursor-pointer rounded-full",variant:"destructive"},()=>l(J,{class:"size-3"}))))])}},{accessorKey:"status",header:()=>l("div",null,"Status"),cell:({row:t})=>{const{status:e,status_label:r}=t.original;return l(Q,{variant:e?"default":"destructive"},()=>r)}},{accessorKey:"id",header:()=>l("div",null,"Id"),cell:({row:t})=>l("div",null,t.getValue("id"))},{accessorKey:"name",header:()=>l("div",null,"Name"),cell:({row:t})=>l("div",null,t.getValue("name"))},{accessorKey:"code",header:()=>l("div",null,"Code"),cell:({row:t})=>l("div",null,t.getValue("code"))},{accessorKey:"description",header:()=>l("div",null,"Description"),cell:({row:t})=>l("div",null,t.getValue("description"))},{accessorKey:"unit_type",header:()=>l("div",null,"Unit Type"),cell:({row:t})=>l("div",null,t.original.unit_type_label||"")}],C=h(()=>{var t;return(t=g.options.statuses.find(e=>e.is_default))==null?void 0:t.value}),E=h(()=>{var t;return(t=g.options.statuses.find(e=>a.status?e.value:!e.value))==null?void 0:t.name}),a=M({name:"",code:"",description:"",unit_type:"",status:C.value!==void 0?C.value:1}),x=b({status:!!a.status}),O=()=>a.post(route("materials.store",{tenant:(i==null?void 0:i.id)||""}),{onSuccess:()=>{a.reset(),y.create.dialogIsOpen=!1}});return $(()=>a.name,t=>{a.code=oe(t)}),$(()=>x.status,t=>{var r;const e=(r=g.options.statuses.find(V=>t?V.value===1:V.value===0))==null?void 0:r.value;e!==void 0&&(a.status=e)}),(t,e)=>(c(),m(L,null,[o(s(F),{title:"Materials"}),o(le,{breadcrumbs:N},{default:d(()=>[n("div",re,[n("div",ne,[n("div",de,[o(s(R),{title:"Create Material",open:y.create.dialogIsOpen,"onUpdate:open":e[5]||(e[5]=r=>y.create.dialogIsOpen=r)},{trigger:d(()=>[o(s(v),{class:"cursor-pointer"},{default:d(()=>e[6]||(e[6]=[u("Create")])),_:1,__:[6]})]),default:d(()=>[n("form",{onSubmit:P(O,["prevent"]),class:"space-y-4"},[n("div",ue,[o(s(_),null,{default:d(()=>e[7]||(e[7]=[u("Name")])),_:1,__:[7]}),o(s(S),{type:"text",placeholder:"Enter Name","model-value":s(a).name,"onUpdate:modelValue":e[0]||(e[0]=r=>s(a).name=r)},null,8,["model-value"]),s(a).errors.name?(c(),m("p",ce,f(s(a).errors.name),1)):p("",!0)]),n("div",me,[o(s(_),null,{default:d(()=>e[8]||(e[8]=[u("Code")])),_:1,__:[8]}),o(s(S),{type:"text",placeholder:"Enter Code","model-value":s(a).code,"onUpdate:modelValue":e[1]||(e[1]=r=>s(a).code=r)},null,8,["model-value"]),s(a).errors.code?(c(),m("p",pe,f(s(a).errors.code),1)):p("",!0)]),n("div",fe,[o(s(_),null,{default:d(()=>e[9]||(e[9]=[u("Description")])),_:1,__:[9]}),o(s(te),{placeholder:"Enter Description","model-value":s(a).description,"onUpdate:modelValue":e[2]||(e[2]=r=>s(a).description=r)},null,8,["model-value"]),s(a).errors.description?(c(),m("p",_e,f(s(a).errors.description),1)):p("",!0)]),n("div",ve,[o(s(_),null,{default:d(()=>e[10]||(e[10]=[u("Unit Type")])),_:1,__:[10]}),o(s(X),{options:t.options.unit_types,placeholder:"Select Unit Type","model-value":s(a).unit_type,"onUpdate:modelValue":e[3]||(e[3]=r=>s(a).unit_type=r),"trigger-class":"w-full"},null,8,["options","model-value"]),s(a).errors.unit_type?(c(),m("p",ge,f(s(a).errors.unit_type),1)):p("",!0)]),n("div",ye,[o(s(_),{class:"mb-1"},{default:d(()=>e[11]||(e[11]=[u("Status")])),_:1,__:[11]}),n("div",xe,[o(s(ee),{class:"cursor-pointer","model-value":x.status,"onUpdate:modelValue":e[4]||(e[4]=r=>x.status=r)},null,8,["model-value"]),o(s(_),null,{default:d(()=>[u(f(E.value),1)]),_:1})]),s(a).errors.status?(c(),m("p",he,f(s(a).errors.status),1)):p("",!0)]),n("div",be,[o(s(v),{type:"submit",class:"cursor-pointer",disabled:s(a).processing},{default:d(()=>[s(a).processing?(c(),j(s(se),{key:0,class:"animate-spin"})):p("",!0),e[12]||(e[12]=u(" Create "))]),_:1,__:[12]},8,["disabled"])])],32)]),_:1},8,["open"])]),n("div",null,[o(s(Y),{columns:B,"paginate-data":t.materials,"column-visibility":I,filter:D,"entry-options":s(Z),"search-config":K,onFilterChange:T},null,8,["paginate-data","filter","entry-options"])])])])]),_:1})],64))}});export{qe as default};
