import{s as P,_ as j,a as H,b as L,P as W}from"./slug-DGs0mOwM.js";import{a as I,_ as q,e as G,u as J}from"./options-lkOWf2Jz.js";import{_ as x}from"./index-CN2y45bA.js";import{d as Q,l as R,c as f,j as C,x as X,m as k,a as m,o as _,e as r,u as t,g as Y,w as n,b as d,i as y,h as u,t as c,k as l,F as Z,W as ee}from"./app-DI2IttBw.js";import{_ as te,p as se,T as ae,a as ie}from"./pickBy-DcE04pls.js";import{_ as V}from"./Input.vue_vue_type_script_setup_true_lang-Dybrf51a.js";import{_ as v}from"./Label.vue_vue_type_script_setup_true_lang-BtIdIbWY.js";import{_ as le}from"./AppLayout.vue_vue_type_script_setup_true_lang-BPxJQuXo.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-0zy9MSoJ.js";import"./RovingFocusGroup-OgYyPtmV.js";import"./useForwardExpose-CXFLwHtW.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-BlX7Ts23.js";import"./check-BX9pa6yt.js";import"./VisuallyHiddenInput-Cq3MSDnD.js";import"./index-CPJC4WlL.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-C6qe7wNs.js";const oe={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},re={class:"space-y-3"},ne={class:"flex flex-wrap items-center justify-end gap-2"},de={class:"grid w-full max-w-sm items-center gap-1.5"},ue={key:0,class:"text-destructive"},ce={class:"grid w-full max-w-sm items-center gap-1.5"},pe={key:0,class:"text-destructive"},me={class:"grid w-full max-w-sm items-center gap-1.5"},_e={key:0,class:"text-destructive"},ve={class:"grid w-full max-w-sm items-center gap-1.5"},fe={key:0,class:"text-destructive"},ye={class:"grid w-full max-w-sm items-center gap-1.5"},ge={class:"flex items-center space-x-2"},xe={key:0,class:"text-destructive"},Me=Q({layout:te,__name:"Index",props:{materials:{},options:{}},setup($){const D=$,{formatDateTime:b}=J(),U=R(),p=f(()=>{var s;return((s=U.props.tenant)==null?void 0:s.id)||""}),w=f(()=>route().params),T=C({search:w.value.search,entries:w.value.entries||"10"}),K={placeholder:"Search name..."},N=[{title:"Dashboard",href:route("dashboard",{tenant:p.value})},{title:"Materials",href:route("materials.index",{tenant:p.value})}],O=s=>{ee.visit(route("materials.index",{...se(s),tenant:p.value}))},B={description:!1},E=[{accessorKey:"actions",header:()=>l("div",null,"Actions"),cell:({row:s})=>{const e=s.original;return l("div",{class:"flex items-center gap-2"},[l(x,{class:"h-auto size-6 cursor-pointer rounded-full",onClick:()=>h("update",e)},()=>l(W,{class:"size-3"})),l(x,{class:"h-auto size-6 cursor-pointer rounded-full",variant:"destructive",onClick:()=>h("destroy",e)},()=>l(ae,{class:"size-3"}))])}},{accessorKey:"name",header:()=>l("div",null,"Name"),cell:({row:s})=>l("div",null,s.getValue("name"))},{accessorKey:"code",header:()=>l("div",null,"Code"),cell:({row:s})=>l("div",null,s.getValue("code"))},{accessorKey:"description",header:()=>l("div",null,"Description"),cell:({row:s})=>l("div",null,s.getValue("description"))},{accessorKey:"unit_type",header:()=>l("div",null,"Unit Type"),cell:({row:s})=>{const e=s.original.unit_type_display||"";return l("div",null,e)}},{accessorKey:"is_active",header:()=>l("div",null,"Active"),cell:({row:s})=>{const{is_active:e,is_active_display:o}=s.original;return l(ie,{variant:e?"default":"destructive"},()=>o)}},{accessorKey:"created_at",header:()=>l("div",null,"Created At"),cell:({row:s})=>{const e=b(s.original.created_at);return e?l("div",null,e):l("div",null)}},{accessorKey:"updated_at",header:()=>l("div",null,"Updated At"),cell:({row:s})=>{const e=b(s.original.updated_at);return e?l("div",null,e):l("div",null)}}],i=C({type:null,title:"",isOpen:!1,data:null}),a=X(i.type||"",{name:"",code:"",description:"",unit_type:"",is_active:!0}),S=f(()=>{var s;return(s=D.options.statuses.find(e=>a.is_active?e.value:!e.value))==null?void 0:s.name}),M=f(()=>i.type==="store"?"Create":i.type==="update"?"Update":"Delete"),z=f(()=>i.type==="destroy"?"destructive":"default"),h=(s,e)=>{var o,g;switch(s){case"store":i.title="Create Material";break;case"update":e&&(i.data=e,a.name=e.name,a.code=e.code,a.description=e.description||"",a.unit_type=e.unit_type,a.is_active=e.is_active),i.title=`Edit ${((o=i.data)==null?void 0:o.name)||"Material"}`;break;case"destroy":e&&(i.data=e),i.title=`Delete ${((g=i.data)==null?void 0:g.name)||"Material"}`}i.type=s,i.isOpen=!0},A=()=>{var s,e;if(i.type){const o=i.type==="store"?route("materials.store",{tenant:p.value}):i.type==="update"?route("materials.update",{tenant:p.value,material:((s=i.data)==null?void 0:s.id)||""}):route("materials.destroy",{tenant:p.value,material:((e=i.data)==null?void 0:e.id)||""}),g=i.type==="store"?"post":i.type==="update"?"put":"delete";a.transform(F=>i.type!=="destroy"?F:{}).submit(g,o,{onSuccess:()=>{a.reset(),i.isOpen=!1}})}};return k(()=>i.isOpen,s=>{s||(i.data=null,a.clearErrors(),a.reset())}),k([()=>a.name,()=>i.type],([s,e])=>{e==="store"&&(a.code=P(s))}),(s,e)=>(_(),m(Z,null,[r(t(Y),{title:"Materials"}),r(le,{breadcrumbs:N},{default:n(()=>[d("div",oe,[d("div",re,[d("div",ne,[r(t(j),{open:i.isOpen,"onUpdate:open":e[6]||(e[6]=o=>i.isOpen=o),dialog:i,onSubmit:A},{button:n(()=>[r(t(x),{class:"cursor-pointer",onClick:e[0]||(e[0]=o=>h("store"))},{default:n(()=>e[7]||(e[7]=[u("Create")])),_:1,__:[7]})]),"submit-button":n(()=>[r(t(x),{type:"submit",class:"cursor-pointer",variant:z.value,disabled:t(a).processing},{default:n(()=>[u(c(M.value),1)]),_:1},8,["variant","disabled"])]),default:n(()=>[d("div",de,[r(t(v),null,{default:n(()=>e[8]||(e[8]=[u("Name")])),_:1,__:[8]}),r(t(V),{type:"text",placeholder:"Enter Name","model-value":t(a).name,"onUpdate:modelValue":e[1]||(e[1]=o=>t(a).name=o)},null,8,["model-value"]),t(a).errors.name?(_(),m("p",ue,c(t(a).errors.name),1)):y("",!0)]),d("div",ce,[r(t(v),null,{default:n(()=>e[9]||(e[9]=[u("Code")])),_:1,__:[9]}),r(t(V),{type:"text",placeholder:"Enter Code","model-value":t(a).code,"onUpdate:modelValue":e[2]||(e[2]=o=>t(a).code=o)},null,8,["model-value"]),t(a).errors.code?(_(),m("p",pe,c(t(a).errors.code),1)):y("",!0)]),d("div",me,[r(t(v),null,{default:n(()=>e[10]||(e[10]=[u("Description")])),_:1,__:[10]}),r(t(H),{placeholder:"Enter Description","model-value":t(a).description,"onUpdate:modelValue":e[3]||(e[3]=o=>t(a).description=o)},null,8,["model-value"]),t(a).errors.description?(_(),m("p",_e,c(t(a).errors.description),1)):y("",!0)]),d("div",ve,[r(t(v),null,{default:n(()=>e[11]||(e[11]=[u("Unit Type")])),_:1,__:[11]}),r(t(I),{options:s.options.unit_types,placeholder:"Select Unit Type","model-value":t(a).unit_type,"onUpdate:modelValue":e[4]||(e[4]=o=>t(a).unit_type=o),"trigger-class":"w-full"},null,8,["options","model-value"]),t(a).errors.unit_type?(_(),m("p",fe,c(t(a).errors.unit_type),1)):y("",!0)]),d("div",ye,[r(t(v),{class:"mb-1"},{default:n(()=>e[12]||(e[12]=[u("Status")])),_:1,__:[12]}),d("div",ge,[r(t(L),{class:"cursor-pointer","model-value":t(a).is_active,"onUpdate:modelValue":e[5]||(e[5]=o=>t(a).is_active=o)},null,8,["model-value"]),r(t(v),null,{default:n(()=>[u(c(S.value),1)]),_:1})]),t(a).errors.is_active?(_(),m("p",xe,c(t(a).errors.is_active),1)):y("",!0)])]),_:1},8,["open","dialog"])]),d("div",null,[r(t(q),{columns:E,"paginate-data":s.materials,"column-visibility":B,filter:T,"entry-options":t(G),"search-config":K,onFilterChange:O},null,8,["paginate-data","filter","entry-options"])])])])]),_:1})],64))}});export{Me as default};
