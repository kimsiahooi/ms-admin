import{_ as G,s as J,a as Q,b as R,c as X,p as Y,P as Z,T as ee,d as te}from"./slug-DuqZszLZ.js";import{d as P,D as M,E as se,m as S,q as O,o as u,w as d,e as r,u as t,n as ae,a as m,F as D,v as z,h as f,t as v,l as L,c as V,i as k,j as B,x as le,g as re,b as c,k as o,W as ie}from"./app-CX331XAf.js";import{a as oe,b as ne,c as de,d as ue,f as ce,g as me,h as pe,_ as fe,e as _e,u as ve}from"./options-OdZFe98X.js";import{_ as C}from"./index-DpEAv25n.js";import{_ as U}from"./Input.vue_vue_type_script_setup_true_lang-DNYSfJr5.js";import{_ as h}from"./Label.vue_vue_type_script_setup_true_lang-3wJ87YSS.js";import{_ as ye}from"./AppLayout.vue_vue_type_script_setup_true_lang-CslzKFgI.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-Bj9R7Orh.js";import"./RovingFocusGroup-CI8bgRjC.js";import"./useForwardExpose-Ds8i9TbT.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-rnLSTa_e.js";import"./check-DOqJMpH7.js";import"./VisuallyHiddenInput-CBQds2l3.js";import"./index-Pw2e-q3J.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DaZQrxdS.js";const ge=P({__name:"MultiSelect",props:M({options:{},placeholder:{},triggerClass:{}},{modelValue:{},modelModifiers:{}}),emits:M(["change"],["update:modelValue"]),setup($,{emit:w}){const y=se($,"modelValue"),x=w;return S(y,n=>{n&&x("change",n)}),(n,g)=>(u(),O(t(ce),{modelValue:y.value,"onUpdate:modelValue":g[0]||(g[0]=_=>y.value=_),multiple:"",disabled:!n.options.length},{default:d(()=>[r(t(oe),{class:ae(["min-w-40",n.triggerClass])},{default:d(()=>[r(t(ne),{placeholder:n.placeholder},null,8,["placeholder"])]),_:1},8,["class"]),r(t(de),null,{default:d(()=>[r(t(ue),null,{default:d(()=>[(u(!0),m(D,null,z(n.options,(_,E)=>(u(),O(t(me),{key:E,value:_.value},{default:d(()=>[f(v(_.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue","disabled"]))}}),he={key:0},N=P({__name:"ErrorMessages",props:{errorKey:{}},setup($){const w=$,y=L(),x=V(()=>Object.entries(y.props.errors).filter(([n])=>n.startsWith(w.errorKey)).map(([n,g])=>({key:n,message:g})));return(n,g)=>x.value.length?(u(),m("div",he,[(u(!0),m(D,null,z(x.value,_=>(u(),m("p",{key:_.key,class:"text-destructive"},v(_.message),1))),128))])):k("",!0)}}),be={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},xe={class:"space-y-3"},Ve={class:"flex flex-wrap items-center justify-end gap-2"},ke={class:"grid w-full max-w-sm items-center gap-1.5"},$e={key:0,class:"text-destructive"},we={class:"grid w-full max-w-sm items-center gap-1.5"},Ce={key:0,class:"text-destructive"},Ue={class:"grid w-full max-w-sm items-center gap-1.5"},De={key:0,class:"text-destructive"},Ee={class:"grid w-full max-w-sm items-center gap-1.5"},Ke={key:0,class:"text-destructive"},Se={class:"grid w-full max-w-sm items-center gap-1.5"},Pe={class:"grid grid-cols-2 gap-2"},ze={class:"grid w-full max-w-sm items-center gap-1.5"},Me={class:"grid w-full max-w-sm items-center gap-1.5"},Oe={class:"flex items-center space-x-2"},Be={key:0,class:"text-destructive"},Ye=P({layout:G,__name:"Index",props:{products:{},statuses:{},options:{}},setup($){const w=$,{formatDateTime:y}=ve(),x=L(),n=V(()=>{var s;return((s=x.props.tenant)==null?void 0:s.id)||""}),g=V(()=>route().params),_=B({search:g.value.search,entries:g.value.entries||"10"}),E={placeholder:"Search name..."},T=[{title:"Dashboard",href:route("dashboard",{tenant:n.value})},{title:"Products",href:route("products.index",{tenant:n.value})}],j=s=>{ie.visit(route("products.index",{...Y(s),tenant:n.value}))},A={description:!1},F=[{accessorKey:"actions",header:()=>o("div",null,"Actions"),cell:({row:s})=>{const e=s.original;return o("div",{class:"flex items-center gap-2"},[o(C,{class:"h-auto size-6 cursor-pointer rounded-full",onClick:()=>K("update",e)},()=>o(Z,{class:"size-3"})),o(C,{class:"h-auto size-6 cursor-pointer rounded-full",variant:"destructive",onClick:()=>K("destroy",e)},()=>o(ee,{class:"size-3"}))])}},{accessorKey:"id",header:()=>o("div",null,"ID"),cell:({row:s})=>{const e=s.original.id;return o("div",null,e)}},{accessorKey:"name",header:()=>o("div",null,"Name"),cell:({row:s})=>o("div",null,s.getValue("name"))},{accessorKey:"code",header:()=>o("div",null,"Code"),cell:({row:s})=>o("div",null,s.getValue("code"))},{accessorKey:"description",header:()=>o("div",null,"Description"),cell:({row:s})=>o("div",null,s.getValue("description"))},{accessorKey:"shelf_life_days",header:()=>o("div",null,"Shelf Life Days"),cell:({row:s})=>o("div",null,s.getValue("shelf_life_days"))},{accessorKey:"is_active",header:()=>o("div",null,"Active"),cell:({row:s})=>{const{is_active:e,is_active_display:i}=s.original;return o(te,{variant:e?"default":"destructive"},()=>i)}},{accessorKey:"created_at",header:()=>o("div",null,"Created At"),cell:({row:s})=>{const e=y(s.original.created_at);return e?o("div",null,e):o("div",null)}},{accessorKey:"updated_at",header:()=>o("div",null,"Updated At"),cell:({row:s})=>{const e=y(s.original.updated_at);return e?o("div",null,e):o("div",null)}}],l=B({type:null,title:"",isOpen:!1,data:null}),a=le(l.type||"",{name:"",code:"",description:"",shelf_life_days:"",prizes:[{id:"",currency:"",value:""}],is_active:!0,materials:[]}),W=V(()=>{var s;return(s=w.statuses.find(e=>a.is_active?e.value:!e.value))==null?void 0:s.name}),H=V(()=>l.type==="store"?"Create":l.type==="update"?"Update":"Delete"),I=V(()=>l.type==="destroy"?"destructive":"default"),K=(s,e)=>{var i,b;switch(s){case"store":l.title="Create Product";break;case"update":e&&(l.data=e,a.name=e.name,a.code=e.code,a.description=e.description||"",a.shelf_life_days=e.shelf_life_days||"",a.prizes=e.prizes.map(p=>({id:p.id,currency:p.currency,value:+p.prize})),a.is_active=e.is_active,a.materials=e.materials.map(p=>p.id)),l.title=`Edit ${((i=l.data)==null?void 0:i.name)||"Product"}`;break;case"destroy":e&&(l.data=e),l.title=`Delete ${((b=l.data)==null?void 0:b.name)||"Product"}`}l.type=s,l.isOpen=!0},q=()=>{var s,e;if(l.type){const i=l.type==="store"?route("products.store",{tenant:n.value}):l.type==="update"?route("products.update",{tenant:n.value,product:((s=l.data)==null?void 0:s.id)||""}):route("products.destroy",{tenant:n.value,product:((e=l.data)==null?void 0:e.id)||""}),b=l.type==="store"?"post":l.type==="update"?"put":"delete";a.transform(p=>l.type!=="destroy"?p:{}).submit(b,i,{onSuccess:()=>{a.reset(),l.isOpen=!1}})}};return S(()=>l.isOpen,s=>{s||(l.data=null,a.clearErrors(),a.reset())}),S([()=>a.name,()=>l.type],([s,e])=>{e==="store"&&(a.code=J(s))}),(s,e)=>(u(),m(D,null,[r(t(re),{title:"Products"}),r(ye,{breadcrumbs:T},{default:d(()=>[c("div",be,[c("div",xe,[c("div",Ve,[r(t(Q),{open:l.isOpen,"onUpdate:open":e[7]||(e[7]=i=>l.isOpen=i),dialog:l,onSubmit:q},{button:d(()=>[r(t(C),{class:"cursor-pointer",onClick:e[0]||(e[0]=i=>K("store"))},{default:d(()=>e[8]||(e[8]=[f("Create")])),_:1,__:[8]})]),"submit-button":d(()=>[r(t(C),{type:"submit",class:"cursor-pointer",variant:I.value,disabled:t(a).processing},{default:d(()=>[f(v(H.value),1)]),_:1},8,["variant","disabled"])]),default:d(()=>[c("div",ke,[r(t(h),null,{default:d(()=>e[9]||(e[9]=[f("Name")])),_:1,__:[9]}),r(t(U),{type:"text",placeholder:"Enter Name","model-value":t(a).name,"onUpdate:modelValue":e[1]||(e[1]=i=>t(a).name=i)},null,8,["model-value"]),t(a).errors.name?(u(),m("p",$e,v(t(a).errors.name),1)):k("",!0)]),c("div",we,[r(t(h),null,{default:d(()=>e[10]||(e[10]=[f("Code")])),_:1,__:[10]}),r(t(U),{type:"text",placeholder:"Enter Code","model-value":t(a).code,"onUpdate:modelValue":e[2]||(e[2]=i=>t(a).code=i)},null,8,["model-value"]),t(a).errors.code?(u(),m("p",Ce,v(t(a).errors.code),1)):k("",!0)]),c("div",Ue,[r(t(h),null,{default:d(()=>e[11]||(e[11]=[f("Description")])),_:1,__:[11]}),r(t(R),{placeholder:"Enter Description","model-value":t(a).description,"onUpdate:modelValue":e[3]||(e[3]=i=>t(a).description=i)},null,8,["model-value"]),t(a).errors.description?(u(),m("p",De,v(t(a).errors.description),1)):k("",!0)]),c("div",Ee,[r(t(h),null,{default:d(()=>e[12]||(e[12]=[f("Shelf Life Day(s)")])),_:1,__:[12]}),r(t(U),{type:"number",placeholder:"Enter Shelf Life Day(s)","model-value":t(a).shelf_life_days,"onUpdate:modelValue":e[4]||(e[4]=i=>t(a).shelf_life_days=i),"model-valueModifiers":{number:!0},min:"1"},null,8,["model-value"]),t(a).errors.shelf_life_days?(u(),m("p",Ke,v(t(a).errors.shelf_life_days),1)):k("",!0)]),c("div",Se,[r(t(h),null,{default:d(()=>e[13]||(e[13]=[f("Unit Prize")])),_:1,__:[13]}),(u(!0),m(D,null,z(t(a).prizes,(i,b)=>(u(),m("div",{key:b},[c("div",Pe,[r(t(pe),{options:s.options.currencies,placeholder:"Select Currency","model-value":i.currency,"onUpdate:modelValue":p=>i.currency=p,"trigger-class":"w-full"},null,8,["options","model-value","onUpdate:modelValue"]),r(t(U),{type:"number",step:".01",min:"0",placeholder:"Enter Unit Prize","model-value":i.value,"onUpdate:modelValue":p=>i.value=p,"model-valueModifiers":{number:!0},class:"w-full"},null,8,["model-value","onUpdate:modelValue"])]),r(t(N),{"error-key":`prizes.${b}`},null,8,["error-key"])]))),128))]),c("div",ze,[r(t(h),null,{default:d(()=>e[14]||(e[14]=[f("Materials")])),_:1,__:[14]}),r(t(ge),{options:s.options.materials,placeholder:"Select Materials","model-value":t(a).materials,"onUpdate:modelValue":e[5]||(e[5]=i=>t(a).materials=i),"trigger-class":"w-full"},null,8,["options","model-value"]),r(t(N),{"error-key":"materials"})]),c("div",Me,[r(t(h),{class:"mb-1"},{default:d(()=>e[15]||(e[15]=[f("Status")])),_:1,__:[15]}),c("div",Oe,[r(t(X),{class:"cursor-pointer","model-value":t(a).is_active,"onUpdate:modelValue":e[6]||(e[6]=i=>t(a).is_active=i)},null,8,["model-value"]),r(t(h),null,{default:d(()=>[f(v(W.value),1)]),_:1})]),t(a).errors.is_active?(u(),m("p",Be,v(t(a).errors.is_active),1)):k("",!0)])]),_:1},8,["open","dialog"])]),c("div",null,[r(t(fe),{columns:F,"paginate-data":s.products,"column-visibility":A,filter:_,"entry-options":t(_e),"search-config":E,onFilterChange:j},null,8,["paginate-data","filter","entry-options"])])])])]),_:1})],64))}});export{Ye as default};
