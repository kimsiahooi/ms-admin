import{d as w,c as p,x as y,r as C,j as K,a as T,o as M,e as i,u as e,g as N,w as u,b as m,W as L,f as O,k as r,l as B,F as A}from"./app-BgTXa90_.js";import{_ as P,a as j,b as E}from"./StatusSwitch.vue_vue_type_script_setup_true_lang-BZcE18FL.js";import{_ as F,a as q,b as R,e as W,p as z,c,P as H,d as G,T as J,u as Q}from"./pickBy-2vWdj-xt.js";import{L as X}from"./index-BvCIcig5.js";import{_ as Y}from"./FormError.vue_vue_type_script_setup_true_lang-BVg2IwEG.js";import{_ as g}from"./FormInput.vue_vue_type_script_setup_true_lang-Bcig7n-I.js";import{_ as Z}from"./FormSwitch.vue_vue_type_script_setup_true_lang-D0NXErWG.js";import{_ as ee}from"./FormTextarea.vue_vue_type_script_setup_true_lang-S96odKLP.js";import{_ as te}from"./Dialog.vue_vue_type_script_setup_true_lang-DeXI2Vk1.js";import{u as ae,_ as se}from"./AppLayout.vue_vue_type_script_setup_true_lang-CdHOQRKV.js";import{_ as re}from"./AppMainLayout.vue_vue_type_script_setup_true_lang-k-gsNc47.js";import{S as le,a as oe}from"./index-BWts5uV5.js";import{s as ie}from"./slug-xwoAxeGq.js";import{c as b}from"./index-gvFlOA9A.js";import"./useForwardExpose-rU1I-y_0.js";import"./Label.vue_vue_type_script_setup_true_lang-DfAzriwx.js";import"./Select.vue_vue_type_script_setup_true_lang-1hEi5SeN.js";import"./RovingFocusGroup-Cq5P6bq-.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-COVDtZ7L.js";import"./check-DnxLo8EA.js";import"./useFormControl-D4E9fVKJ.js";import"./nullish-CHIgUVhi.js";import"./chevron-down-53sWXJgT.js";import"./Switch.vue_vue_type_script_setup_true_lang-C_f7LROW.js";import"./VisuallyHiddenInput-DKmQAXjO.js";import"./Input.vue_vue_type_script_setup_true_lang-CoLfU2BV.js";import"./DialogTrigger.vue_vue_type_script_setup_true_lang-DmsPglon.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-a7lEFZeV.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=b("ListTodoIcon",[["rect",{x:"3",y:"5",width:"6",height:"6",rx:"1",key:"1defrl"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=b("UsersIcon",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),pe={class:"space-y-3"},ue={class:"flex flex-wrap items-center justify-end gap-2"},je=w({layout:re,__name:"Index",props:{departments:{},plant:{},options:{}},setup(x){const n=x,{tenant:t}=ae(),{formatDateTime:_}=Q(),f=p(()=>route().params),d=y({search:f.value.search,entries:f.value.entries||"10",status:f.value.status}),v=C({create:{dialogIsOpen:!1}}),S=p(()=>[{title:"Dashboard",href:route("dashboard",{tenant:(t==null?void 0:t.id)||""})},{title:"Plants",href:route("plants.index",{tenant:(t==null?void 0:t.id)||""})},{title:n.plant.name,href:"#"},{title:"Departments",href:route("plants.departments.index",{tenant:(t==null?void 0:t.id)||"",plant:n.plant.id})}]),h=()=>L.visit(route("plants.departments.index",{...z(d.data()),tenant:(t==null?void 0:t.id)||"",plant:n.plant.id}),{preserveScroll:!0,preserveState:!0}),V=()=>{d.reset(),h()},$=[{accessorKey:"actions",header:()=>r("div",null,"Actions"),cell:({row:s})=>{const a=s.original;return r("div",{class:"flex items-center gap-2"},[r(j,{value:a.status.switch,method:"put",href:route("plants.departments.toggleStatus",{tenant:(t==null?void 0:t.id)||"",plant:n.plant.id,department:a.id})}),r(c,{text:"Edit",href:route("plants.departments.edit",{tenant:(t==null?void 0:t.id)||"",plant:n.plant.id,department:a.id}),icon:H}),r(c,{text:"Users",href:route("plants.departments.users.index",{tenant:(t==null?void 0:t.id)||"",plant:n.plant.id,department:a.id}),icon:de}),r(c,{text:"Operations",href:route("plants.departments.operations.index",{tenant:(t==null?void 0:t.id)||"",plant:n.plant.id,department:a.id}),icon:ne}),r(G,{title:`Delete ${a.name}`,route:route("plants.departments.destroy",{tenant:(t==null?void 0:t.id)||"",plant:n.plant.id,department:a.id}),asChild:!1},()=>r(c,{variant:"destructive",text:"Delete",icon:J}))])}},{accessorKey:"status",header:()=>r("div",null,"Status"),cell:({row:s})=>{const{status:a}=s.original;return r(E,{statusBadge:a.badge})}},{accessorKey:"id",header:()=>r("div",null,"Id"),cell:({row:s})=>r("div",null,s.getValue("id"))},{accessorKey:"name",header:()=>r("div",null,"Name"),cell:({row:s})=>r("div",null,s.getValue("name"))},{accessorKey:"code",header:()=>r("div",null,"Code"),cell:({row:s})=>r("div",null,s.getValue("code"))},{accessorKey:"description",header:()=>r("div",null,"Description"),cell:({row:s})=>r("div",null,s.getValue("description"))},{accessorKey:"created_at",header:()=>r("div",null,"Created At"),cell:({row:s})=>r("div",null,_(s.getValue("created_at"))||"")},{accessorKey:"updated_at",header:()=>r("div",null,"Updated At"),cell:({row:s})=>r("div",null,_(s.getValue("updated_at"))||"")}],k={id:!1,description:!1},D=p(()=>{var s;return!!((s=n.options.switch.statuses.find(a=>a.is_default))!=null&&s.value)}),I=p(()=>{var s;return((s=n.options.switch.statuses.find(a=>a.value===l.status))==null?void 0:s.name)??le[oe.INACTIVE]}),l=y({name:"",code:"",description:"",status:D.value}),U=()=>l.post(route("plants.departments.store",{tenant:(t==null?void 0:t.id)||"",plant:n.plant.id}),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{l.reset(),v.create.dialogIsOpen=!1}});return K(()=>l.name,s=>{l.code=ie(s)}),(s,a)=>(M(),T(A,null,[i(e(N),{title:"Departments"}),i(se,{breadcrumbs:S.value},{default:u(()=>[i(e(X),null,{default:u(()=>[m("div",pe,[i(e(F),{onSearch:h,onReset:V},{default:u(()=>[i(e(q),{label:"Name",placeholder:"Search ID, Name, Code","model-value":e(d).search,"onUpdate:modelValue":a[0]||(a[0]=o=>e(d).search=o)},null,8,["model-value"]),i(e(P),{label:"Status",placeholder:"Select Status",options:s.options.select.statuses,multiple:"","model-value":e(d).status,"onUpdate:modelValue":a[1]||(a[1]=o=>e(d).status=o)},null,8,["options","model-value"])]),_:1}),m("div",ue,[i(e(te),{title:"Create Department",open:v.create.dialogIsOpen,"onUpdate:open":a[6]||(a[6]=o=>v.create.dialogIsOpen=o)},{default:u(()=>[m("form",{onSubmit:O(U,["prevent"]),class:"space-y-4"},[i(e(g),{label:"Name",error:e(l).errors.name,"model-value":e(l).name,"onUpdate:modelValue":a[2]||(a[2]=o=>e(l).name=o)},null,8,["error","model-value"]),i(e(g),{label:"Code",error:e(l).errors.code,"model-value":e(l).code,"onUpdate:modelValue":a[3]||(a[3]=o=>e(l).code=o)},null,8,["error","model-value"]),i(e(ee),{label:"Description",error:e(l).errors.description,"model-value":e(l).description,"onUpdate:modelValue":a[4]||(a[4]=o=>e(l).description=o)},null,8,["error","model-value"]),i(e(Z),{label:I.value,error:e(l).errors.status,"model-value":e(l).status,"onUpdate:modelValue":a[5]||(a[5]=o=>e(l).status=o)},null,8,["label","error","model-value"]),i(e(Y),{type:"submit",disabled:e(l).processing,loading:e(l).processing},null,8,["disabled","loading"])],32)]),_:1},8,["open"])]),m("div",null,[i(e(R),{"model-value":e(d),"onUpdate:modelValue":a[7]||(a[7]=o=>B(d)?d.value=o:null),columns:$,"paginate-data":s.departments,"column-visibility":k,"entry-options":e(W),onSearch:h},null,8,["model-value","paginate-data","entry-options"])])])]),_:1})]),_:1},8,["breadcrumbs"])],64))}});export{je as default};
