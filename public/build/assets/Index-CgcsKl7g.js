import{d as L,c as h,r as g,x as N,f as S,a as q,o as w,e as i,u as t,g as B,w as c,b as m,W as T,h as O,i as o,F as k,S as F}from"./app-Dd_azS9s.js";import{_ as M,a as Q,b as W}from"./ToggleStatus.vue_vue_type_script_setup_true_lang-C4JAnmuw.js";import{_ as j,a as R,b as z,e as G,p as H,c as $,P as J,d as X,T as Y,u as Z}from"./pickBy-BZ5ZFQC0.js";import{_ as ee}from"./index-CnzE4Cxn.js";import{L as te}from"./index-ioJhywiv.js";import{_ as n,a as le}from"./FormInput.vue_vue_type_script_setup_true_lang-CyRZt5ak.js";import{_ as f}from"./FormSelect.vue_vue_type_script_setup_true_lang-M36Hzn0P.js";import{_ as se}from"./FormSwitch.vue_vue_type_script_setup_true_lang-DbWy2Hy2.js";import{_ as oe}from"./FormTextarea.vue_vue_type_script_setup_true_lang-B0bVJa16.js";import{_ as ae}from"./Dialog.vue_vue_type_script_setup_true_lang-C8rqN1fP.js";import{u as re,_ as ie}from"./AppLayout.vue_vue_type_script_setup_true_lang-CL5r01aQ.js";import{_ as de}from"./AppMainLayout.vue_vue_type_script_setup_true_lang-6B7ILG5j.js";import{a as p,S as ue}from"./index-DCAYh28I.js";import{s as ne}from"./slug-xwoAxeGq.js";import"./useForwardExpose-CA8Wv_kq.js";import"./Label.vue_vue_type_script_setup_true_lang-Cw5cT_5W.js";import"./Select.vue_vue_type_script_setup_true_lang-DK09Jnt5.js";import"./RovingFocusGroup-DACwyRCN.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-CFR9-7Cq.js";import"./check-BIl2Szvz.js";import"./useFormControl-ciUBBPp3.js";import"./Switch.vue_vue_type_script_setup_true_lang-CWF0wi2G.js";import"./VisuallyHiddenInput-YkK2DoEj.js";import"./CardTitle.vue_vue_type_script_setup_true_lang-8blD22rC.js";import"./DialogTrigger.vue_vue_type_script_setup_true_lang-Xup29WH7.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DlHdn8C4.js";const pe={class:"space-y-3"},ce={class:"flex flex-wrap items-center justify-end gap-2"},Oe=L({layout:de,__name:"Index",props:{product:{},presets:{},options:{}},setup(U){const d=U,{tenant:r}=re(),{formatDateTime:b}=Z(),y=h(()=>route().params),u=g({search:y.value.search,entries:y.value.entries||"10",status:y.value.status}),v=g({create:{dialogIsOpen:!1}}),K=[{title:"Dashboard",href:route("dashboard",{tenant:(r==null?void 0:r.id)||""})},{title:"Products",href:route("products.index",{tenant:(r==null?void 0:r.id)||""})},{title:d.product.name,href:"#"},{title:"Presets",href:route("products.presets.index",{tenant:(r==null?void 0:r.id)||"",product:d.product.id})}],V=()=>T.visit(route("products.presets.index",{...H(u),tenant:(r==null?void 0:r.id)||"",product:d.product.id})),I=()=>T.visit(route("products.presets.index",{tenant:(r==null?void 0:r.id)||"",product:d.product.id})),D={id:!1,description:!1},x=[{accessorKey:"actions",header:()=>o("div",null,"Actions"),cell:({row:l})=>{const e=l.original;return o("div",{class:"flex items-center gap-2"},[o(Q,{value:e.status_switch,method:"put",href:route("products.presets.toggleStatus",{tenant:(r==null?void 0:r.id)||"",product:d.product.id,preset:e.id})}),o($,{text:"Edit",href:route("products.presets.edit",{tenant:(r==null?void 0:r.id)||"",product:d.product.id,preset:e.id}),icon:J}),o(X,{title:`Delete ${e.name}`,route:route("products.presets.destroy",{tenant:(r==null?void 0:r.id)||"",product:d.product.id,preset:e.id}),asChild:!1},()=>o($,{variant:"destructive",text:"Delete",icon:Y}))])}},{accessorKey:"status",header:()=>o("div",null,"Status"),cell:({row:l})=>{const{status_badge:e}=l.original;return o(W,{statusBadge:e})}},{accessorKey:"id",header:()=>o("div",null,"Id"),cell:({row:l})=>o("div",null,l.getValue("id"))},{accessorKey:"machine",header:()=>o("div",null,"Machine"),cell:({row:l})=>{const{machine:e}=l.original;return e?o(F,{href:route("machines.index",{tenant:(r==null?void 0:r.id)||"",search:(e==null?void 0:e.id)||""})},()=>o(ee,{class:"cursor-pointer",variant:"link"},()=>e==null?void 0:e.name)):null}},{accessorKey:"name",header:()=>o("div",null,"Name"),cell:({row:l})=>o("div",null,l.getValue("name"))},{accessorKey:"code",header:()=>o("div",null,"Code"),cell:({row:l})=>o("div",null,l.getValue("code"))},{accessorKey:"description",header:()=>o("div",null,"Description"),cell:({row:l})=>o("div",null,l.getValue("description"))},{accessorKey:"cavity_quantity",header:()=>o("div",null,"Cavity Quantity"),cell:({row:l})=>o("div",null,l.getValue("cavity_quantity"))},{accessorKey:"cavity_type",header:()=>o("div",null,"Cavity Type"),cell:({row:l})=>{const{cavity_type_label:e}=l.original;return o("div",null,e||"")}},{accessorKey:"cycle_time",header:()=>o("div",null,"Cycle Time"),cell:({row:l})=>o("div",null,l.getValue("cycle_time"))},{accessorKey:"cycle_time_type",header:()=>o("div",null,"Cycle Time Type"),cell:({row:l})=>{const{cycle_time_type_label:e}=l.original;return o("div",null,e||"")}},{accessorKey:"shelf_life_duration",header:()=>o("div",null,"Shelf Life Duration"),cell:({row:l})=>o("div",null,l.original.shelf_life_duration||"")},{accessorKey:"shelf_life_type",header:()=>o("div",null,"Shelf Life Type"),cell:({row:l})=>o("div",null,l.original.shelf_life_type_label||"")},{accessorKey:"created_at",header:()=>o("div",null,"Created At"),cell:({row:l})=>o("div",null,b(l.getValue("created_at"))||"")},{accessorKey:"updated_at",header:()=>o("div",null,"Updated At"),cell:({row:l})=>o("div",null,b(l.getValue("updated_at"))||"")}],A=h(()=>{var l;return((l=d.options.statuses.find(e=>e.is_default))==null?void 0:l.value)??p.ACTIVE}),P=h(()=>{var l;return((l=d.options.statuses.find(e=>e.value===s.status))==null?void 0:l.name)??ue[p.ACTIVE]}),s=N({machine_id:"",name:"",code:"",description:"",cavity_quantity:"",cavity_type:"",cycle_time:"",cycle_time_type:"",shelf_life_duration:"",shelf_life_type:"",status:A.value}),_=g({status:s.status===p.ACTIVE}),E=()=>s.post(route("products.presets.store",{tenant:(r==null?void 0:r.id)||"",product:d.product.id}),{onSuccess:()=>{s.reset(),v.create.dialogIsOpen=!1}});return S(()=>s.name,l=>{s.code=ne(l)}),S(()=>_.status,l=>{var a;const e=(a=d.options.statuses.find(C=>l?C.value===p.ACTIVE:C.value===p.INACTIVE))==null?void 0:a.value;e!==void 0&&(s.status=e)}),(l,e)=>(w(),q(k,null,[i(t(B),{title:"Product Presets"}),i(ie,{breadcrumbs:K},{default:c(()=>[i(t(te),null,{default:c(()=>[m("div",pe,[i(t(j),{onSearch:V,onReset:I},{default:c(()=>[i(t(R),{label:"Name",placeholder:"Search ID, Name, Code","model-value":u.search,"onUpdate:modelValue":e[0]||(e[0]=a=>u.search=a)},null,8,["model-value"]),i(t(M),{label:"Status",placeholder:"Select Status",options:l.options.statuses,multiple:"","model-value":u.status,"onUpdate:modelValue":e[1]||(e[1]=a=>u.status=a)},null,8,["options","model-value"])]),_:1}),m("div",ce,[i(t(ae),{title:"Create Preset",open:v.create.dialogIsOpen,"onUpdate:open":e[13]||(e[13]=a=>v.create.dialogIsOpen=a)},{default:c(()=>[m("form",{onSubmit:O(E,["prevent"]),class:"space-y-4"},[i(t(n),{label:"Name",error:t(s).errors.name,"model-value":t(s).name,"onUpdate:modelValue":e[2]||(e[2]=a=>t(s).name=a)},null,8,["error","model-value"]),i(t(n),{label:"Code",error:t(s).errors.code,"model-value":t(s).code,"onUpdate:modelValue":e[3]||(e[3]=a=>t(s).code=a)},null,8,["error","model-value"]),i(t(oe),{label:"Description",error:t(s).errors.description,"model-value":t(s).description,"onUpdate:modelValue":e[4]||(e[4]=a=>t(s).description=a)},null,8,["error","model-value"]),i(t(f),{label:"Machine",options:l.options.machines,"model-value":t(s).machine_id,"onUpdate:modelValue":e[5]||(e[5]=a=>t(s).machine_id=a),error:t(s).errors.machine_id},null,8,["options","model-value","error"]),i(t(n),{label:"Cavity Quantity",error:t(s).errors.cavity_quantity,"model-value":t(s).cavity_quantity,"onUpdate:modelValue":e[6]||(e[6]=a=>t(s).cavity_quantity=a),type:"number",min:"0.01",step:".01"},null,8,["error","model-value"]),i(t(f),{label:"Cavity Type",options:l.options.cavity_types,"model-value":t(s).cavity_type,"onUpdate:modelValue":e[7]||(e[7]=a=>t(s).cavity_type=a),error:t(s).errors.cavity_type},null,8,["options","model-value","error"]),i(t(n),{label:"Cycle Time",error:t(s).errors.cycle_time,"model-value":t(s).cycle_time,"onUpdate:modelValue":e[8]||(e[8]=a=>t(s).cycle_time=a),type:"number",min:"0.01",step:".01"},null,8,["error","model-value"]),i(t(f),{label:"Cycle Time Type",options:l.options.cycle_time_types,"model-value":t(s).cycle_time_type,"onUpdate:modelValue":e[9]||(e[9]=a=>t(s).cycle_time_type=a),error:t(s).errors.cycle_time_type},null,8,["options","model-value","error"]),i(t(n),{label:"Shelf Life Duration",error:t(s).errors.shelf_life_duration,"model-value":t(s).shelf_life_duration,"onUpdate:modelValue":e[10]||(e[10]=a=>t(s).shelf_life_duration=a),type:"number",min:"0.01",step:".01"},null,8,["error","model-value"]),i(t(f),{label:"Shelf Life Type",options:l.options.shelf_life_types,"model-value":t(s).shelf_life_type,"onUpdate:modelValue":e[11]||(e[11]=a=>t(s).shelf_life_type=a),error:t(s).errors.shelf_life_type},null,8,["options","model-value","error"]),i(t(se),{label:P.value,error:t(s).errors.status,"model-value":_.status,"onUpdate:modelValue":e[12]||(e[12]=a=>_.status=a)},null,8,["label","error","model-value"]),i(t(le),{type:"submit",disabled:t(s).processing,loading:t(s).processing},null,8,["disabled","loading"])],32)]),_:1},8,["open"])]),m("div",null,[i(t(z),{"model-value":u,"onUpdate:modelValue":e[14]||(e[14]=a=>u=a),columns:x,"paginate-data":l.presets,"column-visibility":D,"entry-options":t(G),onSearch:V},null,8,["model-value","paginate-data","entry-options"])])])]),_:1})]),_:1})],64))}});export{Oe as default};
