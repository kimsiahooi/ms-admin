import{d as N,c as y,r as _,x as w,f as V,a as O,o as k,e as i,u as s,g as F,w as c,b as m,W as $,h as L,i as r,F as P}from"./app-Dd_azS9s.js";import{_ as W,a as j,b as M}from"./ToggleStatus.vue_vue_type_script_setup_true_lang-C4JAnmuw.js";import{_ as R,a as q,b as z,e as G,p as H,c as C,P as J,d as Q,T as X,u as Y}from"./pickBy-BZ5ZFQC0.js";import{L as Z}from"./index-ioJhywiv.js";import{_ as S,a as ee}from"./FormInput.vue_vue_type_script_setup_true_lang-CyRZt5ak.js";import{_ as ae}from"./FormSwitch.vue_vue_type_script_setup_true_lang-DbWy2Hy2.js";import{_ as I}from"./FormTextarea.vue_vue_type_script_setup_true_lang-B0bVJa16.js";import{_ as se}from"./Dialog.vue_vue_type_script_setup_true_lang-C8rqN1fP.js";import{u as oe,_ as te}from"./AppLayout.vue_vue_type_script_setup_true_lang-CL5r01aQ.js";import{_ as re}from"./AppMainLayout.vue_vue_type_script_setup_true_lang-6B7ILG5j.js";import{a as u,S as le}from"./index-BVEeh8sU.js";import{s as ie}from"./slug-xwoAxeGq.js";import"./index-CnzE4Cxn.js";import"./useForwardExpose-CA8Wv_kq.js";import"./Label.vue_vue_type_script_setup_true_lang-Cw5cT_5W.js";import"./Select.vue_vue_type_script_setup_true_lang-DK09Jnt5.js";import"./RovingFocusGroup-DACwyRCN.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-CFR9-7Cq.js";import"./check-BIl2Szvz.js";import"./useFormControl-ciUBBPp3.js";import"./Switch.vue_vue_type_script_setup_true_lang-CWF0wi2G.js";import"./VisuallyHiddenInput-YkK2DoEj.js";import"./CardTitle.vue_vue_type_script_setup_true_lang-8blD22rC.js";import"./DialogTrigger.vue_vue_type_script_setup_true_lang-Xup29WH7.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DlHdn8C4.js";const ne={class:"space-y-3"},de={class:"flex flex-wrap items-center justify-end gap-2"},we=N({layout:re,__name:"Index",props:{company:{},branches:{},options:{}},setup(x){const n=x,{tenant:o}=oe(),{formatDateTime:b}=Y(),p=y(()=>route().params),d=_({search:p.value.search,entries:p.value.entries||"10",status:p.value.status}),f=_({create:{dialogIsOpen:!1}}),A=[{title:"Dashboard",href:route("dashboard",{tenant:(o==null?void 0:o.id)||""})},{title:"Companies",href:route("companies.index",{tenant:(o==null?void 0:o.id)||""})},{title:n.company.name,href:"#"},{title:"Branches",href:route("companies.branches.index",{tenant:(o==null?void 0:o.id)||"",company:n.company.id})}],h=()=>$.visit(route("companies.branches.index",{...H(d),tenant:(o==null?void 0:o.id)||"",company:n.company.id})),T=()=>$.visit(route("companies.branches.index",{tenant:(o==null?void 0:o.id)||"",company:n.company.id})),U={id:!1,description:!1,address:!1},D=[{accessorKey:"actions",header:()=>r("div",null,"Actions"),cell:({row:a})=>{const e=a.original;return r("div",{class:"flex items-center gap-2"},[r(j,{value:e.status_switch,method:"put",href:route("companies.branches.toggleStatus",{tenant:(o==null?void 0:o.id)||"",company:n.company.id,branch:e.id})}),r(C,{text:"Edit",href:route("companies.branches.edit",{tenant:(o==null?void 0:o.id)||"",company:n.company.id,branch:e.id}),icon:J}),r(Q,{title:`Delete ${e.name}`,route:route("companies.branches.destroy",{tenant:(o==null?void 0:o.id)||"",company:n.company.id,branch:e.id}),asChild:!1},()=>r(C,{variant:"destructive",text:"Delete",icon:X}))])}},{accessorKey:"status",header:()=>r("div",null,"Status"),cell:({row:a})=>{const{status_badge:e}=a.original;return r(M,{statusBadge:e})}},{accessorKey:"id",header:()=>r("div",null,"Id"),cell:({row:a})=>r("div",null,a.getValue("id"))},{accessorKey:"name",header:()=>r("div",null,"Name"),cell:({row:a})=>r("div",null,a.getValue("name"))},{accessorKey:"code",header:()=>r("div",null,"Code"),cell:({row:a})=>r("div",null,a.getValue("code"))},{accessorKey:"description",header:()=>r("div",null,"Description"),cell:({row:a})=>r("div",null,a.getValue("description"))},{accessorKey:"address",header:()=>r("div",null,"Address"),cell:({row:a})=>r("div",null,a.getValue("address"))},{accessorKey:"created_at",header:()=>r("div",null,"Created At"),cell:({row:a})=>r("div",null,b(a.getValue("created_at"))||"")},{accessorKey:"updated_at",header:()=>r("div",null,"Updated At"),cell:({row:a})=>r("div",null,b(a.getValue("updated_at"))||"")}],K=y(()=>{var a;return((a=n.options.statuses.find(e=>e.is_default))==null?void 0:a.value)??u.ACTIVE}),B=y(()=>{var a;return((a=n.options.statuses.find(e=>e.value===t.status))==null?void 0:a.name)??le[u.ACTIVE]}),t=w({name:"",code:"",description:"",address:"",status:K.value}),v=_({status:t.status===u.ACTIVE}),E=()=>t.post(route("companies.branches.store",{tenant:(o==null?void 0:o.id)||"",company:n.company.id}),{onSuccess:()=>{t.reset(),f.create.dialogIsOpen=!1}});return V(()=>t.name,a=>{t.code=ie(a)}),V(()=>v.status,a=>{var l;const e=(l=n.options.statuses.find(g=>a?g.value===u.ACTIVE:g.value===u.INACTIVE))==null?void 0:l.value;e!==void 0&&(t.status=e)}),(a,e)=>(k(),O(P,null,[i(s(F),{title:"Company Branches"}),i(te,{breadcrumbs:A},{default:c(()=>[i(s(Z),null,{default:c(()=>[m("div",ne,[i(s(R),{onSearch:h,onReset:T},{default:c(()=>[i(s(q),{label:"Name",placeholder:"Search ID, Name, Code","model-value":d.search,"onUpdate:modelValue":e[0]||(e[0]=l=>d.search=l)},null,8,["model-value"]),i(s(W),{label:"Status",placeholder:"Select Status",options:a.options.statuses,multiple:"","model-value":d.status,"onUpdate:modelValue":e[1]||(e[1]=l=>d.status=l)},null,8,["options","model-value"])]),_:1}),m("div",de,[i(s(se),{title:"Create Branch",open:f.create.dialogIsOpen,"onUpdate:open":e[7]||(e[7]=l=>f.create.dialogIsOpen=l)},{default:c(()=>[m("form",{onSubmit:L(E,["prevent"]),class:"space-y-4"},[i(s(S),{label:"Name",error:s(t).errors.name,"model-value":s(t).name,"onUpdate:modelValue":e[2]||(e[2]=l=>s(t).name=l)},null,8,["error","model-value"]),i(s(S),{label:"Code",error:s(t).errors.code,"model-value":s(t).code,"onUpdate:modelValue":e[3]||(e[3]=l=>s(t).code=l)},null,8,["error","model-value"]),i(s(I),{label:"Description",error:s(t).errors.description,"model-value":s(t).description,"onUpdate:modelValue":e[4]||(e[4]=l=>s(t).description=l)},null,8,["error","model-value"]),i(s(I),{label:"Address",error:s(t).errors.address,"model-value":s(t).address,"onUpdate:modelValue":e[5]||(e[5]=l=>s(t).address=l)},null,8,["error","model-value"]),i(s(ae),{label:B.value,error:s(t).errors.status,"model-value":v.status,"onUpdate:modelValue":e[6]||(e[6]=l=>v.status=l)},null,8,["label","error","model-value"]),i(s(ee),{type:"submit",disabled:s(t).processing,loading:s(t).processing},null,8,["disabled","loading"])],32)]),_:1},8,["open"])]),m("div",null,[i(s(z),{"model-value":d,"onUpdate:modelValue":e[8]||(e[8]=l=>d=l),columns:D,"paginate-data":a.branches,"column-visibility":U,"entry-options":s(G),onSearch:h},null,8,["model-value","paginate-data","entry-options"])])])]),_:1})]),_:1})],64))}});export{we as default};
