import{d as w,c as _,r as g,x as P,f as h,a as B,o as O,e as i,u as a,g as k,w as u,b as m,W as S,h as F,i as o,F as L}from"./app-Bpp2Ep_u.js";import{_ as W,a as j,b as M}from"./StatusSwitch.vue_vue_type_script_setup_true_lang-W1CIgrju.js";import{_ as R,a as q,b as z,e as G,p as H,c as $,P as J,d as Q,T as X,u as Y}from"./pickBy-V1SMm1A7.js";import{L as Z}from"./index-DfOI-09q.js";import{_ as C,a as ee}from"./FormInput.vue_vue_type_script_setup_true_lang-DpYkQWZj.js";import{_ as se}from"./FormSwitch.vue_vue_type_script_setup_true_lang-rNDFlZ_x.js";import{_ as I}from"./FormTextarea.vue_vue_type_script_setup_true_lang-BptgrTO4.js";import{_ as ae}from"./Dialog.vue_vue_type_script_setup_true_lang-CNkUMidd.js";import{u as te,_ as le}from"./AppLayout.vue_vue_type_script_setup_true_lang-BF1Gl5Ph.js";import{_ as oe}from"./AppMainLayout.vue_vue_type_script_setup_true_lang-ByRRqFff.js";import{a as n,S as re}from"./index-tNKZbeW-.js";import{s as ie}from"./slug-xwoAxeGq.js";import"./index-C6fWEfII.js";import"./useForwardExpose-rOcx7BkQ.js";import"./Label.vue_vue_type_script_setup_true_lang-xwMa4j3f.js";import"./Select.vue_vue_type_script_setup_true_lang-qBXRkwJR.js";import"./RovingFocusGroup-bXShlB3H.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-OVzfARf1.js";import"./check-Bw0EwC7w.js";import"./useFormControl-a5l-P2b3.js";import"./Switch.vue_vue_type_script_setup_true_lang-BA_0ISoO.js";import"./VisuallyHiddenInput-CCj47bq6.js";import"./CardTitle.vue_vue_type_script_setup_true_lang-CWyXmvF6.js";import"./DialogTrigger.vue_vue_type_script_setup_true_lang-DHlMUJZx.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-D4rF7PW5.js";const de={class:"space-y-3"},ne={class:"flex flex-wrap items-center justify-end gap-2"},Pe=w({layout:oe,__name:"Index",props:{plants:{},options:{}},setup(x){const p=x,{tenant:t}=te(),{formatDateTime:b}=Y(),c=_(()=>route().params),d=g({search:c.value.search,entries:c.value.entries||"10",status:c.value.status}),f=g({create:{dialogIsOpen:!1}}),A=[{title:"Dashboard",href:route("dashboard",{tenant:(t==null?void 0:t.id)||""})},{title:"Plants",href:route("plants.index",{tenant:(t==null?void 0:t.id)||""})}],y=()=>S.visit(route("plants.index",{...H(d),tenant:(t==null?void 0:t.id)||""}),{preserveScroll:!0,preserveState:!0}),T=()=>S.visit(route("plants.index",{tenant:(t==null?void 0:t.id)||""})),U={id:!1,description:!1,address:!1},D=[{accessorKey:"actions",header:()=>o("div",null,"Actions"),cell:({row:s})=>{const e=s.original;return o("div",{class:"flex items-center gap-2"},[o(j,{value:e.status.switch,method:"put",href:route("plants.toggleStatus",{tenant:(t==null?void 0:t.id)||"",plant:e.id})}),o($,{text:"Edit",href:route("plants.edit",{tenant:(t==null?void 0:t.id)||"",plant:e.id}),icon:J}),o(Q,{title:`Delete ${e.name}`,route:route("plants.destroy",{tenant:(t==null?void 0:t.id)||"",plant:e.id}),asChild:!1},()=>o($,{variant:"destructive",text:"Delete",icon:X}))])}},{accessorKey:"status",header:()=>o("div",null,"Status"),cell:({row:s})=>{const{status:e}=s.original;return o(M,{statusBadge:e.badge})}},{accessorKey:"id",header:()=>o("div",null,"Id"),cell:({row:s})=>o("div",null,s.getValue("id"))},{accessorKey:"name",header:()=>o("div",null,"Name"),cell:({row:s})=>o("div",null,s.getValue("name"))},{accessorKey:"code",header:()=>o("div",null,"Code"),cell:({row:s})=>o("div",null,s.getValue("code"))},{accessorKey:"description",header:()=>o("div",null,"Description"),cell:({row:s})=>o("div",null,s.getValue("description"))},{accessorKey:"address",header:()=>o("div",null,"Address"),cell:({row:s})=>o("div",null,s.getValue("address"))},{accessorKey:"created_at",header:()=>o("div",null,"Created At"),cell:({row:s})=>o("div",null,b(s.getValue("created_at"))||"")},{accessorKey:"updated_at",header:()=>o("div",null,"Updated At"),cell:({row:s})=>o("div",null,b(s.getValue("updated_at"))||"")}],K=_(()=>{var s;return((s=p.options.statuses.find(e=>e.is_default))==null?void 0:s.value)??n.ACTIVE}),E=_(()=>{var s;return((s=p.options.statuses.find(e=>e.value===l.status))==null?void 0:s.name)??re[n.ACTIVE]}),l=P({name:"",code:"",description:"",address:"",status:K.value}),v=g({status:l.status===n.ACTIVE}),N=()=>l.post(route("plants.store",{tenant:(t==null?void 0:t.id)||""}),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{l.reset(),f.create.dialogIsOpen=!1}});return h(()=>l.name,s=>{l.code=ie(s)}),h(()=>v.status,s=>{var r;const e=(r=p.options.statuses.find(V=>s?V.value===n.ACTIVE:V.value===n.INACTIVE))==null?void 0:r.value;e!==void 0&&(l.status=e)}),(s,e)=>(O(),B(L,null,[i(a(k),{title:"Plants"}),i(le,{breadcrumbs:A},{default:u(()=>[i(a(Z),null,{default:u(()=>[m("div",de,[i(a(R),{onSearch:y,onReset:T},{default:u(()=>[i(a(q),{label:"Name",placeholder:"Search ID, Name, Code","model-value":d.search,"onUpdate:modelValue":e[0]||(e[0]=r=>d.search=r)},null,8,["model-value"]),i(a(W),{label:"Status",placeholder:"Select Status",options:s.options.statuses,multiple:"","model-value":d.status,"onUpdate:modelValue":e[1]||(e[1]=r=>d.status=r)},null,8,["options","model-value"])]),_:1}),m("div",ne,[i(a(ae),{title:"Create Plant",open:f.create.dialogIsOpen,"onUpdate:open":e[7]||(e[7]=r=>f.create.dialogIsOpen=r)},{default:u(()=>[m("form",{onSubmit:F(N,["prevent"]),class:"space-y-4"},[i(a(C),{label:"Name",error:a(l).errors.name,"model-value":a(l).name,"onUpdate:modelValue":e[2]||(e[2]=r=>a(l).name=r)},null,8,["error","model-value"]),i(a(C),{label:"Code",error:a(l).errors.code,"model-value":a(l).code,"onUpdate:modelValue":e[3]||(e[3]=r=>a(l).code=r)},null,8,["error","model-value"]),i(a(I),{label:"Description",error:a(l).errors.description,"model-value":a(l).description,"onUpdate:modelValue":e[4]||(e[4]=r=>a(l).description=r)},null,8,["error","model-value"]),i(a(I),{label:"Address",error:a(l).errors.address,"model-value":a(l).address,"onUpdate:modelValue":e[5]||(e[5]=r=>a(l).address=r)},null,8,["error","model-value"]),i(a(se),{label:E.value,error:a(l).errors.status,"model-value":v.status,"onUpdate:modelValue":e[6]||(e[6]=r=>v.status=r)},null,8,["label","error","model-value"]),i(a(ee),{type:"submit",disabled:a(l).processing,loading:a(l).processing},null,8,["disabled","loading"])],32)]),_:1},8,["open"])]),m("div",null,[i(a(z),{"model-value":d,"onUpdate:modelValue":e[8]||(e[8]=r=>d=r),columns:D,"paginate-data":s.plants,"column-visibility":U,"entry-options":a(G),onSearch:y},null,8,["model-value","paginate-data","entry-options"])])])]),_:1})]),_:1})],64))}});export{Pe as default};
