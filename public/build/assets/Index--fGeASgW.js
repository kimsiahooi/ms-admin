import{d as w,c as _,r as g,x as P,f as h,a as B,o as O,e as i,u as s,g as k,w as u,b as m,W as $,h as F,i as o,F as L}from"./app-Dd_azS9s.js";import{_ as W,a as j,b as M}from"./ToggleStatus.vue_vue_type_script_setup_true_lang-C4JAnmuw.js";import{_ as R,a as q,b as z,e as G,p as H,c as S,P as J,d as Q,T as X,u as Y}from"./pickBy-BZ5ZFQC0.js";import{L as Z}from"./index-ioJhywiv.js";import{_ as C,a as ee}from"./FormInput.vue_vue_type_script_setup_true_lang-CyRZt5ak.js";import{_ as ae}from"./FormSwitch.vue_vue_type_script_setup_true_lang-DbWy2Hy2.js";import{_ as I}from"./FormTextarea.vue_vue_type_script_setup_true_lang-B0bVJa16.js";import{_ as se}from"./Dialog.vue_vue_type_script_setup_true_lang-C8rqN1fP.js";import{u as te,_ as le}from"./AppLayout.vue_vue_type_script_setup_true_lang-CL5r01aQ.js";import{_ as oe}from"./AppMainLayout.vue_vue_type_script_setup_true_lang-6B7ILG5j.js";import{a as n,S as re}from"./index-tNKZbeW-.js";import{s as ie}from"./slug-xwoAxeGq.js";import"./index-CnzE4Cxn.js";import"./useForwardExpose-CA8Wv_kq.js";import"./Label.vue_vue_type_script_setup_true_lang-Cw5cT_5W.js";import"./Select.vue_vue_type_script_setup_true_lang-DK09Jnt5.js";import"./RovingFocusGroup-DACwyRCN.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-CFR9-7Cq.js";import"./check-BIl2Szvz.js";import"./useFormControl-ciUBBPp3.js";import"./Switch.vue_vue_type_script_setup_true_lang-CWF0wi2G.js";import"./VisuallyHiddenInput-YkK2DoEj.js";import"./CardTitle.vue_vue_type_script_setup_true_lang-8blD22rC.js";import"./DialogTrigger.vue_vue_type_script_setup_true_lang-Xup29WH7.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DlHdn8C4.js";const de={class:"space-y-3"},ne={class:"flex flex-wrap items-center justify-end gap-2"},Pe=w({layout:oe,__name:"Index",props:{plants:{},options:{}},setup(x){const p=x,{tenant:t}=te(),{formatDateTime:b}=Y(),c=_(()=>route().params),d=g({search:c.value.search,entries:c.value.entries||"10",status:c.value.status}),f=g({create:{dialogIsOpen:!1}}),A=[{title:"Dashboard",href:route("dashboard",{tenant:(t==null?void 0:t.id)||""})},{title:"Plants",href:route("plants.index",{tenant:(t==null?void 0:t.id)||""})}],y=()=>$.visit(route("plants.index",{...H(d),tenant:(t==null?void 0:t.id)||""})),T=()=>$.visit(route("plants.index",{tenant:(t==null?void 0:t.id)||""})),U={id:!1,description:!1,address:!1},D=[{accessorKey:"actions",header:()=>o("div",null,"Actions"),cell:({row:a})=>{const e=a.original;return o("div",{class:"flex items-center gap-2"},[o(j,{value:e.status_switch,method:"put",href:route("plants.toggleStatus",{tenant:(t==null?void 0:t.id)||"",plant:e.id})}),o(S,{text:"Edit",href:route("plants.edit",{tenant:(t==null?void 0:t.id)||"",plant:e.id}),icon:J}),o(Q,{title:`Delete ${e.name}`,route:route("plants.destroy",{tenant:(t==null?void 0:t.id)||"",plant:e.id}),asChild:!1},()=>o(S,{variant:"destructive",text:"Delete",icon:X}))])}},{accessorKey:"status",header:()=>o("div",null,"Status"),cell:({row:a})=>{const{status_badge:e}=a.original;return o(M,{statusBadge:e})}},{accessorKey:"id",header:()=>o("div",null,"Id"),cell:({row:a})=>o("div",null,a.getValue("id"))},{accessorKey:"name",header:()=>o("div",null,"Name"),cell:({row:a})=>o("div",null,a.getValue("name"))},{accessorKey:"code",header:()=>o("div",null,"Code"),cell:({row:a})=>o("div",null,a.getValue("code"))},{accessorKey:"description",header:()=>o("div",null,"Description"),cell:({row:a})=>o("div",null,a.getValue("description"))},{accessorKey:"address",header:()=>o("div",null,"Address"),cell:({row:a})=>o("div",null,a.getValue("address"))},{accessorKey:"created_at",header:()=>o("div",null,"Created At"),cell:({row:a})=>o("div",null,b(a.getValue("created_at"))||"")},{accessorKey:"updated_at",header:()=>o("div",null,"Updated At"),cell:({row:a})=>o("div",null,b(a.getValue("updated_at"))||"")}],K=_(()=>{var a;return((a=p.options.statuses.find(e=>e.is_default))==null?void 0:a.value)??n.ACTIVE}),E=_(()=>{var a;return((a=p.options.statuses.find(e=>e.value===l.status))==null?void 0:a.name)??re[n.ACTIVE]}),l=P({name:"",code:"",description:"",address:"",status:K.value}),v=g({status:l.status===n.ACTIVE}),N=()=>l.post(route("plants.store",{tenant:(t==null?void 0:t.id)||""}),{onSuccess:()=>{l.reset(),f.create.dialogIsOpen=!1}});return h(()=>l.name,a=>{l.code=ie(a)}),h(()=>v.status,a=>{var r;const e=(r=p.options.statuses.find(V=>a?V.value===n.ACTIVE:V.value===n.INACTIVE))==null?void 0:r.value;e!==void 0&&(l.status=e)}),(a,e)=>(O(),B(L,null,[i(s(k),{title:"Plants"}),i(le,{breadcrumbs:A},{default:u(()=>[i(s(Z),null,{default:u(()=>[m("div",de,[i(s(R),{onSearch:y,onReset:T},{default:u(()=>[i(s(q),{label:"Name",placeholder:"Search ID, Name, Code","model-value":d.search,"onUpdate:modelValue":e[0]||(e[0]=r=>d.search=r)},null,8,["model-value"]),i(s(W),{label:"Status",placeholder:"Select Status",options:a.options.statuses,multiple:"","model-value":d.status,"onUpdate:modelValue":e[1]||(e[1]=r=>d.status=r)},null,8,["options","model-value"])]),_:1}),m("div",ne,[i(s(se),{title:"Create Plant",open:f.create.dialogIsOpen,"onUpdate:open":e[7]||(e[7]=r=>f.create.dialogIsOpen=r)},{default:u(()=>[m("form",{onSubmit:F(N,["prevent"]),class:"space-y-4"},[i(s(C),{label:"Name",error:s(l).errors.name,"model-value":s(l).name,"onUpdate:modelValue":e[2]||(e[2]=r=>s(l).name=r)},null,8,["error","model-value"]),i(s(C),{label:"Code",error:s(l).errors.code,"model-value":s(l).code,"onUpdate:modelValue":e[3]||(e[3]=r=>s(l).code=r)},null,8,["error","model-value"]),i(s(I),{label:"Description",error:s(l).errors.description,"model-value":s(l).description,"onUpdate:modelValue":e[4]||(e[4]=r=>s(l).description=r)},null,8,["error","model-value"]),i(s(I),{label:"Address",error:s(l).errors.address,"model-value":s(l).address,"onUpdate:modelValue":e[5]||(e[5]=r=>s(l).address=r)},null,8,["error","model-value"]),i(s(ae),{label:E.value,error:s(l).errors.status,"model-value":v.status,"onUpdate:modelValue":e[6]||(e[6]=r=>v.status=r)},null,8,["label","error","model-value"]),i(s(ee),{type:"submit",disabled:s(l).processing,loading:s(l).processing},null,8,["disabled","loading"])],32)]),_:1},8,["open"])]),m("div",null,[i(s(z),{"model-value":d,"onUpdate:modelValue":e[8]||(e[8]=r=>d=r),columns:D,"paginate-data":a.plants,"column-visibility":U,"entry-options":s(G),onSearch:y},null,8,["model-value","paginate-data","entry-options"])])])]),_:1})]),_:1})],64))}});export{Pe as default};
