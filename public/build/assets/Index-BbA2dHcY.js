import{d as C,c as n,x as b,r as D,j as K,a as P,o as A,e as i,u as e,g as N,w as u,b as m,W as O,f as T,k as l,l as B,F as M}from"./app-DXF5ZDlf.js";import{_ as L,a as E,b as F}from"./StatusSwitch.vue_vue_type_script_setup_true_lang-MKb8QBO2.js";import{_ as j,a as R,b as W,e as z,p as q,c as v,P as G,d as H,T as J,u as Q}from"./pickBy-hLMjAkkA.js";import{L as X}from"./index-BjB755RN.js";import{_ as Y}from"./FormError.vue_vue_type_script_setup_true_lang-Dn4XFFZq.js";import{_ as h}from"./FormInput.vue_vue_type_script_setup_true_lang-BcUaJcPU.js";import{_ as Z}from"./FormSwitch.vue_vue_type_script_setup_true_lang-BfWfk0xr.js";import{_ as y}from"./FormTextarea.vue_vue_type_script_setup_true_lang-DB2FOHUt.js";import{_ as ee}from"./Dialog.vue_vue_type_script_setup_true_lang-BaSnCOCm.js";import{u as ae,_ as se}from"./AppLayout.vue_vue_type_script_setup_true_lang-CL3_AaP9.js";import{_ as te}from"./AppMainLayout.vue_vue_type_script_setup_true_lang-bT7fAVu7.js";import{S as le,a as re}from"./index-tNKZbeW-.js";import{s as oe}from"./slug-xwoAxeGq.js";import{c as ie}from"./index-BFLydQ1P.js";import"./useForwardExpose-V3SiZ3RI.js";import"./Label.vue_vue_type_script_setup_true_lang-D8fjgvI4.js";import"./Select.vue_vue_type_script_setup_true_lang-CHz7p0yn.js";import"./RovingFocusGroup-D7py306x.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-BneVn0H-.js";import"./check-D55LBVCP.js";import"./useFormControl-BDXScHl8.js";import"./nullish-CHIgUVhi.js";import"./chevron-down-Dys5RMUG.js";import"./Switch.vue_vue_type_script_setup_true_lang-Bi5u4ezE.js";import"./VisuallyHiddenInput-j5jiUrWg.js";import"./CardTitle.vue_vue_type_script_setup_true_lang-BAy547XP.js";import"./Input.vue_vue_type_script_setup_true_lang-DZplO2JK.js";import"./DialogTrigger.vue_vue_type_script_setup_true_lang-aGt9LZHC.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BqDP8Yct.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=ie("PickaxeIcon",[["path",{d:"M14.531 12.469 6.619 20.38a1 1 0 1 1-3-3l7.912-7.912",key:"we99rg"}],["path",{d:"M15.686 4.314A12.5 12.5 0 0 0 5.461 2.958 1 1 0 0 0 5.58 4.71a22 22 0 0 1 6.318 3.393",key:"1w6hck"}],["path",{d:"M17.7 3.7a1 1 0 0 0-1.4 0l-4.6 4.6a1 1 0 0 0 0 1.4l2.6 2.6a1 1 0 0 0 1.4 0l4.6-4.6a1 1 0 0 0 0-1.4z",key:"15hgfx"}],["path",{d:"M19.686 8.314a12.501 12.501 0 0 1 1.356 10.225 1 1 0 0 1-1.751-.119 22 22 0 0 0-3.393-6.319",key:"452b4h"}]]),ne={class:"space-y-3"},ue={class:"flex flex-wrap items-center justify-end gap-2"},Ee=C({layout:te,__name:"Index",props:{plants:{},options:{}},setup(V){const _=V,{tenant:t}=ae(),{formatDateTime:g}=Q(),p=n(()=>route().params),d=b({search:p.value.search,entries:p.value.entries||"10",status:p.value.status}),c=D({create:{dialogIsOpen:!1}}),S=n(()=>[{title:"Dashboard",href:route("dashboard",{tenant:(t==null?void 0:t.id)||""})},{title:"Plants",href:route("plants.index",{tenant:(t==null?void 0:t.id)||""})}]),f=()=>O.visit(route("plants.index",{...q(d.data()),tenant:(t==null?void 0:t.id)||""}),{preserveScroll:!0,preserveState:!0}),$=()=>{d.reset(),f()},x=[{accessorKey:"actions",header:()=>l("div",null,"Actions"),cell:({row:s})=>{const a=s.original;return l("div",{class:"flex items-center gap-2"},[l(E,{value:a.status.switch,method:"put",href:route("plants.toggleStatus",{tenant:(t==null?void 0:t.id)||"",plant:a.id})}),l(v,{text:"Edit",href:route("plants.edit",{tenant:(t==null?void 0:t.id)||"",plant:a.id}),icon:G}),l(v,{text:"Operations",href:route("plants.operations.index",{tenant:(t==null?void 0:t.id)||"",plant:a.id}),icon:de}),l(H,{title:`Delete ${a.name}`,route:route("plants.destroy",{tenant:(t==null?void 0:t.id)||"",plant:a.id}),asChild:!1},()=>l(v,{variant:"destructive",text:"Delete",icon:J}))])}},{accessorKey:"status",header:()=>l("div",null,"Status"),cell:({row:s})=>{const{status:a}=s.original;return l(F,{statusBadge:a.badge})}},{accessorKey:"id",header:()=>l("div",null,"Id"),cell:({row:s})=>l("div",null,s.getValue("id"))},{accessorKey:"name",header:()=>l("div",null,"Name"),cell:({row:s})=>l("div",null,s.getValue("name"))},{accessorKey:"code",header:()=>l("div",null,"Code"),cell:({row:s})=>l("div",null,s.getValue("code"))},{accessorKey:"description",header:()=>l("div",null,"Description"),cell:({row:s})=>l("div",null,s.getValue("description"))},{accessorKey:"address",header:()=>l("div",null,"Address"),cell:({row:s})=>l("div",null,s.getValue("address"))},{accessorKey:"created_at",header:()=>l("div",null,"Created At"),cell:({row:s})=>l("div",null,g(s.getValue("created_at"))||"")},{accessorKey:"updated_at",header:()=>l("div",null,"Updated At"),cell:({row:s})=>l("div",null,g(s.getValue("updated_at"))||"")}],k={id:!1,description:!1,address:!1},I=n(()=>{var s;return!!((s=_.options.switch.statuses.find(a=>a.is_default))!=null&&s.value)}),w=n(()=>{var s;return((s=_.options.switch.statuses.find(a=>a.value===r.status))==null?void 0:s.name)??le[re.INACTIVE]}),r=b({name:"",code:"",description:"",address:"",status:I.value}),U=()=>r.post(route("plants.store",{tenant:(t==null?void 0:t.id)||""}),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{r.reset(),c.create.dialogIsOpen=!1}});return K(()=>r.name,s=>{r.code=oe(s)}),(s,a)=>(A(),P(M,null,[i(e(N),{title:"Plants"}),i(se,{breadcrumbs:S.value},{default:u(()=>[i(e(X),null,{default:u(()=>[m("div",ne,[i(e(j),{onSearch:f,onReset:$},{default:u(()=>[i(e(R),{label:"Name",placeholder:"Search ID, Name, Code","model-value":e(d).search,"onUpdate:modelValue":a[0]||(a[0]=o=>e(d).search=o)},null,8,["model-value"]),i(e(L),{label:"Status",placeholder:"Select Status",options:s.options.select.statuses,multiple:"","model-value":e(d).status,"onUpdate:modelValue":a[1]||(a[1]=o=>e(d).status=o)},null,8,["options","model-value"])]),_:1}),m("div",ue,[i(e(ee),{title:"Create Plant",open:c.create.dialogIsOpen,"onUpdate:open":a[7]||(a[7]=o=>c.create.dialogIsOpen=o)},{default:u(()=>[m("form",{onSubmit:T(U,["prevent"]),class:"space-y-4"},[i(e(h),{label:"Name",error:e(r).errors.name,"model-value":e(r).name,"onUpdate:modelValue":a[2]||(a[2]=o=>e(r).name=o)},null,8,["error","model-value"]),i(e(h),{label:"Code",error:e(r).errors.code,"model-value":e(r).code,"onUpdate:modelValue":a[3]||(a[3]=o=>e(r).code=o)},null,8,["error","model-value"]),i(e(y),{label:"Description",error:e(r).errors.description,"model-value":e(r).description,"onUpdate:modelValue":a[4]||(a[4]=o=>e(r).description=o)},null,8,["error","model-value"]),i(e(y),{label:"Address",error:e(r).errors.address,"model-value":e(r).address,"onUpdate:modelValue":a[5]||(a[5]=o=>e(r).address=o)},null,8,["error","model-value"]),i(e(Z),{label:w.value,error:e(r).errors.status,"model-value":e(r).status,"onUpdate:modelValue":a[6]||(a[6]=o=>e(r).status=o)},null,8,["label","error","model-value"]),i(e(Y),{type:"submit",disabled:e(r).processing,loading:e(r).processing},null,8,["disabled","loading"])],32)]),_:1},8,["open"])]),m("div",null,[i(e(W),{"model-value":e(d),"onUpdate:modelValue":a[8]||(a[8]=o=>B(d)?d.value=o:null),columns:x,"paginate-data":s.plants,"column-visibility":k,"entry-options":e(z),onSearch:f},null,8,["model-value","paginate-data","entry-options"])])])]),_:1})]),_:1},8,["breadcrumbs"])],64))}});export{Ee as default};
