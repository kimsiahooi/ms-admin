import{_ as P,s as j,a as H,b as L,c as W,p as I,P as q,T as G,d as J}from"./slug-BreFZVHy.js";import{_ as Q,e as R,u as X}from"./options-Bve_3Yu2.js";import{_ as g}from"./index-vsIRbsHF.js";import{d as Y,l as Z,c as m,j as k,x as ee,m as w,a as v,o as f,e as o,u as a,g as te,w as n,b as d,i as x,h as u,t as p,k as r,F as ae,W as se}from"./app-rKevsbrN.js";import{_ as V}from"./Input.vue_vue_type_script_setup_true_lang-Bl6uM_Lk.js";import{_}from"./Label.vue_vue_type_script_setup_true_lang-DFoflhMy.js";import{_ as ie}from"./AppLayout.vue_vue_type_script_setup_true_lang-DDQHEBAq.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-ff9TVVM0.js";import"./RovingFocusGroup-C6-qkPrg.js";import"./useForwardExpose-BU3sLVFP.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-qCITKRnk.js";import"./check-BiHPLw1s.js";import"./VisuallyHiddenInput-BRytzW6y.js";import"./index-C2PJm6Ej.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BIZdrZ9W.js";const re={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},le={class:"space-y-3"},oe={class:"flex flex-wrap items-center justify-end gap-2"},ne={class:"grid w-full max-w-sm items-center gap-1.5"},de={key:0,class:"text-destructive"},ue={class:"grid w-full max-w-sm items-center gap-1.5"},ce={key:0,class:"text-destructive"},pe={class:"grid w-full max-w-sm items-center gap-1.5"},me={key:0,class:"text-destructive"},ve={class:"grid w-full max-w-sm items-center gap-1.5"},fe={class:"flex items-center space-x-2"},_e={key:0,class:"text-destructive"},Be=Y({layout:P,__name:"Index",props:{materials:{},statuses:{}},setup($){const D=$,{formatDateTime:b}=X(),K=Z(),c=m(()=>{var t;return((t=K.props.tenant)==null?void 0:t.id)||""}),C=m(()=>route().params),N=k({search:C.value.search,entries:C.value.entries||"10"}),O={placeholder:"Search name..."},U=[{title:"Dashboard",href:route("dashboard",{tenant:c.value})},{title:"Materials",href:route("materials.index",{tenant:c.value})}],B=t=>{se.visit(route("materials.index",{...I(t),tenant:c.value}))},E={description:!1},M=[{accessorKey:"actions",header:()=>r("div",null,"Actions"),cell:({row:t})=>{const e=t.original;return r("div",{class:"flex items-center gap-2"},[r(g,{class:"h-auto size-6 cursor-pointer rounded-full",onClick:()=>h("update",e)},()=>r(q,{class:"size-3"})),r(g,{class:"h-auto size-6 cursor-pointer rounded-full",variant:"destructive",onClick:()=>h("destroy",e)},()=>r(G,{class:"size-3"}))])}},{accessorKey:"name",header:()=>r("div",null,"Name"),cell:({row:t})=>r("div",null,t.getValue("name"))},{accessorKey:"code",header:()=>r("div",null,"Code"),cell:({row:t})=>r("div",null,t.getValue("code"))},{accessorKey:"description",header:()=>r("div",null,"Description"),cell:({row:t})=>r("div",null,t.getValue("description"))},{accessorKey:"is_active",header:()=>r("div",null,"Active"),cell:({row:t})=>{const{is_active:e,is_active_display:l}=t.original;return r(J,{variant:e?"default":"destructive"},()=>l)}},{accessorKey:"created_at",header:()=>r("div",null,"Created At"),cell:({row:t})=>{const e=b(t.original.created_at);return e?r("div",null,e):r("div",null)}},{accessorKey:"updated_at",header:()=>r("div",null,"Updated At"),cell:({row:t})=>{const e=b(t.original.updated_at);return e?r("div",null,e):r("div",null)}}],s=k({type:null,title:"",isOpen:!1,data:null}),i=ee(s.type||"",{name:"",code:"",description:"",is_active:!0}),S=m(()=>{var t;return(t=D.statuses.find(e=>i.is_active?e.value:!e.value))==null?void 0:t.name}),T=m(()=>s.type==="store"?"Create":s.type==="update"?"Update":"Delete"),z=m(()=>s.type==="destroy"?"destructive":"default"),h=(t,e)=>{var l,y;switch(t){case"store":s.title="Create Material";break;case"update":e&&(s.data=e,i.name=e.name,i.code=e.code,i.description=e.description||"",i.is_active=e.is_active),s.title=`Edit ${((l=s.data)==null?void 0:l.name)||"Material"}`;break;case"destroy":e&&(s.data=e),s.title=`Delete ${((y=s.data)==null?void 0:y.name)||"Material"}`}s.type=t,s.isOpen=!0},A=()=>{var t,e;if(s.type){const l=s.type==="store"?route("materials.store",{tenant:c.value}):s.type==="update"?route("materials.update",{tenant:c.value,material:((t=s.data)==null?void 0:t.id)||""}):route("materials.destroy",{tenant:c.value,material:((e=s.data)==null?void 0:e.id)||""}),y=s.type==="store"?"post":s.type==="update"?"put":"delete";i.transform(F=>s.type!=="destroy"?F:{}).submit(y,l,{onSuccess:()=>{i.reset(),s.isOpen=!1}})}};return w(()=>s.isOpen,t=>{t||(s.data=null,i.clearErrors(),i.reset())}),w([()=>i.name,()=>s.type],([t,e])=>{e==="store"&&(i.code=j(t))}),(t,e)=>(f(),v(ae,null,[o(a(te),{title:"Materials"}),o(ie,{breadcrumbs:U},{default:n(()=>[d("div",re,[d("div",le,[d("div",oe,[o(a(H),{open:s.isOpen,"onUpdate:open":e[5]||(e[5]=l=>s.isOpen=l),dialog:s,onSubmit:A},{button:n(()=>[o(a(g),{class:"cursor-pointer",onClick:e[0]||(e[0]=l=>h("store"))},{default:n(()=>e[6]||(e[6]=[u("Create")])),_:1,__:[6]})]),"submit-button":n(()=>[o(a(g),{type:"submit",class:"cursor-pointer",variant:z.value,disabled:a(i).processing},{default:n(()=>[u(p(T.value),1)]),_:1},8,["variant","disabled"])]),default:n(()=>[d("div",ne,[o(a(_),null,{default:n(()=>e[7]||(e[7]=[u("Name")])),_:1,__:[7]}),o(a(V),{type:"text",placeholder:"Enter Name","model-value":a(i).name,"onUpdate:modelValue":e[1]||(e[1]=l=>a(i).name=l)},null,8,["model-value"]),a(i).errors.name?(f(),v("p",de,p(a(i).errors.name),1)):x("",!0)]),d("div",ue,[o(a(_),null,{default:n(()=>e[8]||(e[8]=[u("Code")])),_:1,__:[8]}),o(a(V),{type:"text",placeholder:"Enter Code","model-value":a(i).code,"onUpdate:modelValue":e[2]||(e[2]=l=>a(i).code=l)},null,8,["model-value"]),a(i).errors.code?(f(),v("p",ce,p(a(i).errors.code),1)):x("",!0)]),d("div",pe,[o(a(_),null,{default:n(()=>e[9]||(e[9]=[u("Description")])),_:1,__:[9]}),o(a(L),{placeholder:"Enter Description","model-value":a(i).description,"onUpdate:modelValue":e[3]||(e[3]=l=>a(i).description=l)},null,8,["model-value"]),a(i).errors.description?(f(),v("p",me,p(a(i).errors.description),1)):x("",!0)]),d("div",ve,[o(a(_),{class:"mb-1"},{default:n(()=>e[10]||(e[10]=[u("Status")])),_:1,__:[10]}),d("div",fe,[o(a(W),{class:"cursor-pointer","model-value":a(i).is_active,"onUpdate:modelValue":e[4]||(e[4]=l=>a(i).is_active=l)},null,8,["model-value"]),o(a(_),null,{default:n(()=>[u(p(S.value),1)]),_:1})]),a(i).errors.is_active?(f(),v("p",_e,p(a(i).errors.is_active),1)):x("",!0)])]),_:1},8,["open","dialog"])]),d("div",null,[o(a(Q),{columns:M,"paginate-data":t.materials,"column-visibility":E,filter:N,"entry-options":a(R),"search-config":O,onFilterChange:B},null,8,["paginate-data","filter","entry-options"])])])])]),_:1})],64))}});export{Be as default};
