import{d as C,c as p,x as y,r as D,j as T,a as K,o as O,e as i,u as e,g as M,w as u,b as m,W as N,f as L,k as o,l as B,F as A}from"./app-DW3qUSpG.js";import{_ as P,a as j,b as E}from"./StatusSwitch.vue_vue_type_script_setup_true_lang-BR-Y-PE9.js";import{_ as F,a as q,b as R,e as W,p as z,c,P as H,d as G,T as J,u as Q}from"./pickBy-NvTHZy8I.js";import{L as X}from"./index-Bi-HJBVM.js";import{_ as Y}from"./FormError.vue_vue_type_script_setup_true_lang-1af55uzd.js";import{_ as g}from"./FormInput.vue_vue_type_script_setup_true_lang-Btfx0rSq.js";import{_ as Z}from"./FormSwitch.vue_vue_type_script_setup_true_lang-zC1jdb_M.js";import{_ as ee}from"./FormTextarea.vue_vue_type_script_setup_true_lang-V-SYeW4h.js";import{_ as te}from"./Dialog.vue_vue_type_script_setup_true_lang-CoKZHrq5.js";import{u as ae,_ as se}from"./AppLayout.vue_vue_type_script_setup_true_lang-BgvfEKRj.js";import{_ as oe}from"./AppMainLayout.vue_vue_type_script_setup_true_lang-o02Mcb03.js";import{S as re,a as le}from"./index-BWts5uV5.js";import{s as ie}from"./slug-xwoAxeGq.js";import{c as b}from"./index-CgwL-eGe.js";import"./useForwardExpose-CvcD0Rb6.js";import"./Label.vue_vue_type_script_setup_true_lang-Mfd-XF4S.js";import"./Select.vue_vue_type_script_setup_true_lang-tA2CQygX.js";import"./RovingFocusGroup-RdfVjWf9.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-vj4ZpyyN.js";import"./check-CxD0QyHG.js";import"./useFormControl-D4ksLBo0.js";import"./nullish-CHIgUVhi.js";import"./chevron-down-MWTkW-nX.js";import"./Switch.vue_vue_type_script_setup_true_lang-C_KlnxJK.js";import"./VisuallyHiddenInput-ChKgx7vy.js";import"./Input.vue_vue_type_script_setup_true_lang-JOJUwJ_8.js";import"./DialogTrigger.vue_vue_type_script_setup_true_lang-DCPYUlgw.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DsKetNlE.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=b("ListTodoIcon",[["rect",{x:"3",y:"5",width:"6",height:"6",rx:"1",key:"1defrl"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=b("UsersIcon",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),pe={class:"space-y-3"},ue={class:"flex flex-wrap items-center justify-end gap-2"},je=C({layout:oe,__name:"Index",props:{operations:{},plant:{},options:{}},setup(x){const n=x,{tenant:t}=ae(),{formatDateTime:_}=Q(),f=p(()=>route().params),d=y({search:f.value.search,entries:f.value.entries||"10",status:f.value.status}),v=D({create:{dialogIsOpen:!1}}),S=p(()=>[{title:"Dashboard",href:route("dashboard",{tenant:(t==null?void 0:t.id)||""})},{title:"Plants",href:route("plants.index",{tenant:(t==null?void 0:t.id)||""})},{title:n.plant.name,href:"#"},{title:"Operations",href:route("plants.operations.index",{tenant:(t==null?void 0:t.id)||"",plant:n.plant.id})}]),h=()=>N.visit(route("plants.operations.index",{...z(d.data()),tenant:(t==null?void 0:t.id)||"",plant:n.plant.id}),{preserveScroll:!0,preserveState:!0}),k=()=>{d.reset(),h()},V=[{accessorKey:"actions",header:()=>o("div",null,"Actions"),cell:({row:s})=>{const a=s.original;return o("div",{class:"flex items-center gap-2"},[o(j,{value:a.status.switch,method:"put",href:route("plants.operations.toggleStatus",{tenant:(t==null?void 0:t.id)||"",plant:n.plant.id,operation:a.id})}),o(c,{text:"Edit",href:route("plants.operations.edit",{tenant:(t==null?void 0:t.id)||"",plant:n.plant.id,operation:a.id}),icon:H}),o(c,{text:"Users",href:route("plants.operations.users.index",{tenant:(t==null?void 0:t.id)||"",plant:n.plant.id,operation:a.id}),icon:de}),o(c,{text:"Tasks",href:route("plants.operations.tasks.index",{tenant:(t==null?void 0:t.id)||"",plant:n.plant.id,operation:a.id}),icon:ne}),o(G,{title:`Delete ${a.name}`,route:route("plants.operations.destroy",{tenant:(t==null?void 0:t.id)||"",plant:n.plant.id,operation:a.id}),asChild:!1},()=>o(c,{variant:"destructive",text:"Delete",icon:J}))])}},{accessorKey:"status",header:()=>o("div",null,"Status"),cell:({row:s})=>{const{status:a}=s.original;return o(E,{statusBadge:a.badge})}},{accessorKey:"id",header:()=>o("div",null,"Id"),cell:({row:s})=>o("div",null,s.getValue("id"))},{accessorKey:"name",header:()=>o("div",null,"Name"),cell:({row:s})=>o("div",null,s.getValue("name"))},{accessorKey:"code",header:()=>o("div",null,"Code"),cell:({row:s})=>o("div",null,s.getValue("code"))},{accessorKey:"description",header:()=>o("div",null,"Description"),cell:({row:s})=>o("div",null,s.getValue("description"))},{accessorKey:"created_at",header:()=>o("div",null,"Created At"),cell:({row:s})=>o("div",null,_(s.getValue("created_at"))||"")},{accessorKey:"updated_at",header:()=>o("div",null,"Updated At"),cell:({row:s})=>o("div",null,_(s.getValue("updated_at"))||"")}],$={id:!1,description:!1},I=p(()=>{var s;return!!((s=n.options.switch.statuses.find(a=>a.is_default))!=null&&s.value)}),U=p(()=>{var s;return((s=n.options.switch.statuses.find(a=>a.value===r.status))==null?void 0:s.name)??re[le.INACTIVE]}),r=y({name:"",code:"",description:"",status:I.value}),w=()=>r.post(route("plants.operations.store",{tenant:(t==null?void 0:t.id)||"",plant:n.plant.id}),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{r.reset(),v.create.dialogIsOpen=!1}});return T(()=>r.name,s=>{r.code=ie(s)}),(s,a)=>(O(),K(A,null,[i(e(M),{title:"Operations"}),i(se,{breadcrumbs:S.value},{default:u(()=>[i(e(X),null,{default:u(()=>[m("div",pe,[i(e(F),{onSearch:h,onReset:k},{default:u(()=>[i(e(q),{label:"Name",placeholder:"Search ID, Name, Code","model-value":e(d).search,"onUpdate:modelValue":a[0]||(a[0]=l=>e(d).search=l)},null,8,["model-value"]),i(e(P),{label:"Status",placeholder:"Select Status",options:s.options.select.statuses,multiple:"","model-value":e(d).status,"onUpdate:modelValue":a[1]||(a[1]=l=>e(d).status=l)},null,8,["options","model-value"])]),_:1}),m("div",ue,[i(e(te),{title:"Create Operation",open:v.create.dialogIsOpen,"onUpdate:open":a[6]||(a[6]=l=>v.create.dialogIsOpen=l)},{default:u(()=>[m("form",{onSubmit:L(w,["prevent"]),class:"space-y-4"},[i(e(g),{label:"Name",error:e(r).errors.name,"model-value":e(r).name,"onUpdate:modelValue":a[2]||(a[2]=l=>e(r).name=l)},null,8,["error","model-value"]),i(e(g),{label:"Code",error:e(r).errors.code,"model-value":e(r).code,"onUpdate:modelValue":a[3]||(a[3]=l=>e(r).code=l)},null,8,["error","model-value"]),i(e(ee),{label:"Description",error:e(r).errors.description,"model-value":e(r).description,"onUpdate:modelValue":a[4]||(a[4]=l=>e(r).description=l)},null,8,["error","model-value"]),i(e(Z),{label:U.value,error:e(r).errors.status,"model-value":e(r).status,"onUpdate:modelValue":a[5]||(a[5]=l=>e(r).status=l)},null,8,["label","error","model-value"]),i(e(Y),{type:"submit",disabled:e(r).processing,loading:e(r).processing},null,8,["disabled","loading"])],32)]),_:1},8,["open"])]),m("div",null,[i(e(R),{"model-value":e(d),"onUpdate:modelValue":a[7]||(a[7]=l=>B(d)?d.value=l:null),columns:V,"paginate-data":s.operations,"column-visibility":$,"entry-options":e(W),onSearch:h},null,8,["model-value","paginate-data","entry-options"])])])]),_:1})]),_:1},8,["breadcrumbs"])],64))}});export{je as default};
