import{d as S,z as L,c as k,x as j,j as F,m as x,a as c,o as m,e as a,u as t,g as T,w as d,b as i,f as z,i as v,h as p,t as y,F as V,v as A,q as O}from"./app-KSbgUuIU.js";import{u as R,_ as G,a as H,P as I}from"./MaterialSelect.vue_vue_type_script_setup_true_lang-Ck9vEjDQ.js";import{_ as $}from"./index-CYBbWwLu.js";import{_ as w}from"./Input.vue_vue_type_script_setup_true_lang-B4lqTRAY.js";import{_ as f}from"./Label.vue_vue_type_script_setup_true_lang-BQ1of87h.js";import{_ as J,L as K}from"./Switch.vue_vue_type_script_setup_true_lang-m9ul1BKW.js";import{_ as Q}from"./Textarea.vue_vue_type_script_setup_true_lang-ybfpBnld.js";import{u as W,_ as X}from"./AppLayout.vue_vue_type_script_setup_true_lang-AZ2PnkQR.js";import{_ as Y}from"./AppMainLayout.vue_vue_type_script_setup_true_lang-CmtaUbgQ.js";import{s as Z}from"./slug-xwoAxeGq.js";import"./Select.vue_vue_type_script_setup_true_lang-BILVJfgr.js";import"./RovingFocusGroup-CJwQLeDY.js";import"./useForwardExpose-BCGP6J9B.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-B0BTTmgX.js";import"./check-DTeDlD4X.js";import"./useFormControl-AaFHe1Yj.js";import"./VisuallyHiddenInput-CPNnyZE-.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CRRCczxj.js";import"./index-T6uICwUp.js";const ee={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},te={class:"space-y-3"},se={class:"grid w-full items-center gap-1.5"},oe={key:0,class:"text-destructive"},ae={class:"grid w-full items-center gap-1.5"},re={key:0,class:"text-destructive"},le={class:"grid w-full items-center gap-1.5"},ie={key:0,class:"text-destructive"},ue={class:"space-y-3"},de={class:"space-y-3"},ne={class:"flex items-center justify-center"},me={class:"grid w-full items-center gap-1.5"},pe={class:"flex items-center space-x-2"},ce={key:0,class:"text-destructive"},_e={class:"flex gap-2"},Pe=S({layout:Y,__name:"Create",props:{product:{},materials:{},active_materials:{},options:{}},setup(U){const n=U,{tenant:r}=W(),{uuid:b}=R(),B=[{title:"Dashboard",href:route("dashboard",{tenant:(r==null?void 0:r.id)||""})},{title:"Products",href:route("products.index",{tenant:(r==null?void 0:r.id)||""})},{title:n.product.name,href:"#"},{title:"Boms",href:route("products.boms.index",{tenant:(r==null?void 0:r.id)||"",product:n.product.id})},{title:"Create",href:route("products.boms.create",{tenant:(r==null?void 0:r.id)||"",product:n.product.id})}],C={data:null,quantity:"",unit_type:""},u=L([{...C,key:b()}]),h=k(()=>{var o;return(o=n.options.statuses.find(e=>e.is_default))==null?void 0:o.value}),M=k(()=>{var o;return(o=n.options.statuses.find(e=>s.status?e.value:!e.value))==null?void 0:o.name}),N=k(()=>n.active_materials.map(o=>({name:o.name,value:o}))),s=j({name:"",code:"",description:"",materials:[],status:h.value!==void 0?h.value:1}),g=F({status:!!s.status}),D=()=>{u.value=[...u.value,{...C,key:b()}]},q=o=>{u.value=u.value.filter(e=>e.key!==o)},E=()=>s.post(route("products.boms.store",{tenant:(r==null?void 0:r.id)||"",product:n.product.id}));return x(u,o=>{s.materials=o.map(e=>{var l;return{key:e.key,id:((l=e.data)==null?void 0:l.id)||"",quantity:e.quantity,unit_type:e.unit_type}})},{immediate:!0,deep:!0}),x(()=>s.name,o=>{s.code=Z(o)}),x(()=>g.status,o=>{var l;const e=(l=n.options.statuses.find(_=>o?_.value===1:_.value===0))==null?void 0:l.value;e!==void 0&&(s.status=e)}),(o,e)=>(m(),c(V,null,[a(t(T),{title:"Create Product Bom"}),a(X,{breadcrumbs:B},{default:d(()=>[i("div",ee,[i("div",te,[i("form",{onSubmit:z(E,["prevent"]),class:"space-y-4"},[i("div",se,[a(t(f),null,{default:d(()=>e[4]||(e[4]=[p("Name")])),_:1,__:[4]}),a(t(w),{type:"text",placeholder:"Enter Name","model-value":t(s).name,"onUpdate:modelValue":e[0]||(e[0]=l=>t(s).name=l)},null,8,["model-value"]),t(s).errors.name?(m(),c("p",oe,y(t(s).errors.name),1)):v("",!0)]),i("div",ae,[a(t(f),null,{default:d(()=>e[5]||(e[5]=[p("Code")])),_:1,__:[5]}),a(t(w),{type:"text",placeholder:"Enter Code","model-value":t(s).code,"onUpdate:modelValue":e[1]||(e[1]=l=>t(s).code=l)},null,8,["model-value"]),t(s).errors.code?(m(),c("p",re,y(t(s).errors.code),1)):v("",!0)]),i("div",le,[a(t(f),null,{default:d(()=>e[6]||(e[6]=[p("Description")])),_:1,__:[6]}),a(t(Q),{placeholder:"Enter Description","model-value":t(s).description,"onUpdate:modelValue":e[2]||(e[2]=l=>t(s).description=l)},null,8,["model-value"]),t(s).errors.description?(m(),c("p",ie,y(t(s).errors.description),1)):v("",!0)]),i("div",ue,[i("div",null,[a(t(f),{class:"mb-1"},{default:d(()=>e[7]||(e[7]=[p("Materials")])),_:1,__:[7]})]),i("div",de,[(m(!0),c(V,null,A(u.value,(l,_)=>(m(),c("div",{key:l.key,class:"space-y-1"},[a(t(G),{"material-options":N.value,"unit-type-options":o.options.unit_types,"total-selected":u.value.length,"model-value":u.value[_],"onUpdate:modelValue":P=>u.value[_]=P,onRemove:q},null,8,["material-options","unit-type-options","total-selected","model-value","onUpdate:modelValue"]),a(t(H),{"error-key":`materials.${_}`},null,8,["error-key"])]))),128))]),i("div",ne,[a(t($),{type:"button",class:"cursor-pointer",variant:"outline",onClick:D},{default:d(()=>[a(t(I)),e[8]||(e[8]=p(" Add Material"))]),_:1,__:[8]})])]),i("div",me,[a(t(f),{class:"mb-1"},{default:d(()=>e[9]||(e[9]=[p("Status")])),_:1,__:[9]}),i("div",pe,[a(t(J),{class:"cursor-pointer","model-value":g.status,"onUpdate:modelValue":e[3]||(e[3]=l=>g.status=l)},null,8,["model-value"]),a(t(f),null,{default:d(()=>[p(y(M.value),1)]),_:1})]),t(s).errors.status?(m(),c("p",ce,y(t(s).errors.status),1)):v("",!0)]),i("div",_e,[a(t($),{type:"submit",class:"cursor-pointer",disabled:t(s).processing},{default:d(()=>[t(s).processing?(m(),O(t(K),{key:0,class:"animate-spin"})):v("",!0),e[10]||(e[10]=p(" Create "))]),_:1,__:[10]},8,["disabled"])])],32)])])]),_:1})],64))}});export{Pe as default};
