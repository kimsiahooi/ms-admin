import{d as M,c as n,A as N,x as q,j as y,a as c,o as f,e as r,u as e,g as L,w as m,b as d,f as P,q as b,F as g,v as A}from"./app-BgTXa90_.js";import{_ as D}from"./Card.vue_vue_type_script_setup_true_lang-CNAuYvQV.js";import{L as T}from"./index-BvCIcig5.js";import{_ as j}from"./FormError.vue_vue_type_script_setup_true_lang-BVg2IwEG.js";import{_ as E}from"./index-gvFlOA9A.js";import{_ as F}from"./Label.vue_vue_type_script_setup_true_lang-DfAzriwx.js";import{_ as k}from"./FormInput.vue_vue_type_script_setup_true_lang-Bcig7n-I.js";import{_ as I}from"./FormSwitch.vue_vue_type_script_setup_true_lang-D0NXErWG.js";import{_ as O}from"./FormTextarea.vue_vue_type_script_setup_true_lang-S96odKLP.js";import{S as R,a as z,_ as G}from"./index-jWMcaEze.js";import{u as H,_ as J}from"./AppLayout.vue_vue_type_script_setup_true_lang-CdHOQRKV.js";import{u as K,P as Q}from"./useUuid-rYsxxeMQ.js";import{_ as W}from"./AppMainLayout.vue_vue_type_script_setup_true_lang-k-gsNc47.js";import{s as X}from"./slug-xwoAxeGq.js";import"./useForwardExpose-rU1I-y_0.js";import"./Input.vue_vue_type_script_setup_true_lang-CoLfU2BV.js";import"./Switch.vue_vue_type_script_setup_true_lang-C_f7LROW.js";import"./RovingFocusGroup-Cq5P6bq-.js";import"./useFormControl-D4E9fVKJ.js";import"./VisuallyHiddenInput-DKmQAXjO.js";import"./FormCombobox.vue_vue_type_script_setup_true_lang-C_d6RY7a.js";import"./check-DnxLo8EA.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-COVDtZ7L.js";import"./chevron-down-53sWXJgT.js";import"./FormSelect.vue_vue_type_script_setup_true_lang-BUhXvjY-.js";import"./Select.vue_vue_type_script_setup_true_lang-1hEi5SeN.js";import"./nullish-CHIgUVhi.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-a7lEFZeV.js";const Y={class:"space-y-3"},Z={class:"space-y-3"},ee={class:"space-y-3"},te={class:"flex items-center justify-center"},Me=M({layout:W,__name:"Create",props:{product:{},materials:{},options:{}},setup(C){const u=C,{tenant:a}=H(),{uuid:_}=K(),V=n(()=>[{title:"Dashboard",href:route("dashboard",{tenant:(a==null?void 0:a.id)||""})},{title:"Products",href:route("products.index",{tenant:(a==null?void 0:a.id)||""})},{title:u.product.name,href:"#"},{title:"Boms",href:route("products.boms.index",{tenant:(a==null?void 0:a.id)||"",product:u.product.id})},{title:"Create",href:route("products.boms.create",{tenant:(a==null?void 0:a.id)||"",product:u.product.id})}]),v={data:null,quantity:"",unit_type:""},l=N([{...v,key:_()}]),$=n(()=>{var s;return!!((s=u.options.switch.statuses.find(t=>t.is_default))!=null&&s.value)}),x=n(()=>{var s;return((s=u.options.switch.statuses.find(t=>t.value===o.status))==null?void 0:s.name)??R[z.INACTIVE]}),S=n(()=>u.materials.map(s=>({name:s.name,value:s}))),o=q({name:"",code:"",description:"",materials:[],status:$.value}),U=()=>{l.value=[...l.value,{...v,key:_()}]},h=s=>{l.value=l.value.filter(t=>t.key!==s)},w=()=>o.post(route("products.boms.store",{tenant:(a==null?void 0:a.id)||"",product:u.product.id}),{preserveScroll:!0,preserveState:!0});return y(l,s=>{o.materials=s.map(t=>{var i;return{key:t.key,id:((i=t.data)==null?void 0:i.id)||"",quantity:t.quantity,unit_type:t.unit_type}})},{immediate:!0,deep:!0}),y(()=>o.name,s=>{o.code=X(s)}),(s,t)=>(f(),c(g,null,[r(e(L),{title:"Create Product Bom"}),r(J,{breadcrumbs:V.value},{default:m(()=>[r(e(T),null,{default:m(()=>[d("div",Y,[d("form",{onSubmit:P(w,["prevent"])},[r(e(D),{title:"Create Bom"},{default:m(()=>[r(e(k),{label:"Name",error:e(o).errors.name,"model-value":e(o).name,"onUpdate:modelValue":t[0]||(t[0]=i=>e(o).name=i)},null,8,["error","model-value"]),r(e(k),{label:"Code",error:e(o).errors.code,"model-value":e(o).code,"onUpdate:modelValue":t[1]||(t[1]=i=>e(o).code=i)},null,8,["error","model-value"]),r(e(O),{label:"Description",error:e(o).errors.description,"model-value":e(o).description,"onUpdate:modelValue":t[2]||(t[2]=i=>e(o).description=i)},null,8,["error","model-value"]),d("div",Z,[d("div",null,[r(e(F),{class:"mb-1"},{default:m(()=>t[4]||(t[4]=[b("Materials:")])),_:1,__:[4]})]),d("div",ee,[(f(!0),c(g,null,A(l.value,(i,p)=>(f(),c("div",{key:i.key,class:"space-y-1"},[r(e(G),{"material-options":S.value,"unit-type-options":s.options.select.unit_types,"total-selected":l.value.length,"model-value":l.value[p],"onUpdate:modelValue":B=>l.value[p]=B,"curr-index":p,onRemove:h},null,8,["material-options","unit-type-options","total-selected","model-value","onUpdate:modelValue","curr-index"])]))),128))]),d("div",te,[r(e(E),{type:"button",class:"cursor-pointer",variant:"outline",onClick:U},{default:m(()=>[r(e(Q)),t[5]||(t[5]=b(" Add Material"))]),_:1,__:[5]})])]),r(e(I),{label:x.value,error:e(o).errors.status,"model-value":e(o).status,"onUpdate:modelValue":t[3]||(t[3]=i=>e(o).status=i)},null,8,["label","error","model-value"]),r(e(j),{type:"submit",disabled:e(o).processing,loading:e(o).processing},null,8,["disabled","loading"])]),_:1})],32)])]),_:1})]),_:1},8,["breadcrumbs"])],64))}});export{Me as default};
