import{d as z,c as x,j as b,x as N,m as T,a as m,o as p,e as i,u as s,g as U,w as c,b as u,f as E,i as f,h as d,t as _,q as F,W as j,k as o,F as L,S as M}from"./app-KSbgUuIU.js";import{p as W,_ as V,P as q,a as H,T as G,b as J}from"./pickBy-OLrpSmxv.js";import{_ as Q}from"./Dialog.vue_vue_type_script_setup_true_lang-GgexZgWT.js";import{_ as R}from"./Select.vue_vue_type_script_setup_true_lang-BILVJfgr.js";import{_ as X,e as Y}from"./options-CxoPM4-n.js";import{_ as v}from"./index-CYBbWwLu.js";import{_ as Z}from"./Input.vue_vue_type_script_setup_true_lang-B4lqTRAY.js";import{_ as g}from"./Label.vue_vue_type_script_setup_true_lang-BQ1of87h.js";import{_ as ee,L as se}from"./Switch.vue_vue_type_script_setup_true_lang-m9ul1BKW.js";import{u as te,_ as re}from"./AppLayout.vue_vue_type_script_setup_true_lang-AZ2PnkQR.js";import{_ as oe}from"./AppMainLayout.vue_vue_type_script_setup_true_lang-CmtaUbgQ.js";import"./DialogTrigger.vue_vue_type_script_setup_true_lang-1WHSHCLR.js";import"./RovingFocusGroup-CJwQLeDY.js";import"./useForwardExpose-BCGP6J9B.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-B0BTTmgX.js";import"./check-DTeDlD4X.js";import"./useFormControl-AaFHe1Yj.js";import"./VisuallyHiddenInput-CPNnyZE-.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CRRCczxj.js";import"./index-T6uICwUp.js";const ae={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},ie={class:"space-y-3"},le={class:"flex flex-wrap items-center justify-end gap-2"},ue={class:"grid w-full max-w-sm items-center gap-1.5"},ne={key:0,class:"text-destructive"},ce={class:"grid w-full max-w-sm items-center gap-1.5"},de={key:0,class:"text-destructive"},pe={class:"grid w-full max-w-sm items-center gap-1.5"},me={class:"flex items-center space-x-2"},fe={key:0,class:"text-destructive"},_e={class:"flex gap-2"},Ne=z({layout:oe,__name:"Index",props:{product:{},prices:{},options:{}},setup(k){const n=k,{tenant:r}=te(),C=x(()=>route().params),S=b({search:C.value.search,entries:C.value.entries||"10"}),y=b({create:{dialogIsOpen:!1}}),P={placeholder:"Search name..."},I=[{title:"Dashboard",href:route("dashboard",{tenant:(r==null?void 0:r.id)||""})},{title:"Products",href:route("products.index",{tenant:(r==null?void 0:r.id)||""})},{title:n.product.name,href:"#"},{title:"Prices",href:route("products.prices.index",{tenant:(r==null?void 0:r.id)||"",product:n.product.id})}],A=t=>j.visit(route("products.prices.index",{...W(t),tenant:(r==null?void 0:r.id)||"",product:n.product.id})),B={id:!1},D=[{accessorKey:"actions",header:()=>o("div",null,"Actions"),cell:({row:t})=>{const e=t.original;return o("div",{class:"flex items-center gap-2"},[o(V,{text:"Edit"},()=>o(M,{href:route("products.prices.edit",{tenant:(r==null?void 0:r.id)||"",product:n.product.id,price:e.id}),asChild:!0},()=>o(v,{class:"h-auto size-6 cursor-pointer rounded-full"},()=>o(q,{class:"size-3"})))),o(H,{title:`Delete ${e.currency}`,route:route("products.prices.destroy",{tenant:(r==null?void 0:r.id)||"",product:n.product.id,price:e.id}),asChild:!1},()=>o(V,{text:"Delete"},()=>o(v,{class:"h-auto size-6 cursor-pointer rounded-full",variant:"destructive"},()=>o(G,{class:"size-3"}))))])}},{accessorKey:"status",header:()=>o("div",null,"Active"),cell:({row:t})=>{const{status:e,status_label:l}=t.original;return o(J,{variant:e?"default":"destructive"},()=>l)}},{accessorKey:"id",header:()=>o("div",null,"Id"),cell:({row:t})=>o("div",null,t.getValue("id"))},{accessorKey:"currency",header:()=>o("div",null,"Currency"),cell:({row:t})=>o("div",null,t.getValue("currency"))},{accessorKey:"amount",header:()=>o("div",null,"Amount"),cell:({row:t})=>o("div",null,t.getValue("amount"))}],$=x(()=>{var t;return(t=n.options.statuses.find(e=>e.is_default))==null?void 0:t.value}),K=x(()=>{var t;return(t=n.options.statuses.find(e=>a.status?e.value:!e.value))==null?void 0:t.name}),a=N({currency:"",amount:"",status:$.value!==void 0?$.value:1}),h=b({status:!!a.status}),O=()=>a.post(route("products.prices.store",{tenant:(r==null?void 0:r.id)||"",product:n.product.id}),{onSuccess:()=>{a.reset(),y.create.dialogIsOpen=!1}});return T(()=>h.status,t=>{var l;const e=(l=n.options.statuses.find(w=>t?w.value===1:w.value===0))==null?void 0:l.value;e!==void 0&&(a.status=e)}),(t,e)=>(p(),m(L,null,[i(s(U),{title:"Product Prices"}),i(re,{breadcrumbs:I},{default:c(()=>[u("div",ae,[u("div",ie,[u("div",le,[i(s(Q),{title:"Create Price",open:y.create.dialogIsOpen,"onUpdate:open":e[3]||(e[3]=l=>y.create.dialogIsOpen=l)},{trigger:c(()=>[i(s(v),{class:"cursor-pointer"},{default:c(()=>e[4]||(e[4]=[d("Create")])),_:1,__:[4]})]),default:c(()=>[u("form",{onSubmit:E(O,["prevent"]),class:"space-y-4"},[u("div",ue,[i(s(g),null,{default:c(()=>e[5]||(e[5]=[d("Currency")])),_:1,__:[5]}),i(s(R),{options:t.options.currencies,placeholder:"Select Currency","model-value":s(a).currency,"onUpdate:modelValue":e[0]||(e[0]=l=>s(a).currency=l),"trigger-class":"w-full"},null,8,["options","model-value"]),s(a).errors.currency?(p(),m("p",ne,_(s(a).errors.currency),1)):f("",!0)]),u("div",ce,[i(s(g),null,{default:c(()=>e[6]||(e[6]=[d("Amount")])),_:1,__:[6]}),i(s(Z),{type:"number",placeholder:"Enter Amount","model-value":s(a).amount,"onUpdate:modelValue":e[1]||(e[1]=l=>s(a).amount=l),"model-valueModifiers":{number:!0},step:".01",min:"0"},null,8,["model-value"]),s(a).errors.amount?(p(),m("p",de,_(s(a).errors.amount),1)):f("",!0)]),u("div",pe,[i(s(g),{class:"mb-1"},{default:c(()=>e[7]||(e[7]=[d("Status")])),_:1,__:[7]}),u("div",me,[i(s(ee),{class:"cursor-pointer","model-value":h.status,"onUpdate:modelValue":e[2]||(e[2]=l=>h.status=l)},null,8,["model-value"]),i(s(g),null,{default:c(()=>[d(_(K.value),1)]),_:1})]),s(a).errors.status?(p(),m("p",fe,_(s(a).errors.status),1)):f("",!0)]),u("div",_e,[i(s(v),{type:"submit",class:"cursor-pointer",disabled:s(a).processing},{default:c(()=>[s(a).processing?(p(),F(s(se),{key:0,class:"animate-spin"})):f("",!0),e[8]||(e[8]=d(" Create "))]),_:1,__:[8]},8,["disabled"])])],32)]),_:1},8,["open"])]),u("div",null,[i(s(X),{columns:D,"paginate-data":t.prices,"column-visibility":B,filter:S,"entry-options":s(Y),"search-config":P,onFilterChange:A},null,8,["paginate-data","filter","entry-options"])])])])]),_:1})],64))}});export{Ne as default};
