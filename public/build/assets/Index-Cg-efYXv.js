import{d as L,c as h,r as g,x as N,f as C,a as q,o as w,e as i,u as t,g as B,w as c,b as m,W as T,h as O,i as r,F as k,S as F}from"./app-Bpp2Ep_u.js";import{_ as M,a as Q,b as W}from"./StatusSwitch.vue_vue_type_script_setup_true_lang-W1CIgrju.js";import{_ as j,a as R,b as z,e as G,p as H,c as $,P as J,d as X,T as Y,u as Z}from"./pickBy-V1SMm1A7.js";import{_ as ee}from"./index-C6fWEfII.js";import{L as te}from"./index-DfOI-09q.js";import{_ as n,a as le}from"./FormInput.vue_vue_type_script_setup_true_lang-DpYkQWZj.js";import{_ as f}from"./FormSelect.vue_vue_type_script_setup_true_lang-DS1JOaSZ.js";import{_ as se}from"./FormSwitch.vue_vue_type_script_setup_true_lang-rNDFlZ_x.js";import{_ as re}from"./FormTextarea.vue_vue_type_script_setup_true_lang-BptgrTO4.js";import{_ as oe}from"./Dialog.vue_vue_type_script_setup_true_lang-CNkUMidd.js";import{u as ae,_ as ie}from"./AppLayout.vue_vue_type_script_setup_true_lang-BF1Gl5Ph.js";import{_ as de}from"./AppMainLayout.vue_vue_type_script_setup_true_lang-ByRRqFff.js";import{a as p,S as ue}from"./index-DCAYh28I.js";import{s as ne}from"./slug-xwoAxeGq.js";import"./useForwardExpose-rOcx7BkQ.js";import"./Label.vue_vue_type_script_setup_true_lang-xwMa4j3f.js";import"./Select.vue_vue_type_script_setup_true_lang-qBXRkwJR.js";import"./RovingFocusGroup-bXShlB3H.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-OVzfARf1.js";import"./check-Bw0EwC7w.js";import"./useFormControl-a5l-P2b3.js";import"./Switch.vue_vue_type_script_setup_true_lang-BA_0ISoO.js";import"./VisuallyHiddenInput-CCj47bq6.js";import"./CardTitle.vue_vue_type_script_setup_true_lang-CWyXmvF6.js";import"./DialogTrigger.vue_vue_type_script_setup_true_lang-DHlMUJZx.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-D4rF7PW5.js";const pe={class:"space-y-3"},ce={class:"flex flex-wrap items-center justify-end gap-2"},Oe=L({layout:de,__name:"Index",props:{product:{},presets:{},options:{}},setup(U){const d=U,{tenant:a}=ae(),{formatDateTime:b}=Z(),v=h(()=>route().params),u=g({search:v.value.search,entries:v.value.entries||"10",status:v.value.status}),y=g({create:{dialogIsOpen:!1}}),K=[{title:"Dashboard",href:route("dashboard",{tenant:(a==null?void 0:a.id)||""})},{title:"Products",href:route("products.index",{tenant:(a==null?void 0:a.id)||""})},{title:d.product.name,href:"#"},{title:"Presets",href:route("products.presets.index",{tenant:(a==null?void 0:a.id)||"",product:d.product.id})}],V=()=>T.visit(route("products.presets.index",{...H(u),tenant:(a==null?void 0:a.id)||"",product:d.product.id}),{preserveScroll:!0,preserveState:!0}),I=()=>T.visit(route("products.presets.index",{tenant:(a==null?void 0:a.id)||"",product:d.product.id})),D={id:!1,description:!1},x=[{accessorKey:"actions",header:()=>r("div",null,"Actions"),cell:({row:l})=>{const e=l.original;return r("div",{class:"flex items-center gap-2"},[r(Q,{value:e.status.switch,method:"put",href:route("products.presets.toggleStatus",{tenant:(a==null?void 0:a.id)||"",product:d.product.id,preset:e.id})}),r($,{text:"Edit",href:route("products.presets.edit",{tenant:(a==null?void 0:a.id)||"",product:d.product.id,preset:e.id}),icon:J}),r(X,{title:`Delete ${e.name}`,route:route("products.presets.destroy",{tenant:(a==null?void 0:a.id)||"",product:d.product.id,preset:e.id}),asChild:!1},()=>r($,{variant:"destructive",text:"Delete",icon:Y}))])}},{accessorKey:"status",header:()=>r("div",null,"Status"),cell:({row:l})=>{const{status:e}=l.original;return r(W,{statusBadge:e.badge})}},{accessorKey:"id",header:()=>r("div",null,"Id"),cell:({row:l})=>r("div",null,l.getValue("id"))},{accessorKey:"machine",header:()=>r("div",null,"Machine"),cell:({row:l})=>{const{machine:e}=l.original;return e?r(F,{href:route("machines.index",{tenant:(a==null?void 0:a.id)||"",search:(e==null?void 0:e.id)||""})},()=>r(ee,{class:"cursor-pointer",variant:"link"},()=>e==null?void 0:e.name)):null}},{accessorKey:"name",header:()=>r("div",null,"Name"),cell:({row:l})=>r("div",null,l.getValue("name"))},{accessorKey:"code",header:()=>r("div",null,"Code"),cell:({row:l})=>r("div",null,l.getValue("code"))},{accessorKey:"description",header:()=>r("div",null,"Description"),cell:({row:l})=>r("div",null,l.getValue("description"))},{accessorKey:"cavity_quantity",header:()=>r("div",null,"Cavity Quantity"),cell:({row:l})=>r("div",null,l.getValue("cavity_quantity"))},{accessorKey:"cavity_type",header:()=>r("div",null,"Cavity Type"),cell:({row:l})=>{const{cavity_type_label:e}=l.original;return r("div",null,e||"")}},{accessorKey:"cycle_time",header:()=>r("div",null,"Cycle Time"),cell:({row:l})=>r("div",null,l.getValue("cycle_time"))},{accessorKey:"cycle_time_type",header:()=>r("div",null,"Cycle Time Type"),cell:({row:l})=>{const{cycle_time_type_label:e}=l.original;return r("div",null,e||"")}},{accessorKey:"shelf_life_duration",header:()=>r("div",null,"Shelf Life Duration"),cell:({row:l})=>r("div",null,l.original.shelf_life_duration||"")},{accessorKey:"shelf_life_type",header:()=>r("div",null,"Shelf Life Type"),cell:({row:l})=>r("div",null,l.original.shelf_life_type_label||"")},{accessorKey:"created_at",header:()=>r("div",null,"Created At"),cell:({row:l})=>r("div",null,b(l.getValue("created_at"))||"")},{accessorKey:"updated_at",header:()=>r("div",null,"Updated At"),cell:({row:l})=>r("div",null,b(l.getValue("updated_at"))||"")}],A=h(()=>{var l;return((l=d.options.statuses.find(e=>e.is_default))==null?void 0:l.value)??p.ACTIVE}),P=h(()=>{var l;return((l=d.options.statuses.find(e=>e.value===s.status))==null?void 0:l.name)??ue[p.ACTIVE]}),s=N({machine_id:"",name:"",code:"",description:"",cavity_quantity:"",cavity_type:"",cycle_time:"",cycle_time_type:"",shelf_life_duration:"",shelf_life_type:"",status:A.value}),_=g({status:s.status===p.ACTIVE}),E=()=>s.post(route("products.presets.store",{tenant:(a==null?void 0:a.id)||"",product:d.product.id}),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{s.reset(),y.create.dialogIsOpen=!1}});return C(()=>s.name,l=>{s.code=ne(l)}),C(()=>_.status,l=>{var o;const e=(o=d.options.statuses.find(S=>l?S.value===p.ACTIVE:S.value===p.INACTIVE))==null?void 0:o.value;e!==void 0&&(s.status=e)}),(l,e)=>(w(),q(k,null,[i(t(B),{title:"Product Presets"}),i(ie,{breadcrumbs:K},{default:c(()=>[i(t(te),null,{default:c(()=>[m("div",pe,[i(t(j),{onSearch:V,onReset:I},{default:c(()=>[i(t(R),{label:"Name",placeholder:"Search ID, Name, Code","model-value":u.search,"onUpdate:modelValue":e[0]||(e[0]=o=>u.search=o)},null,8,["model-value"]),i(t(M),{label:"Status",placeholder:"Select Status",options:l.options.statuses,multiple:"","model-value":u.status,"onUpdate:modelValue":e[1]||(e[1]=o=>u.status=o)},null,8,["options","model-value"])]),_:1}),m("div",ce,[i(t(oe),{title:"Create Preset",open:y.create.dialogIsOpen,"onUpdate:open":e[13]||(e[13]=o=>y.create.dialogIsOpen=o)},{default:c(()=>[m("form",{onSubmit:O(E,["prevent"]),class:"space-y-4"},[i(t(n),{label:"Name",error:t(s).errors.name,"model-value":t(s).name,"onUpdate:modelValue":e[2]||(e[2]=o=>t(s).name=o)},null,8,["error","model-value"]),i(t(n),{label:"Code",error:t(s).errors.code,"model-value":t(s).code,"onUpdate:modelValue":e[3]||(e[3]=o=>t(s).code=o)},null,8,["error","model-value"]),i(t(re),{label:"Description",error:t(s).errors.description,"model-value":t(s).description,"onUpdate:modelValue":e[4]||(e[4]=o=>t(s).description=o)},null,8,["error","model-value"]),i(t(f),{label:"Machine",options:l.options.machines,"model-value":t(s).machine_id,"onUpdate:modelValue":e[5]||(e[5]=o=>t(s).machine_id=o),error:t(s).errors.machine_id},null,8,["options","model-value","error"]),i(t(n),{label:"Cavity Quantity",error:t(s).errors.cavity_quantity,"model-value":t(s).cavity_quantity,"onUpdate:modelValue":e[6]||(e[6]=o=>t(s).cavity_quantity=o),type:"number",min:"0.01",step:".01"},null,8,["error","model-value"]),i(t(f),{label:"Cavity Type",options:l.options.cavity_types,"model-value":t(s).cavity_type,"onUpdate:modelValue":e[7]||(e[7]=o=>t(s).cavity_type=o),error:t(s).errors.cavity_type},null,8,["options","model-value","error"]),i(t(n),{label:"Cycle Time",error:t(s).errors.cycle_time,"model-value":t(s).cycle_time,"onUpdate:modelValue":e[8]||(e[8]=o=>t(s).cycle_time=o),type:"number",min:"0.01",step:".01"},null,8,["error","model-value"]),i(t(f),{label:"Cycle Time Type",options:l.options.cycle_time_types,"model-value":t(s).cycle_time_type,"onUpdate:modelValue":e[9]||(e[9]=o=>t(s).cycle_time_type=o),error:t(s).errors.cycle_time_type},null,8,["options","model-value","error"]),i(t(n),{label:"Shelf Life Duration",error:t(s).errors.shelf_life_duration,"model-value":t(s).shelf_life_duration,"onUpdate:modelValue":e[10]||(e[10]=o=>t(s).shelf_life_duration=o),type:"number",min:"0.01",step:".01"},null,8,["error","model-value"]),i(t(f),{label:"Shelf Life Type",options:l.options.shelf_life_types,"model-value":t(s).shelf_life_type,"onUpdate:modelValue":e[11]||(e[11]=o=>t(s).shelf_life_type=o),error:t(s).errors.shelf_life_type},null,8,["options","model-value","error"]),i(t(se),{label:P.value,error:t(s).errors.status,"model-value":_.status,"onUpdate:modelValue":e[12]||(e[12]=o=>_.status=o)},null,8,["label","error","model-value"]),i(t(le),{type:"submit",disabled:t(s).processing,loading:t(s).processing},null,8,["disabled","loading"])],32)]),_:1},8,["open"])]),m("div",null,[i(t(z),{"model-value":u,"onUpdate:modelValue":e[14]||(e[14]=o=>u=o),columns:x,"paginate-data":l.presets,"column-visibility":D,"entry-options":t(G),onSearch:V},null,8,["model-value","paginate-data","entry-options"])])])]),_:1})]),_:1})],64))}});export{Oe as default};
