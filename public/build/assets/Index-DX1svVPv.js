import{_ as q,s as G,a as J,b as Q,c as R,p as X,P as Y,T as Z,d as ee}from"./slug-BeFQHg8N.js";import{d as P,D as B,E as te,m as E,q as M,o as u,w as d,e as i,u as t,n as se,a as m,F as O,v as S,h as p,t as v,l as z,c as x,i as b,j as N,x as ae,g as le,b as c,k as r,W as re}from"./app-hLTZKKNA.js";import{a as ie,b as oe,c as ne,d as de,f as ue,g as ce,_ as pe,e as me,u as _e}from"./options-BSXLfbRb.js";import{_ as C}from"./index-BcxVMgL_.js";import{_ as K}from"./Input.vue_vue_type_script_setup_true_lang-zEljMWzE.js";import{_ as y}from"./Label.vue_vue_type_script_setup_true_lang-C27sV_Dl.js";import{_ as ve}from"./AppLayout.vue_vue_type_script_setup_true_lang-Cvs4nYgb.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-37YaDHOI.js";import"./RovingFocusGroup-DnQrh03C.js";import"./useForwardExpose-BOXh8Utq.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-pWhXAl3H.js";import"./check-OPNJ8unJ.js";import"./VisuallyHiddenInput-B1DxAPdu.js";import"./index-C3u0oxK_.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-W9njKkAo.js";const fe=P({__name:"MultiSelect",props:B({options:{},placeholder:{},triggerClass:{}},{modelValue:{},modelModifiers:{}}),emits:B(["change"],["update:modelValue"]),setup(V,{emit:$}){const f=te(V,"modelValue"),h=$;return E(f,n=>{n&&h("change",n)}),(n,g)=>(u(),M(t(ue),{modelValue:f.value,"onUpdate:modelValue":g[0]||(g[0]=_=>f.value=_),multiple:""},{default:d(()=>[i(t(ie),{class:se(["min-w-40",n.triggerClass])},{default:d(()=>[i(t(oe),{placeholder:n.placeholder},null,8,["placeholder"])]),_:1},8,["class"]),i(t(ne),null,{default:d(()=>[i(t(de),null,{default:d(()=>[(u(!0),m(O,null,S(n.options,(_,w)=>(u(),M(t(ce),{key:w,value:_.value},{default:d(()=>[p(v(_.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),ge={key:0},ye=P({__name:"ErrorMessages",props:{errorKey:{}},setup(V){const $=V,f=z(),h=x(()=>Object.entries(f.props.errors).filter(([n])=>n.startsWith($.errorKey)).map(([n,g])=>({key:n,message:g})));return(n,g)=>h.value.length?(u(),m("div",ge,[(u(!0),m(O,null,S(h.value,_=>(u(),m("p",{key:_.key,class:"text-destructive"},v(_.message),1))),128))])):b("",!0)}}),he={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},xe={class:"space-y-3"},be={class:"flex flex-wrap items-center justify-end gap-2"},Ve={class:"grid w-full max-w-sm items-center gap-1.5"},$e={key:0,class:"text-destructive"},ke={class:"grid w-full max-w-sm items-center gap-1.5"},Ce={key:0,class:"text-destructive"},we={class:"grid w-full max-w-sm items-center gap-1.5"},De={key:0,class:"text-destructive"},Ue={class:"grid w-full max-w-sm items-center gap-1.5"},Ke={key:0,class:"text-destructive"},Ee={class:"grid w-full max-w-sm items-center gap-1.5"},Pe={class:"grid w-full max-w-sm items-center gap-1.5"},Oe={class:"flex items-center space-x-2"},Be={key:0,class:"text-destructive"},Qe=P({layout:q,__name:"Index",props:{products:{},statuses:{},options:{}},setup(V){const $=V,{formatDateTime:f}=_e(),h=z(),n=x(()=>{var s;return((s=h.props.tenant)==null?void 0:s.id)||""}),g=x(()=>route().params),_=N({search:g.value.search,entries:g.value.entries||"10"}),w={placeholder:"Search name..."},T=[{title:"Dashboard",href:route("dashboard",{tenant:n.value})},{title:"Products",href:route("products.index",{tenant:n.value})}],A=s=>{re.visit(route("products.index",{...X(s),tenant:n.value}))},F={description:!1},j=[{accessorKey:"actions",header:()=>r("div",null,"Actions"),cell:({row:s})=>{const e=s.original;return r("div",{class:"flex items-center gap-2"},[r(C,{class:"h-auto size-6 cursor-pointer rounded-full",onClick:()=>D("update",e)},()=>r(Y,{class:"size-3"})),r(C,{class:"h-auto size-6 cursor-pointer rounded-full",variant:"destructive",onClick:()=>D("destroy",e)},()=>r(Z,{class:"size-3"}))])}},{accessorKey:"id",header:()=>r("div",null,"ID"),cell:({row:s})=>{const e=s.original.id;return r("div",null,e)}},{accessorKey:"name",header:()=>r("div",null,"Name"),cell:({row:s})=>r("div",null,s.getValue("name"))},{accessorKey:"code",header:()=>r("div",null,"Code"),cell:({row:s})=>r("div",null,s.getValue("code"))},{accessorKey:"description",header:()=>r("div",null,"Description"),cell:({row:s})=>r("div",null,s.getValue("description"))},{accessorKey:"unit_price",header:()=>r("div",null,"Unit Price"),cell:({row:s})=>r("div",null,s.getValue("unit_price"))},{accessorKey:"is_active",header:()=>r("div",null,"Active"),cell:({row:s})=>{const{is_active:e,is_active_display:o}=s.original;return r(ee,{variant:e?"default":"destructive"},()=>o)}},{accessorKey:"created_at",header:()=>r("div",null,"Created At"),cell:({row:s})=>{const e=f(s.original.created_at);return e?r("div",null,e):r("div",null)}},{accessorKey:"updated_at",header:()=>r("div",null,"Updated At"),cell:({row:s})=>{const e=f(s.original.updated_at);return e?r("div",null,e):r("div",null)}}],l=N({type:null,title:"",isOpen:!1,data:null}),a=ae(l.type||"",{name:"",code:"",description:"",unit_price:"",is_active:!0,materials:[]}),L=x(()=>{var s;return(s=$.statuses.find(e=>a.is_active?e.value:!e.value))==null?void 0:s.name}),W=x(()=>l.type==="store"?"Create":l.type==="update"?"Update":"Delete"),H=x(()=>l.type==="destroy"?"destructive":"default"),D=(s,e)=>{var o,k;switch(s){case"store":l.title="Create Product";break;case"update":e&&(l.data=e,a.name=e.name,a.code=e.code,a.description=e.description||"",a.unit_price=+e.unit_price,a.is_active=e.is_active,a.materials=e.materials.map(U=>U.id)),l.title=`Edit ${((o=l.data)==null?void 0:o.name)||"Product"}`;break;case"destroy":e&&(l.data=e),l.title=`Delete ${((k=l.data)==null?void 0:k.name)||"Product"}`}l.type=s,l.isOpen=!0},I=()=>{var s,e;if(l.type){const o=l.type==="store"?route("products.store",{tenant:n.value}):l.type==="update"?route("products.update",{tenant:n.value,product:((s=l.data)==null?void 0:s.id)||""}):route("products.destroy",{tenant:n.value,product:((e=l.data)==null?void 0:e.id)||""}),k=l.type==="store"?"post":l.type==="update"?"put":"delete";a.transform(U=>l.type!=="destroy"?U:{}).submit(k,o,{onSuccess:()=>{a.reset(),l.isOpen=!1}})}};return E(()=>l.isOpen,s=>{s||(l.data=null,a.clearErrors(),a.reset())}),E([()=>a.name,()=>l.type],([s,e])=>{e==="store"&&(a.code=G(s))}),(s,e)=>(u(),m(O,null,[i(t(le),{title:"Products"}),i(ve,{breadcrumbs:T},{default:d(()=>[c("div",he,[c("div",xe,[c("div",be,[i(t(J),{open:l.isOpen,"onUpdate:open":e[7]||(e[7]=o=>l.isOpen=o),dialog:l,onSubmit:I},{button:d(()=>[i(t(C),{class:"cursor-pointer",onClick:e[0]||(e[0]=o=>D("store"))},{default:d(()=>e[8]||(e[8]=[p("Create")])),_:1,__:[8]})]),"submit-button":d(()=>[i(t(C),{type:"submit",class:"cursor-pointer",variant:H.value,disabled:t(a).processing},{default:d(()=>[p(v(W.value),1)]),_:1},8,["variant","disabled"])]),default:d(()=>[c("div",Ve,[i(t(y),null,{default:d(()=>e[9]||(e[9]=[p("Name")])),_:1,__:[9]}),i(t(K),{type:"text",placeholder:"Enter Name","model-value":t(a).name,"onUpdate:modelValue":e[1]||(e[1]=o=>t(a).name=o)},null,8,["model-value"]),t(a).errors.name?(u(),m("p",$e,v(t(a).errors.name),1)):b("",!0)]),c("div",ke,[i(t(y),null,{default:d(()=>e[10]||(e[10]=[p("Code")])),_:1,__:[10]}),i(t(K),{type:"text",placeholder:"Enter Code","model-value":t(a).code,"onUpdate:modelValue":e[2]||(e[2]=o=>t(a).code=o)},null,8,["model-value"]),t(a).errors.code?(u(),m("p",Ce,v(t(a).errors.code),1)):b("",!0)]),c("div",we,[i(t(y),null,{default:d(()=>e[11]||(e[11]=[p("Description")])),_:1,__:[11]}),i(t(Q),{placeholder:"Enter Description","model-value":t(a).description,"onUpdate:modelValue":e[3]||(e[3]=o=>t(a).description=o)},null,8,["model-value"]),t(a).errors.description?(u(),m("p",De,v(t(a).errors.description),1)):b("",!0)]),c("div",Ue,[i(t(y),null,{default:d(()=>e[12]||(e[12]=[p("Unit Price")])),_:1,__:[12]}),i(t(K),{type:"number",placeholder:"Enter Code","model-value":t(a).unit_price,"onUpdate:modelValue":e[4]||(e[4]=o=>t(a).unit_price=o),"model-valueModifiers":{number:!0},step:".01",min:"0"},null,8,["model-value"]),t(a).errors.unit_price?(u(),m("p",Ke,v(t(a).errors.unit_price),1)):b("",!0)]),c("div",Ee,[i(t(y),null,{default:d(()=>e[13]||(e[13]=[p("Materials")])),_:1,__:[13]}),i(t(fe),{options:s.options.materials,placeholder:"Select Materials","model-value":t(a).materials,"onUpdate:modelValue":e[5]||(e[5]=o=>t(a).materials=o),"trigger-class":"w-full"},null,8,["options","model-value"]),i(t(ye),{"error-key":"materials"})]),c("div",Pe,[i(t(y),{class:"mb-1"},{default:d(()=>e[14]||(e[14]=[p("Status")])),_:1,__:[14]}),c("div",Oe,[i(t(R),{class:"cursor-pointer","model-value":t(a).is_active,"onUpdate:modelValue":e[6]||(e[6]=o=>t(a).is_active=o)},null,8,["model-value"]),i(t(y),null,{default:d(()=>[p(v(L.value),1)]),_:1})]),t(a).errors.is_active?(u(),m("p",Be,v(t(a).errors.is_active),1)):b("",!0)])]),_:1},8,["open","dialog"])]),c("div",null,[i(t(pe),{columns:j,"paginate-data":s.products,"column-visibility":F,filter:_,"entry-options":t(me),"search-config":w,onFilterChange:A},null,8,["paginate-data","filter","entry-options"])])])])]),_:1})],64))}});export{Qe as default};
