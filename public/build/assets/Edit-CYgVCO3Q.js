import{d as g,c as u,x as B,j as N,a as $,o as v,e as a,u as o,g as w,w as l,b as y,f as S,h as k,i as x,F as U}from"./app-BgTXa90_.js";import{_ as L}from"./Card.vue_vue_type_script_setup_true_lang-CNAuYvQV.js";import{L as P}from"./index-BvCIcig5.js";import{_ as D}from"./FormError.vue_vue_type_script_setup_true_lang-BVg2IwEG.js";import{_ as V}from"./FormCombobox.vue_vue_type_script_setup_true_lang-C_d6RY7a.js";import{_ as F}from"./FormSwitch.vue_vue_type_script_setup_true_lang-D0NXErWG.js";import{u as O,_ as j}from"./AppLayout.vue_vue_type_script_setup_true_lang-CdHOQRKV.js";import{_ as M}from"./AppMainLayout.vue_vue_type_script_setup_true_lang-k-gsNc47.js";import"./index-gvFlOA9A.js";import"./RovingFocusGroup-Cq5P6bq-.js";import"./useForwardExpose-rU1I-y_0.js";import"./check-DnxLo8EA.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-COVDtZ7L.js";import"./useFormControl-D4E9fVKJ.js";import"./VisuallyHiddenInput-DKmQAXjO.js";import"./chevron-down-53sWXJgT.js";import"./Label.vue_vue_type_script_setup_true_lang-DfAzriwx.js";import"./Switch.vue_vue_type_script_setup_true_lang-C_f7LROW.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-a7lEFZeV.js";var I=(m=>(m.ACTIVE="ACTIVE",m.INACTIVE="INACTIVE",m))(I||{});const R={ACTIVE:"Active",INACTIVE:"Inactive"},uo=g({layout:M,__name:"Edit",props:{route:{},bom:{},products:{},options:{}},setup(m){var p,b,c;const i=m,{tenant:s}=O(),h=u(()=>{var e;return[{title:"Dashboard",href:route("dashboard",{tenant:(s==null?void 0:s.id)||""})},{title:"Routes",href:route("routes.index",{tenant:(s==null?void 0:s.id)||""})},{title:i.route.name,href:"#"},{title:"Boms",href:route("routes.boms.index",{tenant:(s==null?void 0:s.id)||"",route:i.route.id})},{title:((e=i.bom.bom)==null?void 0:e.name)??"",href:"#"},{title:"Edit",href:route("routes.boms.edit",{tenant:(s==null?void 0:s.id)||"",route:i.route.id,bom:i.bom.bom_id})}]}),E=u(()=>{var e;return((e=i.options.switch.statuses.find(r=>r.value===t.status))==null?void 0:e.name)??R[I.INACTIVE]}),C=u(()=>i.products.map(e=>({name:e.name,value:e.id}))),A=u(()=>{var e;return((e=i.products.find(r=>r.id===t.product_id))==null?void 0:e.boms.map(r=>({name:r.name,value:r.id})))??[]}),n=u(()=>i.products.find(e=>{var r;return e.id===((r=i.bom.bom)==null?void 0:r.product_id)})),t=B({product_id:(p=n.value)==null?void 0:p.id,bom_id:(c=(b=n.value)==null?void 0:b.boms.find(e=>e.id===i.bom.bom_id))==null?void 0:c.id,status:i.bom.status.switch??void 0}),T=()=>t.put(route("routes.boms.update",{tenant:(s==null?void 0:s.id)||"",route:i.route.id,bom:i.bom.id}),{preserveScroll:!0,preserveState:!0});return N(()=>t.product_id,()=>{t.bom_id=void 0}),(e,r)=>{var f;return v(),$(U,null,[a(o(w),{title:(f=e.bom.bom)==null?void 0:f.name},null,8,["title"]),a(j,{breadcrumbs:h.value},{default:l(()=>[a(o(P),null,{default:l(()=>{var _;return[y("form",{onSubmit:S(T,["prevent"])},[a(o(L),{title:`Edit ${(_=e.bom.bom)==null?void 0:_.name}`},{default:l(()=>[a(o(V),{options:C.value,placeholder:"Select Product",label:"Product","model-value":o(t).product_id,"onUpdate:modelValue":r[0]||(r[0]=d=>o(t).product_id=d),error:o(t).errors.product_id},null,8,["options","model-value","error"]),a(o(V),{options:A.value,placeholder:"Select Bom",label:"Bom","model-value":o(t).bom_id,"onUpdate:modelValue":r[1]||(r[1]=d=>o(t).bom_id=d),error:o(t).errors.bom_id},null,8,["options","model-value","error"]),o(t).status!==void 0?(v(),k(o(F),{key:0,label:E.value,error:o(t).errors.status,"model-value":o(t).status,"onUpdate:modelValue":r[2]||(r[2]=d=>o(t).status=d)},null,8,["label","error","model-value"])):x("",!0),a(o(D),{type:"submit",disabled:o(t).processing,label:"Update",loading:o(t).processing},null,8,["disabled","loading"])]),_:1},8,["title"])],32)]}),_:1})]),_:1},8,["breadcrumbs"])],64)}}});export{uo as default};
