import{d as U,c as v,r as _,x as D,f as K,a as E,o as w,e as l,u as a,g as B,w as n,b as c,W as h,h as O,i as r,F as N}from"./app-D7AVAIhk.js";import{_ as k,a as F}from"./FilterSelect.vue_vue_type_script_setup_true_lang-vfm_sjbR.js";import{_ as L,a as W,b as j,e as M,p as R,c as V,P as q,d as z,T as G,u as H}from"./pickBy-kWVzJz3d.js";import{L as J}from"./index-D8VmvGY_.js";import{_ as Q,a as X}from"./FormInput.vue_vue_type_script_setup_true_lang-B9U5b3Iw.js";import{_ as Y}from"./FormSelect.vue_vue_type_script_setup_true_lang-7CDC7IuW.js";import{_ as Z}from"./FormSwitch.vue_vue_type_script_setup_true_lang-CiRwrchL.js";import{_ as ee}from"./Dialog.vue_vue_type_script_setup_true_lang-D1owlpr3.js";import{u as te,_ as se}from"./AppLayout.vue_vue_type_script_setup_true_lang-D8q9Y8Ug.js";import{_ as ae}from"./AppMainLayout.vue_vue_type_script_setup_true_lang-DYsD14NS.js";import"./index-ObBAPkBY.js";import"./useForwardExpose-_ZfyhJ9w.js";import"./Label.vue_vue_type_script_setup_true_lang-BDtNivf6.js";import"./Select.vue_vue_type_script_setup_true_lang-C_dB8_yC.js";import"./RovingFocusGroup-DZVzFqmi.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-M0fp3WkH.js";import"./check-Cwx-Sazi.js";import"./useFormControl-BL3wKghq.js";import"./CardTitle.vue_vue_type_script_setup_true_lang-ChEDlu09.js";import"./DialogTrigger.vue_vue_type_script_setup_true_lang-CEDdV3vZ.js";import"./VisuallyHiddenInput-BnotZ_Kf.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CbIED4YH.js";const re={class:"space-y-3"},oe={class:"flex flex-wrap items-center justify-end gap-2"},Te=U({layout:ae,__name:"Index",props:{product:{},prices:{},options:{}},setup($){const u=$,{tenant:s}=te(),{formatDateTime:y}=H(),p=v(()=>route().params),d=_({search:p.value.search,entries:p.value.entries||"10",status:p.value.status}),m=_({create:{dialogIsOpen:!1}}),C=[{title:"Dashboard",href:route("dashboard",{tenant:(s==null?void 0:s.id)||""})},{title:"Products",href:route("products.index",{tenant:(s==null?void 0:s.id)||""})},{title:u.product.name,href:"#"},{title:"Prices",href:route("products.prices.index",{tenant:(s==null?void 0:s.id)||"",product:u.product.id})}],g=()=>h.visit(route("products.prices.index",{...R(d),tenant:(s==null?void 0:s.id)||"",product:u.product.id})),I=()=>h.visit(route("products.prices.index",{tenant:(s==null?void 0:s.id)||"",product:u.product.id})),x={id:!1},A=[{accessorKey:"actions",header:()=>r("div",null,"Actions"),cell:({row:t})=>{const e=t.original;return r("div",{class:"flex items-center gap-2"},[r(V,{text:"Edit",href:route("products.prices.edit",{tenant:(s==null?void 0:s.id)||"",product:u.product.id,price:e.id}),icon:q}),r(z,{title:`Delete ${e.currency}`,route:route("products.prices.destroy",{tenant:(s==null?void 0:s.id)||"",product:u.product.id,price:e.id}),asChild:!1},()=>r(V,{variant:"destructive",text:"Delete",icon:G}))])}},{accessorKey:"status",header:()=>r("div",null,"Active"),cell:({row:t})=>{const{status_badge:e}=t.original;return r(F,{statusBadge:e})}},{accessorKey:"id",header:()=>r("div",null,"Id"),cell:({row:t})=>r("div",null,t.getValue("id"))},{accessorKey:"currency",header:()=>r("div",null,"Currency"),cell:({row:t})=>r("div",null,t.getValue("currency"))},{accessorKey:"amount",header:()=>r("div",null,"Amount"),cell:({row:t})=>r("div",null,t.getValue("amount"))},{accessorKey:"created_at",header:()=>r("div",null,"Created At"),cell:({row:t})=>r("div",null,y(t.getValue("created_at"))||"")},{accessorKey:"updated_at",header:()=>r("div",null,"Updated At"),cell:({row:t})=>r("div",null,y(t.getValue("updated_at"))||"")}],S=v(()=>{var t;return((t=u.options.statuses.find(e=>e.is_default))==null?void 0:t.value)??"ACTIVE"}),T=v(()=>{var t;return((t=u.options.statuses.find(e=>e.value===i.status))==null?void 0:t.name)??"Active"}),i=D({currency:"",amount:"",status:S.value}),f=_({status:i.status==="ACTIVE"}),P=()=>i.post(route("products.prices.store",{tenant:(s==null?void 0:s.id)||"",product:u.product.id}),{onSuccess:()=>{i.reset(),m.create.dialogIsOpen=!1}});return K(()=>f.status,t=>{var o;const e=(o=u.options.statuses.find(b=>t?b.value==="ACTIVE":b.value==="INACTIVE"))==null?void 0:o.value;e!==void 0&&(i.status=e)}),(t,e)=>(w(),E(N,null,[l(a(B),{title:"Product Prices"}),l(se,{breadcrumbs:C},{default:n(()=>[l(a(J),null,{default:n(()=>[c("div",re,[l(a(L),{onSearch:g,onReset:I},{default:n(()=>[l(a(W),{label:"Name",placeholder:"Search ID, Currency","model-value":d.search,"onUpdate:modelValue":e[0]||(e[0]=o=>d.search=o)},null,8,["model-value"]),l(a(k),{label:"Status",placeholder:"Select Status",options:t.options.statuses,multiple:"","model-value":d.status,"onUpdate:modelValue":e[1]||(e[1]=o=>d.status=o)},null,8,["options","model-value"])]),_:1}),c("div",oe,[l(a(ee),{title:"Create Price",open:m.create.dialogIsOpen,"onUpdate:open":e[5]||(e[5]=o=>m.create.dialogIsOpen=o)},{default:n(()=>[c("form",{onSubmit:O(P,["prevent"]),class:"space-y-4"},[l(a(Y),{label:"Currency",options:t.options.currencies,"model-value":a(i).currency,"onUpdate:modelValue":e[2]||(e[2]=o=>a(i).currency=o),error:a(i).errors.currency},null,8,["options","model-value","error"]),l(a(Q),{label:"Amount",type:"number",error:a(i).errors.amount,"model-value":a(i).amount,"onUpdate:modelValue":e[3]||(e[3]=o=>a(i).amount=o),step:".01",min:"0.01"},null,8,["error","model-value"]),l(a(Z),{label:T.value,error:a(i).errors.status,"model-value":f.status,"onUpdate:modelValue":e[4]||(e[4]=o=>f.status=o)},null,8,["label","error","model-value"]),l(a(X),{type:"submit",disabled:a(i).processing,loading:a(i).processing},null,8,["disabled","loading"])],32)]),_:1},8,["open"])]),c("div",null,[l(a(j),{"model-value":d,"onUpdate:modelValue":e[6]||(e[6]=o=>d=o),columns:A,"paginate-data":t.prices,"column-visibility":x,"entry-options":a(M),onSearch:g},null,8,["model-value","paginate-data","entry-options"])])])]),_:1})]),_:1})],64))}});export{Te as default};
