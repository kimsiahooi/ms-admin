import{_ as j,s as H,a as L,b as W,c as I,p as q,P as G,T as J,d as M}from"./slug-WXWUhngu.js";import{_ as Q,e as R,u as X}from"./options-CvWaqALP.js";import{_ as x}from"./index-CSGLO_bs.js";import{d as Y,l as Z,c as v,j as w,x as ee,m as V,a as f,o as _,e as l,u as s,g as te,w as n,b as d,i as h,h as p,t as m,k as r,F as se,W as ae}from"./app-1Qej8Hqy.js";import{_ as $}from"./Input.vue_vue_type_script_setup_true_lang-DT3u9r8W.js";import{_ as y}from"./Label.vue_vue_type_script_setup_true_lang-6s05lCV8.js";import{_ as oe}from"./AppLayout.vue_vue_type_script_setup_true_lang-83_G_H2Z.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-CRoBc1tq.js";import"./RovingFocusGroup-DvSPVPQx.js";import"./useForwardExpose-C0pzZPiI.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-VWeUqYIc.js";import"./check-CL2utoo8.js";import"./VisuallyHiddenInput-CYvoUC36.js";import"./index-CmzmHQpT.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-Cu8c5Ixi.js";const re={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},ie={class:"space-y-3"},le={class:"flex flex-wrap items-center justify-end gap-2"},ne={class:"grid w-full max-w-sm items-center gap-1.5"},de={key:0,class:"text-destructive"},ue={class:"grid w-full max-w-sm items-center gap-1.5"},ce={key:0,class:"text-destructive"},pe={class:"grid w-full max-w-sm items-center gap-1.5"},me={key:0,class:"text-destructive"},ve={class:"grid w-full max-w-sm items-center gap-1.5"},fe={class:"flex items-center space-x-2"},_e={key:0,class:"text-destructive"},Ue=Y({layout:j,__name:"Index",props:{product:{},boms:{},options:{}},setup(B){const u=B,{formatDateTime:C}=X(),D=Z(),c=v(()=>{var t;return((t=D.props.tenant)==null?void 0:t.id)||""}),k=v(()=>route().params),K=w({search:k.value.search,entries:k.value.entries||"10"}),N={placeholder:"Search name..."},O=[{title:"Dashboard",href:route("dashboard",{tenant:c.value})},{title:"Products",href:route("products.index",{tenant:c.value})},{title:u.product.name,href:"#"},{title:"Bom",href:route("products.boms.index",{tenant:c.value,product:u.product.id})}],U=t=>{ae.visit(route("products.boms.index",{...q(t),tenant:c.value,product:u.product.id}))},E={description:!1},S=[{accessorKey:"actions",header:()=>r("div",null,"Actions"),cell:({row:t})=>{const e=t.original;return r("div",{class:"flex items-center gap-2"},[r(x,{class:"h-auto size-6 cursor-pointer rounded-full",onClick:()=>b("update",e)},()=>r(G,{class:"size-3"})),r(x,{class:"h-auto size-6 cursor-pointer rounded-full",variant:"destructive",onClick:()=>b("destroy",e)},()=>r(J,{class:"size-3"}))])}},{accessorKey:"name",header:()=>r("div",null,"Name"),cell:({row:t})=>r("div",null,t.getValue("name"))},{accessorKey:"code",header:()=>r("div",null,"Code"),cell:({row:t})=>r("div",null,t.getValue("code"))},{accessorKey:"description",header:()=>r("div",null,"Description"),cell:({row:t})=>r("div",null,t.getValue("description"))},{accessorKey:"is_active",header:()=>r("div",null,"Active"),cell:({row:t})=>{const{is_active:e,is_active_display:i}=t.original;return r(M,{variant:e?"default":"destructive"},()=>i)}},{accessorKey:"created_at",header:()=>r("div",null,"Created At"),cell:({row:t})=>{const e=C(t.original.created_at);return e?r("div",null,e):r("div",null)}},{accessorKey:"updated_at",header:()=>r("div",null,"Updated At"),cell:({row:t})=>{const e=C(t.original.updated_at);return e?r("div",null,e):r("div",null)}}],a=w({type:null,title:"",isOpen:!1,data:null}),o=ee(a.type||"",{name:"",code:"",description:"",is_active:!0}),T=v(()=>{var t;return(t=u.options.statuses.find(e=>o.is_active?e.value:!e.value))==null?void 0:t.name}),z=v(()=>a.type==="store"?"Create":a.type==="update"?"Update":"Delete"),A=v(()=>a.type==="destroy"?"destructive":"default"),b=(t,e)=>{var i,g;switch(t){case"store":a.title="Create Bom";break;case"update":e&&(a.data=e,o.name=e.name,o.code=e.code,o.description=e.description||"",o.is_active=e.is_active),a.title=`Edit ${((i=a.data)==null?void 0:i.name)||"Bom"}`;break;case"destroy":e&&(a.data=e),a.title=`Delete ${((g=a.data)==null?void 0:g.name)||"Bom"}`}a.type=t,a.isOpen=!0},F=()=>{var t,e;if(a.type){const i=a.type==="store"?route("products.boms.store",{tenant:c.value,product:u.product.id}):a.type==="update"?route("products.boms.update",{tenant:c.value,product:u.product.id,bom:((t=a.data)==null?void 0:t.id)||""}):route("products.boms.destroy",{tenant:c.value,product:u.product.id,bom:((e=a.data)==null?void 0:e.id)||""}),g=a.type==="store"?"post":a.type==="update"?"put":"delete";o.transform(P=>a.type!=="destroy"?P:{}).submit(g,i,{onSuccess:()=>{o.reset(),a.isOpen=!1}})}};return V(()=>a.isOpen,t=>{t||(a.data=null,o.clearErrors(),o.reset())}),V([()=>o.name,()=>a.type],([t,e])=>{e==="store"&&(o.code=H(t))}),(t,e)=>(_(),f(se,null,[l(s(te),{title:"Boms"}),l(oe,{breadcrumbs:O},{default:n(()=>[d("div",re,[d("div",ie,[d("div",le,[l(s(L),{open:a.isOpen,"onUpdate:open":e[5]||(e[5]=i=>a.isOpen=i),dialog:a,onSubmit:F},{button:n(()=>[l(s(x),{class:"cursor-pointer",onClick:e[0]||(e[0]=i=>b("store"))},{default:n(()=>e[6]||(e[6]=[p("Create")])),_:1,__:[6]})]),"submit-button":n(()=>[l(s(x),{type:"submit",class:"cursor-pointer",variant:A.value,disabled:s(o).processing},{default:n(()=>[p(m(z.value),1)]),_:1},8,["variant","disabled"])]),default:n(()=>[d("div",ne,[l(s(y),null,{default:n(()=>e[7]||(e[7]=[p("Name")])),_:1,__:[7]}),l(s($),{type:"text",placeholder:"Enter Name","model-value":s(o).name,"onUpdate:modelValue":e[1]||(e[1]=i=>s(o).name=i)},null,8,["model-value"]),s(o).errors.name?(_(),f("p",de,m(s(o).errors.name),1)):h("",!0)]),d("div",ue,[l(s(y),null,{default:n(()=>e[8]||(e[8]=[p("Code")])),_:1,__:[8]}),l(s($),{type:"text",placeholder:"Enter Code","model-value":s(o).code,"onUpdate:modelValue":e[2]||(e[2]=i=>s(o).code=i)},null,8,["model-value"]),s(o).errors.code?(_(),f("p",ce,m(s(o).errors.code),1)):h("",!0)]),d("div",pe,[l(s(y),null,{default:n(()=>e[9]||(e[9]=[p("Description")])),_:1,__:[9]}),l(s(W),{placeholder:"Enter Description","model-value":s(o).description,"onUpdate:modelValue":e[3]||(e[3]=i=>s(o).description=i)},null,8,["model-value"]),s(o).errors.description?(_(),f("p",me,m(s(o).errors.description),1)):h("",!0)]),d("div",ve,[l(s(y),{class:"mb-1"},{default:n(()=>e[10]||(e[10]=[p("Status")])),_:1,__:[10]}),d("div",fe,[l(s(I),{class:"cursor-pointer","model-value":s(o).is_active,"onUpdate:modelValue":e[4]||(e[4]=i=>s(o).is_active=i)},null,8,["model-value"]),l(s(y),null,{default:n(()=>[p(m(T.value),1)]),_:1})]),s(o).errors.is_active?(_(),f("p",_e,m(s(o).errors.is_active),1)):h("",!0)])]),_:1},8,["open","dialog"])]),d("div",null,[l(s(Q),{columns:S,"paginate-data":t.boms,"column-visibility":E,filter:K,"entry-options":s(R),"search-config":N,onFilterChange:U},null,8,["paginate-data","filter","entry-options"])])])])]),_:1})],64))}});export{Ue as default};
