import{d as U,c as p,r as k,j as w,x as K,k as N,a as B,o as T,e as i,u as s,g as F,w as d,b as u,W as h,f as M,l as o,F as O}from"./app-a7hUe1k2.js";import{_ as A,a as L,b as E}from"./StatusSwitch.vue_vue_type_script_setup_true_lang-B6SeRpgM.js";import{_ as P,a as j,b as W,e as H,p as R,c as f,P as Z,d as q,T as z,u as G}from"./pickBy-gn_MgXOO.js";import{L as J}from"./index-D_8GYqd1.js";import{_ as g,a as Q}from"./FormInput.vue_vue_type_script_setup_true_lang-Be6wvqRC.js";import{_ as X}from"./FormSwitch.vue_vue_type_script_setup_true_lang-Ngfo_0Ar.js";import{_ as Y}from"./FormTextarea.vue_vue_type_script_setup_true_lang-B0a1PBsJ.js";import{_ as ee}from"./Dialog.vue_vue_type_script_setup_true_lang-BM12lrTH.js";import{u as ae,_ as se}from"./AppLayout.vue_vue_type_script_setup_true_lang-CWHhop4g.js";import{_ as te}from"./AppMainLayout.vue_vue_type_script_setup_true_lang-B5OEuhhA.js";import{S as oe,a as le}from"./index-0ryiW-j8.js";import{s as re}from"./slug-xwoAxeGq.js";import{c as ie}from"./index-Ba1IaxK7.js";import"./useForwardExpose-CMf24qRA.js";import"./Label.vue_vue_type_script_setup_true_lang-CoVgtdNw.js";import"./Select.vue_vue_type_script_setup_true_lang-DrAgaA7n.js";import"./RovingFocusGroup-D3VJg7SV.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-DzYpWIo_.js";import"./check-CVFmgC14.js";import"./useFormControl-Bld6-2ak.js";import"./Switch.vue_vue_type_script_setup_true_lang-CFxb5mXA.js";import"./VisuallyHiddenInput-xtrcVa52.js";import"./CardTitle.vue_vue_type_script_setup_true_lang-BfVuDqlx.js";import"./DialogTrigger.vue_vue_type_script_setup_true_lang-D9OuKqzk.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DDj-hmLo.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=ie("FactoryIcon",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]),de={class:"space-y-3"},ue={class:"flex flex-wrap items-center justify-end gap-2"},Me=U({layout:te,__name:"Index",props:{companies:{},options:{}},setup(b){const v=b,{tenant:a}=ae(),{formatDateTime:_}=G(),m=p(()=>route().params),n=k({search:m.value.search,entries:m.value.entries||"10",status:m.value.status}),c=w({create:{dialogIsOpen:!1}}),V=[{title:"Dashboard",href:route("dashboard",{tenant:(a==null?void 0:a.id)||""})},{title:"Companies",href:route("companies.index",{tenant:(a==null?void 0:a.id)||""})}],y=()=>h.visit(route("companies.index",{...R(n.value),tenant:(a==null?void 0:a.id)||""}),{preserveScroll:!0,preserveState:!0}),S=()=>h.visit(route("companies.index",{tenant:(a==null?void 0:a.id)||""})),$={id:!1,description:!1},x=[{accessorKey:"actions",header:()=>o("div",null,"Actions"),cell:({row:t})=>{const e=t.original;return o("div",{class:"flex items-center gap-2"},[o(L,{value:e.status.switch,method:"put",href:route("companies.toggleStatus",{tenant:(a==null?void 0:a.id)||"",company:e.id})}),o(f,{text:"Edit",href:route("companies.edit",{tenant:(a==null?void 0:a.id)||"",company:e.id}),icon:Z}),o(f,{text:"Branches",href:route("companies.branches.index",{tenant:(a==null?void 0:a.id)||"",company:e.id}),icon:ne}),o(q,{title:`Delete ${e.name}`,route:route("companies.destroy",{tenant:(a==null?void 0:a.id)||"",company:e.id}),asChild:!1},()=>o(f,{variant:"destructive",text:"Delete",icon:z}))])}},{accessorKey:"status",header:()=>o("div",null,"Status"),cell:({row:t})=>{const{status:e}=t.original;return o(E,{statusBadge:e.badge})}},{accessorKey:"id",header:()=>o("div",null,"Id"),cell:({row:t})=>o("div",null,t.getValue("id"))},{accessorKey:"name",header:()=>o("div",null,"Name"),cell:({row:t})=>o("div",null,t.getValue("name"))},{accessorKey:"code",header:()=>o("div",null,"Code"),cell:({row:t})=>o("div",null,t.getValue("code"))},{accessorKey:"description",header:()=>o("div",null,"Description"),cell:({row:t})=>o("div",null,t.getValue("description"))},{accessorKey:"created_at",header:()=>o("div",null,"Created At"),cell:({row:t})=>o("div",null,_(t.getValue("created_at"))||"")},{accessorKey:"updated_at",header:()=>o("div",null,"Updated At"),cell:({row:t})=>o("div",null,_(t.getValue("updated_at"))||"")}],C=p(()=>{var t;return!!((t=v.options.switch_statuses.find(e=>e.is_default))!=null&&t.value)}),I=p(()=>{var t;return((t=v.options.switch_statuses.find(e=>e.value===l.status))==null?void 0:t.name)??oe[le.INACTIVE]}),l=K({name:"",code:"",description:"",status:C.value}),D=()=>l.post(route("companies.store",{tenant:(a==null?void 0:a.id)||""}),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{l.reset(),c.create.dialogIsOpen=!1}});return N(()=>l.name,t=>{l.code=re(t)}),(t,e)=>(T(),B(O,null,[i(s(F),{title:"Companies"}),i(se,{breadcrumbs:V},{default:d(()=>[i(s(J),null,{default:d(()=>[u("div",de,[i(s(P),{onSearch:y,onReset:S},{default:d(()=>[i(s(j),{label:"Name",placeholder:"Search ID, Name, Code","model-value":n.value.search,"onUpdate:modelValue":e[0]||(e[0]=r=>n.value.search=r)},null,8,["model-value"]),i(s(A),{label:"Status",placeholder:"Select Status",options:t.options.statuses,multiple:"","model-value":n.value.status,"onUpdate:modelValue":e[1]||(e[1]=r=>n.value.status=r)},null,8,["options","model-value"])]),_:1}),u("div",ue,[i(s(ee),{title:"Create Company",open:c.create.dialogIsOpen,"onUpdate:open":e[6]||(e[6]=r=>c.create.dialogIsOpen=r)},{default:d(()=>[u("form",{onSubmit:M(D,["prevent"]),class:"space-y-4"},[i(s(g),{label:"Name",error:s(l).errors.name,"model-value":s(l).name,"onUpdate:modelValue":e[2]||(e[2]=r=>s(l).name=r)},null,8,["error","model-value"]),i(s(g),{label:"Code",error:s(l).errors.code,"model-value":s(l).code,"onUpdate:modelValue":e[3]||(e[3]=r=>s(l).code=r)},null,8,["error","model-value"]),i(s(Y),{label:"Description",error:s(l).errors.description,"model-value":s(l).description,"onUpdate:modelValue":e[4]||(e[4]=r=>s(l).description=r)},null,8,["error","model-value"]),i(s(X),{label:I.value,error:s(l).errors.status,"model-value":s(l).status,"onUpdate:modelValue":e[5]||(e[5]=r=>s(l).status=r)},null,8,["label","error","model-value"]),i(s(Q),{type:"submit",disabled:s(l).processing,loading:s(l).processing},null,8,["disabled","loading"])],32)]),_:1},8,["open"])]),u("div",null,[i(s(W),{"model-value":n.value,"onUpdate:modelValue":e[7]||(e[7]=r=>n.value=r),columns:x,"paginate-data":t.companies,"column-visibility":$,"entry-options":s(H),onSearch:y},null,8,["model-value","paginate-data","entry-options"])])])]),_:1})]),_:1})],64))}});export{Me as default};
