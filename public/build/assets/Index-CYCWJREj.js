import{d as I,c,r as K,j as w,x as T,k as N,a as B,o as O,e as i,u as e,g as k,w as u,b as d,W as y,f as A,l as o,F as M}from"./app-a7hUe1k2.js";import{_ as E,a as F,b as L}from"./StatusSwitch.vue_vue_type_script_setup_true_lang-B6SeRpgM.js";import{_ as P,a as j,b as W,e as R,p as q,c as g,P as z,d as G,T as H,u as J}from"./pickBy-gn_MgXOO.js";import{L as Q}from"./index-D_8GYqd1.js";import{_ as b,a as X}from"./FormInput.vue_vue_type_script_setup_true_lang-Be6wvqRC.js";import{_ as Y}from"./FormSelect.vue_vue_type_script_setup_true_lang-7JiwgOK1.js";import{_ as Z}from"./FormSwitch.vue_vue_type_script_setup_true_lang-Ngfo_0Ar.js";import{_ as ee}from"./FormTextarea.vue_vue_type_script_setup_true_lang-B0a1PBsJ.js";import{_ as ae}from"./Dialog.vue_vue_type_script_setup_true_lang-BM12lrTH.js";import{u as te,_ as se}from"./AppLayout.vue_vue_type_script_setup_true_lang-CWHhop4g.js";import{_ as le}from"./AppMainLayout.vue_vue_type_script_setup_true_lang-B5OEuhhA.js";import{S as oe,a as re}from"./index-CD_aZUXf.js";import{s as ie}from"./slug-xwoAxeGq.js";import"./index-Ba1IaxK7.js";import"./useForwardExpose-CMf24qRA.js";import"./Label.vue_vue_type_script_setup_true_lang-CoVgtdNw.js";import"./Select.vue_vue_type_script_setup_true_lang-DrAgaA7n.js";import"./RovingFocusGroup-D3VJg7SV.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-DzYpWIo_.js";import"./check-CVFmgC14.js";import"./useFormControl-Bld6-2ak.js";import"./Switch.vue_vue_type_script_setup_true_lang-CFxb5mXA.js";import"./VisuallyHiddenInput-xtrcVa52.js";import"./CardTitle.vue_vue_type_script_setup_true_lang-BfVuDqlx.js";import"./DialogTrigger.vue_vue_type_script_setup_true_lang-D9OuKqzk.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DDj-hmLo.js";const ne={class:"space-y-3"},ue={class:"flex flex-wrap items-center justify-end gap-2"},Ae=I({layout:le,__name:"Index",props:{materials:{},options:{}},setup(h){const f=h,{tenant:s}=te(),{formatDateTime:v}=J(),m=c(()=>route().params),n=K({search:m.value.search,entries:m.value.entries||"10",status:m.value.status}),p=w({create:{dialogIsOpen:!1}}),S=[{title:"Dashboard",href:route("dashboard",{tenant:(s==null?void 0:s.id)||""})},{title:"Materials",href:route("materials.index",{tenant:(s==null?void 0:s.id)||""})}],_=()=>y.visit(route("materials.index",{...q(n.value),tenant:(s==null?void 0:s.id)||""}),{preserveScroll:!0,preserveState:!0}),V=()=>y.visit(route("materials.index",{tenant:(s==null?void 0:s.id)||""})),$={id:!1,description:!1},U=[{accessorKey:"actions",header:()=>o("div",null,"Actions"),cell:({row:t})=>{const a=t.original;return o("div",{class:"flex items-center gap-2"},[o(F,{value:a.status.switch,method:"put",href:route("materials.toggleStatus",{tenant:(s==null?void 0:s.id)||"",material:a.id})}),o(g,{text:"Edit",href:route("materials.edit",{tenant:(s==null?void 0:s.id)||"",material:a.id}),icon:z}),o(G,{title:`Delete ${a.name}`,route:route("materials.destroy",{tenant:(s==null?void 0:s.id)||"",material:a.id}),asChild:!1},()=>o(g,{variant:"destructive",text:"Delete",icon:H}))])}},{accessorKey:"status",header:()=>o("div",null,"Status"),cell:({row:t})=>{const{status:a}=t.original;return o(L,{statusBadge:a.badge})}},{accessorKey:"id",header:()=>o("div",null,"Id"),cell:({row:t})=>o("div",null,t.getValue("id"))},{accessorKey:"name",header:()=>o("div",null,"Name"),cell:({row:t})=>o("div",null,t.getValue("name"))},{accessorKey:"code",header:()=>o("div",null,"Code"),cell:({row:t})=>o("div",null,t.getValue("code"))},{accessorKey:"description",header:()=>o("div",null,"Description"),cell:({row:t})=>o("div",null,t.getValue("description"))},{accessorKey:"unit_type",header:()=>o("div",null,"Unit Type"),cell:({row:t})=>o("div",null,t.original.unit_type_label||"")},{accessorKey:"created_at",header:()=>o("div",null,"Created At"),cell:({row:t})=>o("div",null,v(t.getValue("created_at"))||"")},{accessorKey:"updated_at",header:()=>o("div",null,"Updated At"),cell:({row:t})=>o("div",null,v(t.getValue("updated_at"))||"")}],x=c(()=>{var t;return!!((t=f.options.switch_statuses.find(a=>a.is_default))!=null&&t.value)}),C=c(()=>{var t;return((t=f.options.switch_statuses.find(a=>a.value===l.status))==null?void 0:t.name)??oe[re.INACTIVE]}),l=T({name:"",code:"",description:"",unit_type:"",status:x.value}),D=()=>l.post(route("materials.store",{tenant:(s==null?void 0:s.id)||""}),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{l.reset(),p.create.dialogIsOpen=!1}});return N(()=>l.name,t=>{l.code=ie(t)}),(t,a)=>(O(),B(M,null,[i(e(k),{title:"Materials"}),i(se,{breadcrumbs:S},{default:u(()=>[i(e(Q),null,{default:u(()=>[d("div",ne,[i(e(P),{onSearch:_,onReset:V},{default:u(()=>[i(e(j),{label:"Name",placeholder:"Search ID, Name, Code","model-value":n.value.search,"onUpdate:modelValue":a[0]||(a[0]=r=>n.value.search=r)},null,8,["model-value"]),i(e(E),{label:"Status",placeholder:"Select Status",options:t.options.statuses,multiple:"","model-value":n.value.status,"onUpdate:modelValue":a[1]||(a[1]=r=>n.value.status=r)},null,8,["options","model-value"])]),_:1}),d("div",ue,[i(e(ae),{title:"Create Material",open:p.create.dialogIsOpen,"onUpdate:open":a[7]||(a[7]=r=>p.create.dialogIsOpen=r)},{default:u(()=>[d("form",{onSubmit:A(D,["prevent"]),class:"space-y-4"},[i(e(b),{label:"Name",error:e(l).errors.name,"model-value":e(l).name,"onUpdate:modelValue":a[2]||(a[2]=r=>e(l).name=r)},null,8,["error","model-value"]),i(e(b),{label:"Code",error:e(l).errors.code,"model-value":e(l).code,"onUpdate:modelValue":a[3]||(a[3]=r=>e(l).code=r)},null,8,["error","model-value"]),i(e(ee),{label:"Description",error:e(l).errors.description,"model-value":e(l).description,"onUpdate:modelValue":a[4]||(a[4]=r=>e(l).description=r)},null,8,["error","model-value"]),i(e(Y),{label:"Unit Type",options:t.options.unit_types,"model-value":e(l).unit_type,"onUpdate:modelValue":a[5]||(a[5]=r=>e(l).unit_type=r),error:e(l).errors.unit_type},null,8,["options","model-value","error"]),i(e(Z),{label:C.value,error:e(l).errors.status,"model-value":e(l).status,"onUpdate:modelValue":a[6]||(a[6]=r=>e(l).status=r)},null,8,["label","error","model-value"]),i(e(X),{type:"submit",disabled:e(l).processing,loading:e(l).processing},null,8,["disabled","loading"])],32)]),_:1},8,["open"])]),d("div",null,[i(e(W),{"model-value":n.value,"onUpdate:modelValue":a[8]||(a[8]=r=>n.value=r),columns:U,"paginate-data":t.materials,"column-visibility":$,"entry-options":e(R),onSearch:_},null,8,["model-value","paginate-data","entry-options"])])])]),_:1})]),_:1})],64))}});export{Ae as default};
