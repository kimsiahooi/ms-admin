import{d as D,c as _,r as y,x as E,f as K,a as w,o as B,e as l,u as a,g as O,w as c,b as p,W as V,h as N,i as r,F as k}from"./app-Dd_azS9s.js";import{_ as F,a as L,b as W}from"./ToggleStatus.vue_vue_type_script_setup_true_lang-C4JAnmuw.js";import{_ as j,a as M,b as R,e as q,p as z,c as $,P as G,d as H,T as J,u as Q}from"./pickBy-BZ5ZFQC0.js";import{L as X}from"./index-ioJhywiv.js";import{_ as Y,a as Z}from"./FormInput.vue_vue_type_script_setup_true_lang-CyRZt5ak.js";import{_ as ee}from"./FormSelect.vue_vue_type_script_setup_true_lang-M36Hzn0P.js";import{_ as te}from"./FormSwitch.vue_vue_type_script_setup_true_lang-DbWy2Hy2.js";import{_ as se}from"./Dialog.vue_vue_type_script_setup_true_lang-C8rqN1fP.js";import{u as ae,_ as re}from"./AppLayout.vue_vue_type_script_setup_true_lang-CL5r01aQ.js";import{_ as oe}from"./AppMainLayout.vue_vue_type_script_setup_true_lang-6B7ILG5j.js";import{a as n,S as ie}from"./index-Cm4Do1SD.js";import"./index-CnzE4Cxn.js";import"./useForwardExpose-CA8Wv_kq.js";import"./Label.vue_vue_type_script_setup_true_lang-Cw5cT_5W.js";import"./Select.vue_vue_type_script_setup_true_lang-DK09Jnt5.js";import"./RovingFocusGroup-DACwyRCN.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-CFR9-7Cq.js";import"./check-BIl2Szvz.js";import"./useFormControl-ciUBBPp3.js";import"./Switch.vue_vue_type_script_setup_true_lang-CWF0wi2G.js";import"./VisuallyHiddenInput-YkK2DoEj.js";import"./CardTitle.vue_vue_type_script_setup_true_lang-8blD22rC.js";import"./DialogTrigger.vue_vue_type_script_setup_true_lang-Xup29WH7.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DlHdn8C4.js";const le={class:"space-y-3"},ue={class:"flex flex-wrap items-center justify-end gap-2"},Ke=D({layout:oe,__name:"Index",props:{product:{},prices:{},options:{}},setup(C){const u=C,{tenant:t}=ae(),{formatDateTime:g}=Q(),m=_(()=>route().params),d=y({search:m.value.search,entries:m.value.entries||"10",status:m.value.status}),f=y({create:{dialogIsOpen:!1}}),I=[{title:"Dashboard",href:route("dashboard",{tenant:(t==null?void 0:t.id)||""})},{title:"Products",href:route("products.index",{tenant:(t==null?void 0:t.id)||""})},{title:u.product.name,href:"#"},{title:"Prices",href:route("products.prices.index",{tenant:(t==null?void 0:t.id)||"",product:u.product.id})}],b=()=>V.visit(route("products.prices.index",{...z(d),tenant:(t==null?void 0:t.id)||"",product:u.product.id})),S=()=>V.visit(route("products.prices.index",{tenant:(t==null?void 0:t.id)||"",product:u.product.id})),x={id:!1},A=[{accessorKey:"actions",header:()=>r("div",null,"Actions"),cell:({row:s})=>{const e=s.original;return r("div",{class:"flex items-center gap-2"},[r(L,{value:e.status_switch,method:"put",href:route("products.prices.toggleStatus",{tenant:(t==null?void 0:t.id)||"",product:u.product.id,price:e.id})}),r($,{text:"Edit",href:route("products.prices.edit",{tenant:(t==null?void 0:t.id)||"",product:u.product.id,price:e.id}),icon:G}),r(H,{title:`Delete ${e.currency}`,route:route("products.prices.destroy",{tenant:(t==null?void 0:t.id)||"",product:u.product.id,price:e.id}),asChild:!1},()=>r($,{variant:"destructive",text:"Delete",icon:J}))])}},{accessorKey:"status",header:()=>r("div",null,"Active"),cell:({row:s})=>{const{status_badge:e}=s.original;return r(W,{statusBadge:e})}},{accessorKey:"id",header:()=>r("div",null,"Id"),cell:({row:s})=>r("div",null,s.getValue("id"))},{accessorKey:"currency",header:()=>r("div",null,"Currency"),cell:({row:s})=>r("div",null,s.getValue("currency"))},{accessorKey:"amount",header:()=>r("div",null,"Amount"),cell:({row:s})=>r("div",null,s.getValue("amount"))},{accessorKey:"created_at",header:()=>r("div",null,"Created At"),cell:({row:s})=>r("div",null,g(s.getValue("created_at"))||"")},{accessorKey:"updated_at",header:()=>r("div",null,"Updated At"),cell:({row:s})=>r("div",null,g(s.getValue("updated_at"))||"")}],T=_(()=>{var s;return((s=u.options.statuses.find(e=>e.is_default))==null?void 0:s.value)??n.ACTIVE}),P=_(()=>{var s;return((s=u.options.statuses.find(e=>e.value===i.status))==null?void 0:s.name)??ie[n.ACTIVE]}),i=E({currency:"",amount:"",status:T.value}),v=y({status:i.status===n.ACTIVE}),U=()=>i.post(route("products.prices.store",{tenant:(t==null?void 0:t.id)||"",product:u.product.id}),{onSuccess:()=>{i.reset(),f.create.dialogIsOpen=!1}});return K(()=>v.status,s=>{var o;const e=(o=u.options.statuses.find(h=>s?h.value===n.ACTIVE:h.value===n.INACTIVE))==null?void 0:o.value;e!==void 0&&(i.status=e)}),(s,e)=>(B(),w(k,null,[l(a(O),{title:"Product Prices"}),l(re,{breadcrumbs:I},{default:c(()=>[l(a(X),null,{default:c(()=>[p("div",le,[l(a(j),{onSearch:b,onReset:S},{default:c(()=>[l(a(M),{label:"Name",placeholder:"Search ID, Currency","model-value":d.search,"onUpdate:modelValue":e[0]||(e[0]=o=>d.search=o)},null,8,["model-value"]),l(a(F),{label:"Status",placeholder:"Select Status",options:s.options.statuses,multiple:"","model-value":d.status,"onUpdate:modelValue":e[1]||(e[1]=o=>d.status=o)},null,8,["options","model-value"])]),_:1}),p("div",ue,[l(a(se),{title:"Create Price",open:f.create.dialogIsOpen,"onUpdate:open":e[5]||(e[5]=o=>f.create.dialogIsOpen=o)},{default:c(()=>[p("form",{onSubmit:N(U,["prevent"]),class:"space-y-4"},[l(a(ee),{label:"Currency",options:s.options.currencies,"model-value":a(i).currency,"onUpdate:modelValue":e[2]||(e[2]=o=>a(i).currency=o),error:a(i).errors.currency},null,8,["options","model-value","error"]),l(a(Y),{label:"Amount",type:"number",error:a(i).errors.amount,"model-value":a(i).amount,"onUpdate:modelValue":e[3]||(e[3]=o=>a(i).amount=o),step:".01",min:"0.01"},null,8,["error","model-value"]),l(a(te),{label:P.value,error:a(i).errors.status,"model-value":v.status,"onUpdate:modelValue":e[4]||(e[4]=o=>v.status=o)},null,8,["label","error","model-value"]),l(a(Z),{type:"submit",disabled:a(i).processing,loading:a(i).processing},null,8,["disabled","loading"])],32)]),_:1},8,["open"])]),p("div",null,[l(a(R),{"model-value":d,"onUpdate:modelValue":e[6]||(e[6]=o=>d=o),columns:A,"paginate-data":s.prices,"column-visibility":x,"entry-options":a(q),onSearch:b},null,8,["model-value","paginate-data","entry-options"])])])]),_:1})]),_:1})],64))}});export{Ke as default};
