import{d as M,c as y,j as b,x as T,m as $,a as m,o as u,e as r,u as s,g as F,w as d,b as n,f as P,i as p,h as c,t as f,q as j,W as L,k as o,F as W,S as q}from"./app-KSbgUuIU.js";import{p as A,_ as k,P as H,a as G,T as J,b as Q}from"./pickBy-OLrpSmxv.js";import{_ as R}from"./Dialog.vue_vue_type_script_setup_true_lang-GgexZgWT.js";import{_ as X,e as Y}from"./options-CxoPM4-n.js";import{_ as g}from"./index-CYBbWwLu.js";import{_ as S}from"./Input.vue_vue_type_script_setup_true_lang-B4lqTRAY.js";import{_}from"./Label.vue_vue_type_script_setup_true_lang-BQ1of87h.js";import{_ as Z,L as ee}from"./Switch.vue_vue_type_script_setup_true_lang-m9ul1BKW.js";import{_ as se}from"./Textarea.vue_vue_type_script_setup_true_lang-ybfpBnld.js";import{u as te,_ as ae}from"./AppLayout.vue_vue_type_script_setup_true_lang-AZ2PnkQR.js";import{_ as oe}from"./AppMainLayout.vue_vue_type_script_setup_true_lang-CmtaUbgQ.js";import{s as ie}from"./slug-xwoAxeGq.js";import"./DialogTrigger.vue_vue_type_script_setup_true_lang-1WHSHCLR.js";import"./RovingFocusGroup-CJwQLeDY.js";import"./useForwardExpose-BCGP6J9B.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-B0BTTmgX.js";import"./check-DTeDlD4X.js";import"./Select.vue_vue_type_script_setup_true_lang-BILVJfgr.js";import"./useFormControl-AaFHe1Yj.js";import"./VisuallyHiddenInput-CPNnyZE-.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CRRCczxj.js";import"./index-T6uICwUp.js";const re={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},le={class:"space-y-3"},ne={class:"flex flex-wrap items-center justify-end gap-2"},de={class:"grid w-full max-w-sm items-center gap-1.5"},ce={key:0,class:"text-destructive"},ue={class:"grid w-full max-w-sm items-center gap-1.5"},me={key:0,class:"text-destructive"},pe={class:"grid w-full max-w-sm items-center gap-1.5"},fe={key:0,class:"text-destructive"},_e={class:"grid w-full max-w-sm items-center gap-1.5"},ve={class:"flex items-center space-x-2"},ge={key:0,class:"text-destructive"},he={class:"flex gap-2"},je=M({layout:oe,__name:"Index",props:{machines:{},options:{}},setup(D){const h=D,{tenant:i}=te(),C=y(()=>route().params),N=b({search:C.value.search,entries:C.value.entries||"10"}),x=b({create:{dialogIsOpen:!1}}),I={placeholder:"Search name..."},K=[{title:"Dashboard",href:route("dashboard",{tenant:(i==null?void 0:i.id)||""})},{title:"Machines",href:route("machines.index",{tenant:(i==null?void 0:i.id)||""})}],B=t=>L.visit(route("machines.index",{...A(t),tenant:(i==null?void 0:i.id)||""})),E={id:!1,description:!1},O=[{accessorKey:"actions",header:()=>o("div",null,"Actions"),cell:({row:t})=>{const e=t.original;return o("div",{class:"flex items-center gap-2"},[o(k,{text:"Edit"},()=>o(q,{href:route("machines.edit",{tenant:(i==null?void 0:i.id)||"",machine:e.id}),asChild:!0},()=>o(g,{class:"h-auto size-6 cursor-pointer rounded-full"},()=>o(H,{class:"size-3"})))),o(G,{title:`Delete ${e.name}`,route:route("machines.destroy",{tenant:(i==null?void 0:i.id)||"",machine:e.id}),asChild:!1},()=>o(k,{text:"Delete"},()=>o(g,{class:"h-auto size-6 cursor-pointer rounded-full",variant:"destructive"},()=>o(J,{class:"size-3"}))))])}},{accessorKey:"status",header:()=>o("div",null,"Status"),cell:({row:t})=>{const{status:e,status_label:l}=t.original;return o(Q,{variant:e?"default":"destructive"},()=>l)}},{accessorKey:"id",header:()=>o("div",null,"Id"),cell:({row:t})=>o("div",null,t.getValue("id"))},{accessorKey:"name",header:()=>o("div",null,"Name"),cell:({row:t})=>o("div",null,t.getValue("name"))},{accessorKey:"code",header:()=>o("div",null,"Code"),cell:({row:t})=>o("div",null,t.getValue("code"))},{accessorKey:"description",header:()=>o("div",null,"Description"),cell:({row:t})=>o("div",null,t.getValue("description"))}],w=y(()=>{var t;return(t=h.options.statuses.find(e=>e.is_default))==null?void 0:t.value}),U=y(()=>{var t;return(t=h.options.statuses.find(e=>v.status?e.value:!e.value))==null?void 0:t.name}),a=T({name:"",code:"",description:"",status:w.value!==void 0?w.value:1}),v=b({status:!!a.status}),z=()=>a.post(route("machines.store",{tenant:(i==null?void 0:i.id)||""}),{onSuccess:()=>{a.reset(),x.create.dialogIsOpen=!1}});return $(()=>a.name,t=>{a.code=ie(t)}),$(()=>v.status,t=>{var l;const e=(l=h.options.statuses.find(V=>t?V.value===1:V.value===0))==null?void 0:l.value;e!==void 0&&(a.status=e)}),(t,e)=>(u(),m(W,null,[r(s(F),{title:"Machines"}),r(ae,{breadcrumbs:K},{default:d(()=>[n("div",re,[n("div",le,[n("div",ne,[r(s(R),{title:"Create Machine",open:x.create.dialogIsOpen,"onUpdate:open":e[4]||(e[4]=l=>x.create.dialogIsOpen=l)},{trigger:d(()=>[r(s(g),{class:"cursor-pointer"},{default:d(()=>e[5]||(e[5]=[c("Create")])),_:1,__:[5]})]),default:d(()=>[n("form",{onSubmit:P(z,["prevent"]),class:"space-y-4"},[n("div",de,[r(s(_),null,{default:d(()=>e[6]||(e[6]=[c("Name")])),_:1,__:[6]}),r(s(S),{type:"text",placeholder:"Enter Name","model-value":s(a).name,"onUpdate:modelValue":e[0]||(e[0]=l=>s(a).name=l)},null,8,["model-value"]),s(a).errors.name?(u(),m("p",ce,f(s(a).errors.name),1)):p("",!0)]),n("div",ue,[r(s(_),null,{default:d(()=>e[7]||(e[7]=[c("Code")])),_:1,__:[7]}),r(s(S),{type:"text",placeholder:"Enter Code","model-value":s(a).code,"onUpdate:modelValue":e[1]||(e[1]=l=>s(a).code=l)},null,8,["model-value"]),s(a).errors.code?(u(),m("p",me,f(s(a).errors.code),1)):p("",!0)]),n("div",pe,[r(s(_),null,{default:d(()=>e[8]||(e[8]=[c("Description")])),_:1,__:[8]}),r(s(se),{placeholder:"Enter Description","model-value":s(a).description,"onUpdate:modelValue":e[2]||(e[2]=l=>s(a).description=l)},null,8,["model-value"]),s(a).errors.description?(u(),m("p",fe,f(s(a).errors.description),1)):p("",!0)]),n("div",_e,[r(s(_),{class:"mb-1"},{default:d(()=>e[9]||(e[9]=[c("Status")])),_:1,__:[9]}),n("div",ve,[r(s(Z),{class:"cursor-pointer","model-value":v.status,"onUpdate:modelValue":e[3]||(e[3]=l=>v.status=l)},null,8,["model-value"]),r(s(_),null,{default:d(()=>[c(f(U.value),1)]),_:1})]),s(a).errors.status?(u(),m("p",ge,f(s(a).errors.status),1)):p("",!0)]),n("div",he,[r(s(g),{type:"submit",class:"cursor-pointer",disabled:s(a).processing},{default:d(()=>[s(a).processing?(u(),j(s(ee),{key:0,class:"animate-spin"})):p("",!0),e[10]||(e[10]=c(" Create "))]),_:1,__:[10]},8,["disabled"])])],32)]),_:1},8,["open"])]),n("div",null,[r(s(X),{columns:O,"paginate-data":t.machines,"column-visibility":E,filter:N,"entry-options":s(Y),"search-config":I,onFilterChange:B},null,8,["paginate-data","filter","entry-options"])])])])]),_:1})],64))}});export{je as default};
