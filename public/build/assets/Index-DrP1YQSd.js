import{_ as P,s as j,a as H,b as L,c as W,p as I,P as q,T as G,d as J}from"./slug-D1GirAqz.js";import{_ as Q,e as R,u as X}from"./options-DFkPn-cB.js";import{_ as g}from"./index-BxDgIult.js";import{d as Y,l as Z,c as m,j as k,x as ee,m as w,a as v,o as f,e as r,u as s,g as te,w as l,b as d,i as h,h as c,t as p,k as o,F as se,W as ae}from"./app-CYVHa_Zs.js";import{_ as V}from"./Input.vue_vue_type_script_setup_true_lang-7KqnIruQ.js";import{_}from"./Label.vue_vue_type_script_setup_true_lang-CqJYJKs5.js";import{_ as ie}from"./AppLayout.vue_vue_type_script_setup_true_lang-OHDngyGm.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-QJUHJAKn.js";import"./RovingFocusGroup-DPJ-y03q.js";import"./useForwardExpose-UrXeo5vS.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-ByIwWkog.js";import"./check-CD-qIF5j.js";import"./VisuallyHiddenInput-Bo2r0l4D.js";import"./index-BOh3yhT_.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DoS6GuXp.js";const oe={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},ne={class:"space-y-3"},re={class:"flex flex-wrap items-center justify-end gap-2"},le={class:"grid w-full max-w-sm items-center gap-1.5"},de={key:0,class:"text-destructive"},ce={class:"grid w-full max-w-sm items-center gap-1.5"},ue={key:0,class:"text-destructive"},pe={class:"grid w-full max-w-sm items-center gap-1.5"},me={key:0,class:"text-destructive"},ve={class:"grid w-full max-w-sm items-center gap-1.5"},fe={class:"flex items-center space-x-2"},_e={key:0,class:"text-destructive"},Be=Y({layout:P,__name:"Index",props:{machines:{},statuses:{}},setup($){const D=$,{formatDateTime:b}=X(),K=Z(),u=m(()=>{var t;return((t=K.props.tenant)==null?void 0:t.id)||""}),C=m(()=>route().params),N=k({search:C.value.search,entries:C.value.entries||"10"}),O={placeholder:"Search name..."},U=[{title:"Dashboard",href:route("dashboard",{tenant:u.value})},{title:"Machines",href:route("machines.index",{tenant:u.value})}],B=t=>{ae.visit(route("machines.index",{...I(t),tenant:u.value}))},E={description:!1},M=[{accessorKey:"actions",header:()=>o("div",null,"Actions"),cell:({row:t})=>{const e=t.original;return o("div",{class:"flex items-center gap-2"},[o(g,{class:"h-auto size-6 cursor-pointer rounded-full",onClick:()=>x("update",e)},()=>o(q,{class:"size-3"})),o(g,{class:"h-auto size-6 cursor-pointer rounded-full",variant:"destructive",onClick:()=>x("destroy",e)},()=>o(G,{class:"size-3"}))])}},{accessorKey:"name",header:()=>o("div",null,"Name"),cell:({row:t})=>o("div",null,t.getValue("name"))},{accessorKey:"code",header:()=>o("div",null,"Code"),cell:({row:t})=>o("div",null,t.getValue("code"))},{accessorKey:"description",header:()=>o("div",null,"Description"),cell:({row:t})=>o("div",null,t.getValue("description"))},{accessorKey:"is_active",header:()=>o("div",null,"Active"),cell:({row:t})=>{const{is_active:e,is_active_display:n}=t.original;return o(J,{variant:e?"default":"destructive"},()=>n)}},{accessorKey:"created_at",header:()=>o("div",null,"Created At"),cell:({row:t})=>{const e=b(t.original.created_at);return e?o("div",null,e):o("div",null)}},{accessorKey:"updated_at",header:()=>o("div",null,"Updated At"),cell:({row:t})=>{const e=b(t.original.updated_at);return e?o("div",null,e):o("div",null)}}],a=k({type:null,title:"",isOpen:!1,data:null}),i=ee(a.type||"",{name:"",code:"",description:"",is_active:!0}),S=m(()=>{var t;return(t=D.statuses.find(e=>i.is_active?e.value:!e.value))==null?void 0:t.name}),T=m(()=>a.type==="store"?"Create":a.type==="update"?"Update":"Delete"),z=m(()=>a.type==="destroy"?"destructive":"default"),x=(t,e)=>{var n,y;switch(t){case"store":a.title="Create Machine";break;case"update":e&&(a.data=e,i.name=e.name,i.code=e.code,i.description=e.description||"",i.is_active=e.is_active),a.title=`Edit ${((n=a.data)==null?void 0:n.name)||"Machine"}`;break;case"destroy":e&&(a.data=e),a.title=`Delete ${((y=a.data)==null?void 0:y.name)||"Machine"}`}a.type=t,a.isOpen=!0},A=()=>{var t,e;if(a.type){const n=a.type==="store"?route("machines.store",{tenant:u.value}):a.type==="update"?route("machines.update",{tenant:u.value,machine:((t=a.data)==null?void 0:t.id)||""}):route("machines.destroy",{tenant:u.value,machine:((e=a.data)==null?void 0:e.id)||""}),y=a.type==="store"?"post":a.type==="update"?"put":"delete";i.transform(F=>a.type!=="destroy"?F:{}).submit(y,n,{onSuccess:()=>{i.reset(),a.isOpen=!1}})}};return w(()=>a.isOpen,t=>{t||(a.data=null,i.clearErrors(),i.reset())}),w([()=>i.name,()=>a.type],([t,e])=>{e==="store"&&(i.code=j(t))}),(t,e)=>(f(),v(se,null,[r(s(te),{title:"Machines"}),r(ie,{breadcrumbs:U},{default:l(()=>[d("div",oe,[d("div",ne,[d("div",re,[r(s(H),{open:a.isOpen,"onUpdate:open":e[5]||(e[5]=n=>a.isOpen=n),dialog:a,onSubmit:A},{button:l(()=>[r(s(g),{class:"cursor-pointer",onClick:e[0]||(e[0]=n=>x("store"))},{default:l(()=>e[6]||(e[6]=[c("Create")])),_:1,__:[6]})]),"submit-button":l(()=>[r(s(g),{type:"submit",class:"cursor-pointer",variant:z.value,disabled:s(i).processing},{default:l(()=>[c(p(T.value),1)]),_:1},8,["variant","disabled"])]),default:l(()=>[d("div",le,[r(s(_),null,{default:l(()=>e[7]||(e[7]=[c("Name")])),_:1,__:[7]}),r(s(V),{type:"text",placeholder:"Enter Name","model-value":s(i).name,"onUpdate:modelValue":e[1]||(e[1]=n=>s(i).name=n)},null,8,["model-value"]),s(i).errors.name?(f(),v("p",de,p(s(i).errors.name),1)):h("",!0)]),d("div",ce,[r(s(_),null,{default:l(()=>e[8]||(e[8]=[c("Code")])),_:1,__:[8]}),r(s(V),{type:"text",placeholder:"Enter Code","model-value":s(i).code,"onUpdate:modelValue":e[2]||(e[2]=n=>s(i).code=n)},null,8,["model-value"]),s(i).errors.code?(f(),v("p",ue,p(s(i).errors.code),1)):h("",!0)]),d("div",pe,[r(s(_),null,{default:l(()=>e[9]||(e[9]=[c("Description")])),_:1,__:[9]}),r(s(L),{placeholder:"Enter Description","model-value":s(i).description,"onUpdate:modelValue":e[3]||(e[3]=n=>s(i).description=n)},null,8,["model-value"]),s(i).errors.description?(f(),v("p",me,p(s(i).errors.description),1)):h("",!0)]),d("div",ve,[r(s(_),{class:"mb-1"},{default:l(()=>e[10]||(e[10]=[c("Status")])),_:1,__:[10]}),d("div",fe,[r(s(W),{class:"cursor-pointer","model-value":s(i).is_active,"onUpdate:modelValue":e[4]||(e[4]=n=>s(i).is_active=n)},null,8,["model-value"]),r(s(_),null,{default:l(()=>[c(p(S.value),1)]),_:1})]),s(i).errors.is_active?(f(),v("p",_e,p(s(i).errors.is_active),1)):h("",!0)])]),_:1},8,["open","dialog"])]),d("div",null,[r(s(Q),{columns:M,"paginate-data":t.machines,"column-visibility":E,filter:N,"entry-options":s(R),"search-config":O,onFilterChange:B},null,8,["paginate-data","filter","entry-options"])])])])]),_:1})],64))}});export{Be as default};
