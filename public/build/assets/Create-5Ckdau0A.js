import{d as h,z as B,c as f,x as N,r as w,f as v,a as _,o as y,e as l,u as t,g as L,w as p,b as n,h as P,n as C,F as g,s as q}from"./app-Bpp2Ep_u.js";import{L as D}from"./index-DfOI-09q.js";import{_ as k,a as F}from"./FormInput.vue_vue_type_script_setup_true_lang-DpYkQWZj.js";import{_ as j}from"./Label.vue_vue_type_script_setup_true_lang-xwMa4j3f.js";import{_ as z}from"./FormSwitch.vue_vue_type_script_setup_true_lang-rNDFlZ_x.js";import{_ as O}from"./FormTextarea.vue_vue_type_script_setup_true_lang-BptgrTO4.js";import{_ as R}from"./index-C6fWEfII.js";import{u as G,S as m,a as H,_ as J,P as K}from"./index-4uiBMSfV.js";import{u as Q,_ as W}from"./AppLayout.vue_vue_type_script_setup_true_lang-BF1Gl5Ph.js";import{_ as X}from"./AppMainLayout.vue_vue_type_script_setup_true_lang-ByRRqFff.js";import{s as Y}from"./slug-xwoAxeGq.js";import"./useForwardExpose-rOcx7BkQ.js";import"./Switch.vue_vue_type_script_setup_true_lang-BA_0ISoO.js";import"./RovingFocusGroup-bXShlB3H.js";import"./useFormControl-a5l-P2b3.js";import"./VisuallyHiddenInput-CCj47bq6.js";import"./FormSelect.vue_vue_type_script_setup_true_lang-DS1JOaSZ.js";import"./Select.vue_vue_type_script_setup_true_lang-qBXRkwJR.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-OVzfARf1.js";import"./check-Bw0EwC7w.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-D4rF7PW5.js";const Z={class:"space-y-3"},ee={class:"space-y-3"},te={class:"space-y-3"},se={class:"flex items-center justify-center"},xe=h({layout:X,__name:"Create",props:{product:{},materials:{},options:{}},setup($){const u=$,{tenant:a}=Q(),{uuid:b}=G(),x=[{title:"Dashboard",href:route("dashboard",{tenant:(a==null?void 0:a.id)||""})},{title:"Products",href:route("products.index",{tenant:(a==null?void 0:a.id)||""})},{title:u.product.name,href:"#"},{title:"Boms",href:route("products.boms.index",{tenant:(a==null?void 0:a.id)||"",product:u.product.id})},{title:"Create",href:route("products.boms.create",{tenant:(a==null?void 0:a.id)||"",product:u.product.id})}],V={data:null,quantity:"",unit_type:""},i=B([{...V,key:b()}]),S=f(()=>{var o;return((o=u.options.statuses.find(e=>e.is_default))==null?void 0:o.value)??m.ACTIVE}),T=f(()=>{var o;return((o=u.options.statuses.find(e=>e.value===s.status))==null?void 0:o.name)??H[m.ACTIVE]}),U=f(()=>u.materials.map(o=>({name:o.name,value:o}))),s=N({name:"",code:"",description:"",materials:[],status:S.value}),c=w({status:s.status===m.ACTIVE}),A=()=>{i.value=[...i.value,{...V,key:b()}]},E=o=>{i.value=i.value.filter(e=>e.key!==o)},I=()=>s.post(route("products.boms.store",{tenant:(a==null?void 0:a.id)||"",product:u.product.id}),{preserveScroll:!0,preserveState:!0});return v(i,o=>{s.materials=o.map(e=>{var r;return{key:e.key,id:((r=e.data)==null?void 0:r.id)||"",quantity:e.quantity,unit_type:e.unit_type}})},{immediate:!0,deep:!0}),v(()=>s.name,o=>{s.code=Y(o)}),v(()=>c.status,o=>{var r;const e=(r=u.options.statuses.find(d=>o?d.value===m.ACTIVE:d.value===m.INACTIVE))==null?void 0:r.value;e!==void 0&&(s.status=e)}),(o,e)=>(y(),_(g,null,[l(t(L),{title:"Create Product Bom"}),l(W,{breadcrumbs:x},{default:p(()=>[l(t(D),null,{default:p(()=>[n("div",Z,[n("form",{onSubmit:P(I,["prevent"]),class:"space-y-4"},[l(t(k),{label:"Name",error:t(s).errors.name,"model-value":t(s).name,"onUpdate:modelValue":e[0]||(e[0]=r=>t(s).name=r)},null,8,["error","model-value"]),l(t(k),{label:"Code",error:t(s).errors.code,"model-value":t(s).code,"onUpdate:modelValue":e[1]||(e[1]=r=>t(s).code=r)},null,8,["error","model-value"]),l(t(O),{label:"Description",error:t(s).errors.description,"model-value":t(s).description,"onUpdate:modelValue":e[2]||(e[2]=r=>t(s).description=r)},null,8,["error","model-value"]),n("div",ee,[n("div",null,[l(t(j),{class:"mb-1"},{default:p(()=>e[4]||(e[4]=[C("Materials:")])),_:1,__:[4]})]),n("div",te,[(y(!0),_(g,null,q(i.value,(r,d)=>(y(),_("div",{key:r.key,class:"space-y-1"},[l(t(J),{"material-options":U.value,"unit-type-options":o.options.unit_types,"total-selected":i.value.length,"model-value":i.value[d],"onUpdate:modelValue":M=>i.value[d]=M,"curr-index":d,onRemove:E},null,8,["material-options","unit-type-options","total-selected","model-value","onUpdate:modelValue","curr-index"])]))),128))]),n("div",se,[l(t(R),{type:"button",class:"cursor-pointer",variant:"outline",onClick:A},{default:p(()=>[l(t(K)),e[5]||(e[5]=C(" Add Material"))]),_:1,__:[5]})])]),l(t(z),{label:T.value,error:t(s).errors.status,"model-value":c.status,"onUpdate:modelValue":e[3]||(e[3]=r=>c.status=r)},null,8,["label","error","model-value"]),l(t(F),{type:"submit",disabled:t(s).processing,loading:t(s).processing},null,8,["disabled","loading"])],32)])]),_:1})]),_:1})],64))}});export{xe as default};
