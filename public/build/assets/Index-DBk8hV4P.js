import{d as D,c as _,r as y,x as E,f as K,a as w,o as B,e as l,u as r,g as O,w as c,b as p,W as V,h as N,i as a,F as k}from"./app-Bpp2Ep_u.js";import{_ as F,a as L,b as W}from"./StatusSwitch.vue_vue_type_script_setup_true_lang-W1CIgrju.js";import{_ as j,a as M,b as R,e as q,p as z,c as S,P as G,d as H,T as J,u as Q}from"./pickBy-V1SMm1A7.js";import{L as X}from"./index-DfOI-09q.js";import{_ as Y,a as Z}from"./FormInput.vue_vue_type_script_setup_true_lang-DpYkQWZj.js";import{_ as ee}from"./FormSelect.vue_vue_type_script_setup_true_lang-DS1JOaSZ.js";import{_ as te}from"./FormSwitch.vue_vue_type_script_setup_true_lang-rNDFlZ_x.js";import{_ as se}from"./Dialog.vue_vue_type_script_setup_true_lang-CNkUMidd.js";import{u as re,_ as ae}from"./AppLayout.vue_vue_type_script_setup_true_lang-BF1Gl5Ph.js";import{_ as oe}from"./AppMainLayout.vue_vue_type_script_setup_true_lang-ByRRqFff.js";import{a as n,S as ie}from"./index-Cm4Do1SD.js";import"./index-C6fWEfII.js";import"./useForwardExpose-rOcx7BkQ.js";import"./Label.vue_vue_type_script_setup_true_lang-xwMa4j3f.js";import"./Select.vue_vue_type_script_setup_true_lang-qBXRkwJR.js";import"./RovingFocusGroup-bXShlB3H.js";import"./BreadcrumbSeparator.vue_vue_type_script_setup_true_lang-OVzfARf1.js";import"./check-Bw0EwC7w.js";import"./useFormControl-a5l-P2b3.js";import"./Switch.vue_vue_type_script_setup_true_lang-BA_0ISoO.js";import"./VisuallyHiddenInput-CCj47bq6.js";import"./CardTitle.vue_vue_type_script_setup_true_lang-CWyXmvF6.js";import"./DialogTrigger.vue_vue_type_script_setup_true_lang-DHlMUJZx.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-D4rF7PW5.js";const le={class:"space-y-3"},ue={class:"flex flex-wrap items-center justify-end gap-2"},Ke=D({layout:oe,__name:"Index",props:{product:{},prices:{},options:{}},setup($){const u=$,{tenant:t}=re(),{formatDateTime:g}=Q(),m=_(()=>route().params),d=y({search:m.value.search,entries:m.value.entries||"10",status:m.value.status}),f=y({create:{dialogIsOpen:!1}}),C=[{title:"Dashboard",href:route("dashboard",{tenant:(t==null?void 0:t.id)||""})},{title:"Products",href:route("products.index",{tenant:(t==null?void 0:t.id)||""})},{title:u.product.name,href:"#"},{title:"Prices",href:route("products.prices.index",{tenant:(t==null?void 0:t.id)||"",product:u.product.id})}],b=()=>V.visit(route("products.prices.index",{...z(d),tenant:(t==null?void 0:t.id)||"",product:u.product.id}),{preserveScroll:!0,preserveState:!0}),I=()=>V.visit(route("products.prices.index",{tenant:(t==null?void 0:t.id)||"",product:u.product.id})),x={id:!1},A=[{accessorKey:"actions",header:()=>a("div",null,"Actions"),cell:({row:s})=>{const e=s.original;return a("div",{class:"flex items-center gap-2"},[a(L,{value:e.status.switch,method:"put",href:route("products.prices.toggleStatus",{tenant:(t==null?void 0:t.id)||"",product:u.product.id,price:e.id})}),a(S,{text:"Edit",href:route("products.prices.edit",{tenant:(t==null?void 0:t.id)||"",product:u.product.id,price:e.id}),icon:G}),a(H,{title:`Delete ${e.currency}`,route:route("products.prices.destroy",{tenant:(t==null?void 0:t.id)||"",product:u.product.id,price:e.id}),asChild:!1},()=>a(S,{variant:"destructive",text:"Delete",icon:J}))])}},{accessorKey:"status",header:()=>a("div",null,"Active"),cell:({row:s})=>{const{status:e}=s.original;return a(W,{statusBadge:e.badge})}},{accessorKey:"id",header:()=>a("div",null,"Id"),cell:({row:s})=>a("div",null,s.getValue("id"))},{accessorKey:"currency",header:()=>a("div",null,"Currency"),cell:({row:s})=>a("div",null,s.getValue("currency"))},{accessorKey:"amount",header:()=>a("div",null,"Amount"),cell:({row:s})=>a("div",null,s.getValue("amount"))},{accessorKey:"created_at",header:()=>a("div",null,"Created At"),cell:({row:s})=>a("div",null,g(s.getValue("created_at"))||"")},{accessorKey:"updated_at",header:()=>a("div",null,"Updated At"),cell:({row:s})=>a("div",null,g(s.getValue("updated_at"))||"")}],T=_(()=>{var s;return((s=u.options.statuses.find(e=>e.is_default))==null?void 0:s.value)??n.ACTIVE}),P=_(()=>{var s;return((s=u.options.statuses.find(e=>e.value===i.status))==null?void 0:s.name)??ie[n.ACTIVE]}),i=E({currency:"",amount:"",status:T.value}),v=y({status:i.status===n.ACTIVE}),U=()=>i.post(route("products.prices.store",{tenant:(t==null?void 0:t.id)||"",product:u.product.id}),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{i.reset(),f.create.dialogIsOpen=!1}});return K(()=>v.status,s=>{var o;const e=(o=u.options.statuses.find(h=>s?h.value===n.ACTIVE:h.value===n.INACTIVE))==null?void 0:o.value;e!==void 0&&(i.status=e)}),(s,e)=>(B(),w(k,null,[l(r(O),{title:"Product Prices"}),l(ae,{breadcrumbs:C},{default:c(()=>[l(r(X),null,{default:c(()=>[p("div",le,[l(r(j),{onSearch:b,onReset:I},{default:c(()=>[l(r(M),{label:"Name",placeholder:"Search ID, Currency","model-value":d.search,"onUpdate:modelValue":e[0]||(e[0]=o=>d.search=o)},null,8,["model-value"]),l(r(F),{label:"Status",placeholder:"Select Status",options:s.options.statuses,multiple:"","model-value":d.status,"onUpdate:modelValue":e[1]||(e[1]=o=>d.status=o)},null,8,["options","model-value"])]),_:1}),p("div",ue,[l(r(se),{title:"Create Price",open:f.create.dialogIsOpen,"onUpdate:open":e[5]||(e[5]=o=>f.create.dialogIsOpen=o)},{default:c(()=>[p("form",{onSubmit:N(U,["prevent"]),class:"space-y-4"},[l(r(ee),{label:"Currency",options:s.options.currencies,"model-value":r(i).currency,"onUpdate:modelValue":e[2]||(e[2]=o=>r(i).currency=o),error:r(i).errors.currency},null,8,["options","model-value","error"]),l(r(Y),{label:"Amount",type:"number",error:r(i).errors.amount,"model-value":r(i).amount,"onUpdate:modelValue":e[3]||(e[3]=o=>r(i).amount=o),step:".01",min:"0.01"},null,8,["error","model-value"]),l(r(te),{label:P.value,error:r(i).errors.status,"model-value":v.status,"onUpdate:modelValue":e[4]||(e[4]=o=>v.status=o)},null,8,["label","error","model-value"]),l(r(Z),{type:"submit",disabled:r(i).processing,loading:r(i).processing},null,8,["disabled","loading"])],32)]),_:1},8,["open"])]),p("div",null,[l(r(R),{"model-value":d,"onUpdate:modelValue":e[6]||(e[6]=o=>d=o),columns:A,"paginate-data":s.prices,"column-visibility":x,"entry-options":r(q),onSearch:b},null,8,["model-value","paginate-data","entry-options"])])])]),_:1})]),_:1})],64))}});export{Ke as default};
